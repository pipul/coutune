%!PS-Adobe-2.0
%%Creator: dvipsk 5.58f Copyright 1986, 1994 Radical Eye Software
%%Title: nowSort.dvi
%%Pages: 12
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Times-Bold Times-Roman Times-Italic Courier
%%EndComments
%DVIPSCommandLine: dvips -o nowSort.ps nowSort
%DVIPSParameters: dpi=300, comments removed
%DVIPSSource:  TeX output 1997.02.13:1431
%%BeginProcSet: tex.pro
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
mul N /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1}{-1 1}
ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg scale
isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div
hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul
TR[matrix currentmatrix{dup dup round sub abs 0.00001 lt{round}if}
forall round exch round exch]setmatrix}N /@landscape{/isls true N}B
/@manualfeed{statusdict /manualfeed true put}B /@copies{/#copies X}B
/FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{
/nn 8 dict N nn begin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N
string /base X array /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N
end dup{/foo setfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{
/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]
N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data dup
length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{
128 ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub
get 127 sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data
dup type /stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N
/rc 0 N /gp 0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup
/base get 2 index get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx
0 ch-xoff ch-yoff ch-height sub ch-xoff ch-width add ch-yoff
setcachedevice ch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff
.1 sub]{ch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}
if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup
length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{
cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul
add .99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore showpage
userdict /eop-hook known{eop-hook}if}N /@start{userdict /start-hook
known{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
getinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
ifelse}{false}ifelse end{{gsave TR -.1 .1 TR 1 1 scale rulex ruley false
RMat{BDot}imagemask grestore}}{{gsave TR -.1 .1 TR rulex ruley scale 1 1
false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave newpath transform
round exch round exch itransform moveto rulex 0 rlineto 0 ruley neg
rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N /tail
{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{
4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{
p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p
a}B /bos{/SS save N}B /eos{SS restore}B end
%%EndProcSet
%%BeginProcSet: texps.pro
TeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
index /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont /setfont load]cvx def}def
/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
end
%%EndProcSet
%%BeginProcSet: special.pro
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
false N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
div /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
true def end /@MacSetUp{userdict /md known{userdict /md get type
/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
clippath mark{transform{itransform moveto}}{transform{itransform lineto}
}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
closepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
div VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
N /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
maxlength dict begin /magscale true def normalscale currentpoint TR
/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
psf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
end}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
N /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
SaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
yrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end
%%EndProcSet
TeXDict begin 40258437 52099154 1000 300 300 (nowSort.dvi)
@start /Fa 134[15 1[22 1[17 9 13 13 1[17 17 17 24 9 2[9
17 17 9 15 17 15 17 17 8[20 1[20 24 18 17 20 1[20 24
22 28 1[22 15 11 1[24 1[20 24 22 20 20 7[17 2[17 17 17
17 17 17 17 9 1[11 5[11 39[{}50 33.333332 /Times-Italic
rf /Fb 1 100 df<0F8030C060804000C000C000C04061803E000A097E880D>99
D E /Fc 3 4 df<FFFFFEFFFFFE17027D891E>0 D<60F0F06004047D8A0B>I<03000300
03000300E31C73381FE0078007801FE07338E31C03000300030003000E107E9013>3
D E /Fd 133[22 22 1[22 22 22 22 22 22 1[22 22 22 22 22
22 1[22 22 1[22 22 22 22 22 22 38[22 10[22 22 46[{}25
37.500000 /Courier rf /Fe 7 110 df<004000C00180018001800300030003000600
060006000C000C000C00180018001800300030003000600060006000C000C0000A197D92
10>61 D<0FFFC00180600180300300300300300300300300E006038007FF800601C00600
C00C00C00C00C00C00C00C0180180700FFFC0014117E9017>66 D<0FC003F001C0038001
C0058002C00B0002600B0002601300026023000460260004604600043086000431060008
310C0008320C0008340C00081C0C0018181800FE10FF001C117E901D>77
D<0F80FE01C01001C010026020026020023020023020041840041840040C40040C400806
80080680080380080380180100FE010017117E9018>I<78001800180030003000300037
0078C0604060606060C0C0C0C0C0C0418063003C000B117E900E>98
D<0780184030C060006000C000C000C000402060C01F000B0B7E8A0E>I<71F1F09A1A18
9C1C18981818181818303030303030303032303062606064606038170B7E8A1B>109
D E /Ff 4 62 df<00800100020004000C00080018003000300030006000600060006000
E000E000E000E000E000E000E000E000E000E00060006000600060003000300030001800
08000C00040002000100008009267D9B0F>40 D<8000400020001000180008000C000600
060006000300030003000300038003800380038003800380038003800380038003000300
030003000600060006000C0008001800100020004000800009267E9B0F>I<000C000000
0C0000000C0000000C0000000C0000000C0000000C0000000C0000000C0000000C000000
0C0000000C0000FFFFFF80FFFFFF80000C0000000C0000000C0000000C0000000C000000
0C0000000C0000000C0000000C0000000C0000000C0000000C0000191A7E951E>43
D<FFFFFF80FFFFFF80000000000000000000000000000000000000000000000000FFFFFF
80FFFFFF80190A7E8D1E>61 D E /Fg 14 113 df<01F006001C00380070007000FFC0E0
00E000E000E000E0006000300818300FC00D107F8F10>15 D<0600C00700E00E01C00E01
C00E01C00E01C01C03801C03801C03801C03803807203807203807203C0F207C334077C1
C0700000700000E00000E00000E00000E00000C0000013177F8F17>22
D<00000E00003C0000F00003C0000F00003C0000F00003C0000F00003C0000F00000F000
003C00000F000003C00000F000003C00000F000003C00000F000003C00000E17167D931E
>60 D<0004000C00180018001800300030003000600060006000C000C000C00180018001
800300030003000600060006000C000C000C001800180018003000300030006000600060
00C000C0000E257E9B13>I<03FFFC000070070000700380007003C000E003C000E003C0
00E003C000E003C001C0078001C00F0001C01E0001C03C0003FFF80003803C0003801E00
03800F0007000F0007000F0007000F0007000F000E001E000E001E000E003C000E007800
1C01E000FFFF80001A1A7E991D>66 D<03F80003F800780007800078000B800078000B80
009C001700009C001700009C002700009C004700011C004E00011C008E00011C010E0001
0E010E00020E021C00020E041C00020E041C00020E081C00040E083800040E103800040E
20380004072038000807407000080780700008078070001807007000380600E000FF0607
FE00251A7E9925>77 D<03F001FE0078007000780020005C0020009C0040008E0040008E
0040008E0040010700800107008001038080010380800201C1000201C1000201C1000200
E1000400E200040072000400720004003A0008003C0008003C0008001C0018001C003800
0800FF0008001F1A7E991F>I<03FFFC0000700F00007003800070038000E003C000E003
C000E003C000E003C001C0078001C0078001C00F0001C01E000380380003FFE000038000
0003800000070000000700000007000000070000000E0000000E0000000E0000000E0000
001C000000FFC000001A1A7E9919>80 D<03FFF80000700F00007007800070038000E003
C000E003C000E003C000E003C001C0078001C0070001C01E0001C0780003FFC000038060
000380300003803800070038000700380007003800070038000E0078000E0078000E0078
400E0078801C003C80FFC01F001A1A7E991D>82 D<7E000E000E000E001C001C001C001C
003800380039E03E107818701C700C701CE01CE01CE01CE018E038C030E07060E021801F
000E1A7F9910>98 D<03000380030000000000000000000000000000003C004E004E008E
008E009C001C001C0038003800390071007100720072003C00091A7E990D>105
D<1F80000380000380000380000700000700000700000700000E00000E00000E07000E19
801C23801C41801C80001D00003E00003FC00038E0003870007071007071007071007072
00E03200601C00111A7F9914>107 D<703E0058C7009D03809E03809C03809C03803807
00380700380700380E00700E40700E40701C40701C80E00C8060070012107E8F17>110
D<07078005984009E06009C07009C03009C0700380700380700380700380600700E00700
C00701C00703800E86000E7C000E00000E00001C00001C00001C00001C0000FF00001417
828F13>112 D E /Fh 81[21 51[17 19 19 27 19 21 12 15 17
1[21 19 21 31 10 21 1[10 21 19 12 17 21 17 21 19 9[37
2[25 21 27 29 23 29 27 35 25 2[15 29 2[25 27 27 25 27
6[12 11[9 12 9 21 1[12 12 40[{}49 37.500000 /Times-Bold
rf /Fi 204[12 12 12 12 48[{}4 25.000000 /Times-Roman
rf /Fj 81[19 51[15 17 17 25 17 19 10 15 15 19 19 19 19
27 10 17 1[10 19 19 10 17 19 17 19 19 9[31 1[27 21 19
23 1[23 27 25 31 3[12 27 27 23 23 27 25 23 23 5[12 12
19 19 19 19 19 19 19 19 19 19 10 9 12 9 2[12 12 40[{}62
37.500000 /Times-Italic rf /Fk 69[17 8[19 1[21 21 3[17
47[17 19 19 27 19 19 10 15 12 19 19 19 19 29 10 19 10
10 19 19 12 17 19 17 19 17 3[12 1[12 1[27 27 35 27 27
23 21 25 1[21 27 27 33 23 27 1[12 27 27 21 23 27 25 25
27 5[10 10 19 19 19 19 19 19 19 19 19 19 10 9 12 9 21
1[12 12 12 1[31 19 1[15 34[{}79 37.500000 /Times-Roman
rf /Fl 53 123 df<01FC3F8007FCFF800FFDFF801F07E0801F03E0001F03E0001F03E0
001F03E0001F03E0007FE3FC00FFE3FC00FFE3FC001F03E0001F03E0001F03E0001F03E0
001F03E0001F03E0001F03E0001F03E0001F03E0001F03E0001F03E0001F03E0001F03E0
000F03E000191A809918>11 D<FFE0FFE0FFE00B0380890E>45 D<F8F8F8F8F805057D84
0B>I<01C003C01FC0FFC0FFC067C007C007C007C007C007C007C007C007C007C007C007
C007C007C007C007C007C007C07FFCFFFC7FFC0E1A7D9915>49 D<07E01FF03FFC7FFEF8
7EF03F603F201F001F003F003F003E007C007C00F801F003E007800F000E001C0038007F
FFFFFFFFFF7FFF101A7E9915>I<0FE03FF87FFCFFFC707E407E003E007E007E00FC07F8
07F007F8007C003E003F003F003F003F403F603FF87EFFFE7FFC3FF80FE0101A7E9915>
I<00FC0000FC0001FC0001FC0003BC0007BC00073C000F3C000F3C001E3C001E3C003C3C
003C3C00783C00783C00F03C00FFFFC0FFFFC0FFFFC0FFFFC0003C00003C00003C00003C
00003C00003C00121A7F9915>I<1FFF003FFF003FFF003FFF003E00003E00003E00003E
00003E00003E00003FF8003FFC003FFE003E1F001C1F80001F80001F80001F80201F8060
1F80701F80F83F007FFF003FFE001FFC0007F000111A7F9915>I<01F007F81FF81FF83F
087C007C007800F800F8F0FBFCFFFEFE3EFC1FF81FF81FF81FF81FF81F781F7C1F7C3E3F
FE1FFC0FF807E0101A7E9915>I<FFFFFFFFFFFFFFFF001E003C007C00F800F801F001F0
03E003E007E007C00FC00FC00FC00F801F801F801F801F801F801F801F80101A7E9915>
I<0FF03FFC7FFE7FFEFC3FF81FF81FF81FF81F781E7FFE1FF81FF87E7E7C3EF81FF81FF8
1FF81FF81FF81F7C3E7FFE3FFC1FF807E0101A7E9915>I<00FC0001FE0001FE0003FF00
03FF0003DF0003DF0007DF80079F80078F800F8FC00F8FC00F0FC01F07E01F07E01E07E0
3E03F03FFFF03FFFF07FFFF87C01F87801F8F800FCF800FCF800FCF0007C161A7E991B>
65 D<7FFE00FFFF80FFFFC0FC0FE0FC03F0FC03F0FC03F0FC03F0FC03F0FC03E0FC0FE0
FFFFC0FFFF80FFFFE0FC07F0FC03F0FC01F8FC01F8FC01F8FC01F8FC01F8FC03F8FC07F0
FFFFE0FFFFC07FFF00151A7D991B>I<007FC003FFF80FFFF81FFFF83FC0703F00107E00
007E00007E0000FC0000FC0000FC0000FC0000FC0000FC0000FC0000FC00007E00007E00
007E00003F00083FC0781FFFF80FFFF803FFF0007F80151A7E991A>I<7FFF00FFFFE0FF
FFF0FC07F8FC01FCFC00FCFC007EFC007EFC003FFC003FFC003FFC003FFC003FFC003FFC
003FFC003FFC003FFC003FFC003EFC007EFC007EFC00FCFC03F8FFFFF0FFFFE07FFF0018
1A7D991E>I<7FFFC0FFFFC0FFFFC0FFFFC0FC0000FC0000FC0000FC0000FC0000FC0000
FC0000FFFF80FFFF80FFFF80FFFF80FC0000FC0000FC0000FC0000FC0000FC0000FC0000
FFFFC0FFFFC0FFFFC07FFFC0121A7D9918>I<7C007EFC007EFC007EFC007EFC007EFC00
7EFC007EFC007EFC007EFC007EFFFFFEFFFFFEFFFFFEFFFFFEFC007EFC007EFC007EFC00
7EFC007EFC007EFC007EFC007EFC007EFC007EFC007E7C007E171A7D991E>72
D<7CFCFCFCFCFCFCFCFCFCFCFCFCFCFCFCFCFCFCFCFCFCFCFCFC7C061A7D990C>I<7800
1EF8007EF800FCF801F0F803E0F807C0F80F80F81F00F83E00F87C00F9F800FBF800FFF8
00FFFC00FF7E00FE3F00FC1F00F80F80F80FC0F807E0F803E0F803F0F801F8F800FCF800
7C78007C171A7D991D>75 D<7C00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00
FC00FC00FC00FC00FC00FC00FC00FC00FC00FC00FFFFFFFFFFFF7FFF101A7D9916>I<7E
0001FCFF0003FCFF0003FCFF0003FCFF8007FCF780077CF7C00F7CF3C00E7CF3C00E7CF3
E01E7CF1E01C7CF1F03C7CF1F03C7CF0F0387CF0F8787CF0F8787CF078707CF07CF07CF0
7CF07CF03CE07CF03CE07CF01FC07CF01FC07CF01FC07CF00F807C7007007C1E1A7D9925
>I<7E001EFF001EFF001EFF801EFF801EF7C01EF3E01EF3E01EF1F01EF1F01EF0F81EF0
F81EF07C1EF07C1EF03E1EF03E1EF01F1EF01F1EF00F9EF00F9EF007DEF003FEF003FEF0
01FEF001FE7000FE171A7D991E>I<00FF800003FFE0000FFFF8001FC1FC003F007E003E
003E007E003F007C001F00FC001F80FC001F80FC001F80FC001F80FC001F80FC001F80FC
001F80FC001F80FC001F80FC001F807E003F007E003F007F007F003F007E001FC1FC000F
FFF80007FFF00000FF8000191A7E991E>I<7FFE00FFFF80FFFFC0FC0FE0FC03E0FC03F0
FC03F0FC03F0FC03F0FC03F0FC03F0FC03E0FC0FE0FFFFC0FFFF80FFFE00FC0000FC0000
FC0000FC0000FC0000FC0000FC0000FC0000FC00007C0000141A7D991A>I<7FFE00FFFF
80FFFFC0FC07E0FC03F0FC03F0FC03F0FC03F0FC03F0FC03F0FC07E0FFFFC0FFFF80FFFE
00FC7E00FC3F00FC3F00FC1F80FC1F80FC0FC0FC0FC0FC07E0FC07E0FC03F0FC03F07C01
F0141A7D991A>82 D<07F8001FFE003FFF007FFF007C0F00F80200F80000F80000FC0000
FF80007FF8007FFC003FFF000FFF0007FF80007FC0000FC00007C00007C04007C0F007C0
FC0F80FFFF807FFF001FFE0007F800121A7E9917>I<7FFFFFFFFFFFFFFFFFFFFFFF007E
00007E00007E00007E00007E00007E00007E00007E00007E00007E00007E00007E00007E
00007E00007E00007E00007E00007E00007E00007E00007E00003E00181A7F991B>I<7C
007CFC007CFC007CFC007CFC007CFC007CFC007CFC007CFC007CFC007CFC007CFC007CFC
007CFC007CFC007CFC007CFC007CFC007CFC007CFC007C7C00787E00F83F01F01FFFE00F
FFC001FF00161A7D991D>I<F000F80070F801FC00F0F801FC00F07C01FC00E07C03FE01
E07C03BE01E07C039E01E03E039E03C03E079F03C03E079F03C03E070F03C01F0F0F0780
1F0F0F87801F0F0F87800F0E0787000F8E078F000F9E07CF000F9C07CF00079C03CE0007
9C03CE0007DC03DE0007F803FE0003F801FC0003F801FC0003F801FC0001F000F800241A
7F9927>87 D<0FF03FFC3FFE381F201F001F00FF0FFF3F1F7C1FF81FF81FF81FFC7F7FFF
3FDF1F1F10117F9014>97 D<780000F80000F80000F80000F80000F80000F80000F80000
F80000F8F800FBFE00FFFE00FC1F00F81F80F80F80F80F80F80F80F80F80F80F80F80F80
F80F80F81F00FC3F00FFFE00FBFC0079F000111A7E9915>I<07F81FFE3FFE7C0E7C00F8
00F800F800F800F800F800F8007C027C0E3FFE1FFE07F80F117F9012>I<000F80000F80
000F80000F80000F80000F80000F80000F80000F800FCF801FFF803FFF807E1F807C0F80
F80F80F80F80F80F80F80F80F80F80F80F80F80F807C0F807C1F803FFF801FEF800FCF80
111A7F9915>I<07F01FFC3FFE7C1E780FF80FF80FFFFFFFFFF800F800F80078007C033F
FF1FFF03FC10117F9013>I<01FC07FC0FFC1F041F001F001F001F001F007FE0FFE0FFE0
1F001F001F001F001F001F001F001F001F001F001F001F001F000F000E1A80990D>I<0F
E1C03FFFC07FFDC07C7C00F83E00F83E00F83E00F83E00F83E007C7C007FFC003FF8006F
E0006000007FFC007FFF003FFF807FFFC0F007C0F003C0F003C0F807C07FFF803FFF000F
FC0012197F9015>I<7800F800F800F800F800F800F800F800F800F8FCF9FEFBFFFE1FFC
1FF81FF81FF81FF81FF81FF81FF81FF81FF81FF81FF81F781F101A7E9915>I<7CFCFCFC
FCFC000000003C7C7C7C7C7C7C7C7C7C7C7C7C7C7C7C3C061B7F9A0A>I<7000F000F000
F000F000F000F000F000F000F07CF0F8F1F8F3F0F7E0FFC0FF80FF80FF80FFC0FBE0F1E0
F1F0F0F8F07CF03C703C0E1A7D9914>107 D<78F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8F8
F8F8F8F8F8F8F8F878051A7E990A>I<78FC1F80F9FE3FC0FBFF7FE0FE1FC3E0FC1F83E0
F81F03E0F81F03E0F81F03E0F81F03E0F81F03E0F81F03E0F81F03E0F81F03E0F81F03E0
F81F03E0F81F03E0780F01E01B117E9020>I<78FCF9FEFBFFFE1FFC1FF81FF81FF81FF8
1FF81FF81FF81FF81FF81FF81FF81F781F10117E9015>I<07F8001FFE003FFF007E1F80
7C0F80F807C0F807C0F807C0F807C0F807C0F807C0F807C07C0F807E1F803FFF001FFE00
07F80012117F9015>I<78F800FBFE00FFFE00FC3F00F81F80F80F80F80F80F80F80F80F
80F80F80F80F80F80F80F81F00FC3F00FFFE00FBFC00F9F000F80000F80000F80000F800
00F80000F8000078000011187E9015>I<78C0FBC0FFC0FFC0FE00FC00F800F800F800F8
00F800F800F800F800F800F80078000A117E900E>114 D<1FC03FF07FF0F070F000F000
FF007FE03FF01FF003F80078C078F078FFF07FE01FC00D117F9010>I<1E003E003E003E
003E007FE0FFE0FFE03E003E003E003E003E003E003E003E003E003E003E203FF01FF00F
C00C167F950F>I<781FF81FF81FF81FF81FF81FF81FF81FF81FF81FF81FF81FF81FF87F
FFFF7F9F3F1F10117E9015>I<E007F00FF00F781E781E781E3C3C3C3C3C3C1E781E781E
780FF00FF00FF007E007E010117F9013>I<E03E0380F07F0780F07F0780F07F078078F7
0F0078E78F0078E78F0078E78F003CE39E003DC3DE003DC3DE003DC3DE001FC1DC001FC1
FC001F81FC001F81FC000F00F80019117F901C>I<F00EF81E7C3C3E781EF80FF007E007
C003C007E00FF01E701E783C3C781EF81FF00F10117F9013>I<F007F80F780F781E3C1E
3C1E3E3C1E3C1E3C0F380F78077007F003F003E001E001E001C001C003C08780FF80FF00
FC0010187F9013>I<3FFC7FFC7FFC00F801F001F003E007C007800F801F003E003E007C
00FFFCFFFCFFFC0E117F9012>I E /Fm 78[17 1[18 18 51[15
17 17 24 17 17 9 13 11 17 17 17 17 26 9 17 9 9 17 17
11 15 17 15 17 15 3[11 1[11 20 24 24 31 24 24 20 18 22
24 18 24 24 30 20 24 13 11 24 24 18 20 24 22 22 24 31
4[9 9 17 17 17 17 17 17 17 17 17 17 9 8 11 8 2[11 11
40[{}76 33.333332 /Times-Roman rf /Fn 133[20 3[23 25
15 18 20 1[25 23 25 38 13 2[13 25 2[20 25 20 1[23 14[33
1[28 2[43 2[23 1[36 2[30 33 33 1[33 18[11 15 45[{}28
45.833332 /Times-Bold rf /Fo 136[42 2[19 23 26 2[29 32
48 1[32 1[16 32 29 19 26 1[26 1[29 9[58 3[32 2[36 1[42
5[45 26[19 45[{}21 58.333336 /Times-Bold rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 276 118 a Fo(High-P)o(erf)o(ormance)15 b(Sorting)g(on)g(Netw)o
(orks)g(of)g(W)l(orkstations)125 230 y Fn(Andr)o(ea)e(C.)f
(Arpaci-Dusseau)204 287 y Fm(Computer)c(Science)f(Di)o(vision)161
343 y(Uni)o(versity)g(of)h(California,)g(Berkeley)218
400 y(dusseau@cs.berk)o(ele)o(y)n(.edu)758 230 y Fn(Remzi)k(H.)f
(Arpaci-Dusseau)828 287 y Fm(Computer)c(Science)g(Di)o(vision)784
343 y(Uni)o(versity)g(of)h(California,)g(Berkeley)856
400 y(remzi@cs.berkeley)m(.edu)1446 230 y Fn(Da)o(vid)j(E.)h(Culler)
1415 287 y Fm(Computer)7 b(Science)h(Di)o(vision)1372
343 y(Uni)o(versity)f(of)h(California,)g(Berkeley)1443
400 y(culler@cs.berkeley)n(.edu)455 479 y Fn(J)o(oseph)13
b(M.)f(Hellerstein)484 535 y Fm(Computer)7 b(Science)h(Di)o(vision)441
592 y(Uni)o(versity)f(of)h(California,)g(Berkeley)525
648 y(jmh@cs.berkeley)m(.edu)1098 479 y Fn(Da)o(vid)j(A.)g(Patterson)
1099 535 y Fm(Computer)d(Science)f(Di)o(vision)1056 592
y(Uni)o(versity)g(of)h(California,)g(Berkeley)1105 648
y(patterson@cs.berke)o(ley)m(.edu)0 801 y Fl(Abstract)0
881 y Fk(W)m(e)i(report)g(the)f(performance)g(of)h(NO)o(W)n(-Sort,)g(a)
g(collection)f(of)h(sort-)0 923 y(ing)j(implementations)g(on)g(a)g
(Network)g(of)g(W)m(orkstations)g(\(NO)o(W\).)0 964 y(W)m(e)d(\256nd)e
(that)i(parallel)g(sorting)g(on)f(a)g(NO)o(W)h(is)f(competiti)o(v)o(e)h
(to)g(sort-)0 1006 y(ing)k(on)f(the)h(lar)o(ge-scale)f(SMPs)g(that)h
(ha)o(v)o(e)g(traditionally)g(held)g(the)0 1047 y(performance)e
(records.)23 b(On)12 b(a)g(64-node)g(cluster)o(,)h(we)f(sort)h(6.0)f
(GB)0 1089 y(in)f(just)g(under)f(one)f(minute,)j(while)e(a)h(32-node)e
(cluster)i(\256nishes)e(the)0 1130 y(Datamation)g(benchmark)e(in)i
(2.41)g(seconds.)56 1172 y(Our)k(implementations)e(can)h(be)g(applied)f
(to)i(a)f(v)o(ariety)h(of)g(disk,)0 1213 y(memory)n(,)j(and)f
(processor)e(con\256gurations;)j(we)f(highlight)h(salient)0
1255 y(issues)c(for)h(tuning)g(each)f(component)f(of)j(the)f(system.)24
b(W)m(e)14 b(e)o(v)o(alu-)0 1296 y(ate)9 b(the)h(use)f(of)h(commodity)f
(operating)g(systems)f(and)h(hardware)g(for)0 1338 y(parallel)j
(sorting.)23 b(W)m(e)12 b(\256nd)g(e)o(xisting)g(OS)g(primiti)o(v)o(es)
i(for)f(memory)0 1379 y(management)8 b(and)g(\256le)i(access)d
(adequate.)13 b(Due)8 b(to)i(aggre)o(gate)e(com-)0 1421
y(munication)k(and)g(disk)g(bandwidth)f(requirements,)i(the)g
(bottleneck)0 1462 y(of)c(our)h(system)e(is)h(the)g(workstation)f(I/O)j
(b)o(us.)0 1563 y Fl(1)41 b(Intro)q(duction)0 1643 y
Fk(The)12 b(past)h(fe)o(w)g(years)f(ha)o(v)o(e)h(seen)e(dramatic)i
(impro)o(v)o(ements)g(in)h(the)0 1684 y(speed)f(of)j(sorting)f
(algorithms,)i(lar)o(gely)e(due)f(to)i(increased)d(atten-)0
1726 y(tion)j(to)f(issues)f(of)i(computer)e(architecture.)32
b(Ho)o(we)o(v)o(er)o(,)17 b(the)e(best)0 1767 y(sorting)g(results)f(to)
h(date)f(ha)o(v)o(e)g(been)g(produced)e(by)j(industrial)g(re-)0
1809 y(searchers)g(working)h(on)g(e)o(xpensi)o(v)o(e,)h(well-endo)o
(wed)e(v)o(ersions)h(of)0 1850 y(shared-memory)9 b(parallel)i
(computers)e(\(SMPs\))i(produced)e(by)h(their)0 1892
y(parent)g(companies)e([26,)j(30)o(].)17 b(In)11 b(this)f(paper)g(we)g
(describe)f(ho)o(w)h(we)0 1933 y(achie)o(v)o(ed)c(ne)o(w)i(records)e
(in)j(sorting)e(performance)g(using)g(a)h(relati)o(v)o(ely)0
1975 y(modest)14 b("shared-nothing")g(network)g(of)h(general-purpose)e
(UNIX)0 2016 y(workstations.)f(W)m(e)d(set)g(a)f(ne)o(w)h(MinuteSort)g
(record)f(of)i(6.0)e(GB)h(\()p Fj(i.e)o(.)p Fk(,)0 2058
y(6)f(x)f(2)72 2042 y Fi(30)107 2058 y Fk(bytes\))g(on)h(a)f(64-node)g
(cluster)g(of)h(UltraSP)m(ARCs,)g(and)f(a)h(ne)o(w)0
2099 y(Datamation)j(Benchmark)f(record)g(of)i(2.41)f(seconds)e(on)i(a)g
(32-node)0 2141 y(cluster)n(.)56 2182 y(Our)g(use)e(of)i(a)f(Network)g
(of)h(W)m(orkstations)f(\(NO)o(W\))h(for)g(sorting)0
2224 y(has)e(a)h(number)g(of)g(bene\256ts.)15 b(First,)d(NO)o(Ws)d(pro)
o(vide)h(a)g(high-de)o(gree)0 2265 y(of)j Fj(performance)d(isolation)p
Fk(:)21 b(that)13 b(is,)i(the)o(y)e(allo)o(w)g(analysis)e(of)i(be-)0
2307 y(ha)o(vior)c(on)g(a)g(node-by-node,)e(factor)o(-by-factor)i
(basis.)k(By)c(contrast,)0 2349 y(in)g(an)f(SMP)l(,)h(resources)e(are)i
(pooled)e(together)o(,)i(and)f(hence)f(it)j(is)e(more)0
2390 y(dif)o(\256cult)g(to)g(achie)o(v)o(e)f(an)g(equi)o(v)o(alent)g
(\256ne-grained)f(analysis.)12 b(F)o(or)c(e)o(x-)1025
801 y(ample,)k(by)g(tuning)g(single-processor)e(performance)h
(carefully)n(,)h(we)1025 842 y(are)i(able)h(to)g(deli)o(v)o(er)g
(roughly)f(431)h(MB/s)g(of)g(disk)f(bandwidth)g(to)1025
884 y(the)c(64-processor)f(sorting)i(application.)17
b(Second,)9 b(NO)o(Ws)h(pro)o(vide)1025 925 y Fj(incr)o(emental)f
(scalability)h Fk(of)h(hardware)e(resources.)16 b(Because)8
b(addi-)1025 967 y(tional)g(workstations)e(can)h(always)f(be)h(added)f
(to)i(a)g(NO)o(W)m(,)f(well-tuned)1025 1009 y(programs)g(can)h(be)f
(easily)h(scaled)e(to)j(lar)o(ge)f(con\256gurations.)k(By)c(con-)1025
1050 y(trast,)k(most)f(SMPs)f(ha)o(v)o(e)h(a)f(hard)h(limit)i(on)d
(scalability)h(imposed)f(by)1025 1092 y(the)g(size)h(of)g(their)g(box,)
g(and)f(are)h(more)f(e)o(xpensi)o(v)o(e)g(and)g(comple)o(x)g(to)1025
1133 y(scale)e(within)i(that)f(limit.)1081 1175 y(In)h(this)h(paper)e
(we)h(note)g(some)g(lessons)e(for)j(the)f(NO)o(W)h(research)1025
1216 y(community)n(,)g(which)g(is)g(made)g(up)g(lar)o(gely)g(of)h
(researchers)d(in)j(oper)o(-)1025 1258 y(ating)h(systems)f(and)g
(computer)g(architecture)h([2,)h(3,)f(5,)h(9)o(,)g(22].)26
b(In)1025 1299 y(principle)11 b(NO)o(Ws)f(are)h(similar)g(to)h
("shared-nothing")d(architectures)1025 1341 y(for)16
b(databases)d([4,)j(11)o(,)g(14,)g(18)o(,)g(20)o(,)g(29,)g(31)o(,)g
(32])g(b)o(ut)f(the)o(y)h(ha)o(v)o(e)1025 1382 y(typically)10
b(been)g(analyzed)e(and)i(tuned)g(in)h(the)g(conte)o(xt)f(of)h
(compute-)1025 1424 y(intensi)o(v)o(e)g(applications.)22
b(W)m(e)12 b(demonstrate)f(that)h(NO)o(Ws)g(can)f(be)g(a)1025
1465 y(state-of-the-art)c(platform)g(for)g(data-intensi)o(v)o(e)e
(applications)g(as)g(well.)1081 1507 y(The)j(ease)f(of)j(assembling)d
(dif)o(ferent)i(con\256gurations)e(in)i(a)g(NO)o(W)1025
1548 y(moti)o(v)o(ated)k(us)f(to)h(in)o(v)o(estigate)f(a)h(family)h(of)
f(solutions)f(for)i(sorting,)1025 1590 y(rather)f(than)f(a)g(single)g
(algorithm)h(tuned)f(to)h(a)f(particular)h(machine.)1025
1631 y(Our)f(in)o(v)o(estigation)f(e)o(xposes)f(a)h(range)h(of)g
(options)f(for)i(o)o(v)o(erlapping)1025 1673 y(steps)6
b(of)g(the)g(sorting)g(algorithm)g(and)g(their)g(implications.)11
b(In)6 b(particu-)1025 1714 y(lar)o(,)i(we)e(de)o(v)o(elop)g(tools)h
(to)g(characterize)f(e)o(xisting)h(hardware,)g(e)o(xplore)1025
1756 y(the)i(relationship)h(of)g(parallelism)f(and)g(bandwidth)g
(constraints,)g(and)1025 1797 y(characterize)f(a)h(number)g(of)h
(tradeof)o(fs)f(between)g(pipelining)g(and)f(as-)1025
1839 y(sociated)g(costs)g(in)h(memory)g(utilization.)1081
1880 y(An)f(additional)g(contrib)o(ution)h(of)f(this)h(work)f(is)g(to)h
(e)o(v)o(aluate)e(com-)1025 1922 y(modity)12 b(software)f(and)h
(hardware)e(for)j(sorting)f(and,)g(by)g(e)o(xtension,)1025
1963 y(for)g(other)g(database)d(applications.)20 b(W)m(e)12
b(\256nd)f(that)h(threads)f(and)f(the)1025 2005 y(current)j(interface)g
(for)h(memory)e(management)g(in)h(modern)g(UNIX)1025
2046 y(operating)e(systems)g(do)g(indeed)g(help)g(in)i(de)o(v)o
(eloping)d(ef)o(\256cient)i(im-)1025 2088 y(plementations;)f(this)g(is)
g(a)g(cheering)e(update)h(on)g(some)g(of)h(the)g(well-)1025
2129 y(kno)o(wn)d(criticisms)i(of)f(earlier)h(v)o(ersions)e(of)i(UNIX)f
(for)h(database)d(ap-)1025 2171 y(plications)i([28].)17
b(On)9 b(the)h(other)g(hand,)g(we)f(demonstrate)g(that)h(some)1025
2212 y(important)h(facilities)h(are)e(missing)h(in)g(modern)f
(workstations,)h(such)1025 2254 y(as)d(handling)g(data)g(striped)h
(across)f(heterogeneous)e(disks)i(and)g(deter)o(-)1025
2295 y(mining)e(a)o(v)o(ailable)g(memory)n(.)11 b(Re)o(garding)6
b(machine)g(architecture,)t(we)1025 2337 y(\256nd)j(that)h(our)g
(clustered)f(UltraSP)m(ARC)g(I)i(workstations)d(are)i(limited)1025
2378 y(by)g(insuf)o(\256cient)h(I/O)h(b)o(us)e(bandwidth,)h(which,)g
(if)h(left)g(unimpro)o(v)o(ed,)1025 2420 y(would)6 b(pre)o(v)o(ent)g
(data-intensi)o(v)o(e)g(applications)f(from)j(enjoying)d(future)1025
2461 y(gains)j(in)h(CPU,)h(memory)n(,)e(network,)h(or)h(disk)e(speed.)
1081 2503 y(The)f(or)o(ganization)g(of)i(this)f(paper)f(matches)g(the)h
(de)o(v)o(elopment)f(of)1025 2544 y(our)12 b(sorting)h
(implementations.)23 b(After)14 b(brie\257y)e(re)o(vie)o(wing)g
(related)1025 2586 y(work)d(in)g(Section)f(2)h(and)f(our)i(e)o
(xperimental)e(platform)i(in)g(Section)e(3,)1025 2627
y(we)i(co)o(v)o(er)g(our)f(four)i(v)o(ersions)e(of)h(NO)o(W)n(-Sort)h
(in)f(the)g(ne)o(xt)f(four)i(sec-)1025 2669 y(tions.)i(Figure)7
b(1)g(depicts)f(the)h(deri)o(v)o(ation)g(of)g(our)h(sorting)f
(algorithms,)p eop
%%Page: 2 2
2 1 bop 163 4 a
 9472573 8525313 0 0 15327150 13814169 startTexFig
 163 4 a
%%BeginDocument: Figs/algs.eps
%Magnification: 1.00
/$F2psDict 200 dict def
$F2psDict begin
$F2psDict /mtrx matrix put
/col-1 {0 setgray} bind def
/col0 {0.000 0.000 0.000 srgb} bind def
/col1 {0.000 0.000 1.000 srgb} bind def
/col2 {0.000 1.000 0.000 srgb} bind def
/col3 {0.000 1.000 1.000 srgb} bind def
/col4 {1.000 0.000 0.000 srgb} bind def
/col5 {1.000 0.000 1.000 srgb} bind def
/col6 {1.000 1.000 0.000 srgb} bind def
/col7 {1.000 1.000 1.000 srgb} bind def
/col8 {0.000 0.000 0.560 srgb} bind def
/col9 {0.000 0.000 0.690 srgb} bind def
/col10 {0.000 0.000 0.820 srgb} bind def
/col11 {0.530 0.810 1.000 srgb} bind def
/col12 {0.000 0.560 0.000 srgb} bind def
/col13 {0.000 0.690 0.000 srgb} bind def
/col14 {0.000 0.820 0.000 srgb} bind def
/col15 {0.000 0.560 0.560 srgb} bind def
/col16 {0.000 0.690 0.690 srgb} bind def
/col17 {0.000 0.820 0.820 srgb} bind def
/col18 {0.560 0.000 0.000 srgb} bind def
/col19 {0.690 0.000 0.000 srgb} bind def
/col20 {0.820 0.000 0.000 srgb} bind def
/col21 {0.560 0.000 0.560 srgb} bind def
/col22 {0.690 0.000 0.690 srgb} bind def
/col23 {0.820 0.000 0.820 srgb} bind def
/col24 {0.500 0.190 0.000 srgb} bind def
/col25 {0.630 0.250 0.000 srgb} bind def
/col26 {0.750 0.380 0.000 srgb} bind def
/col27 {1.000 0.500 0.500 srgb} bind def
/col28 {1.000 0.630 0.630 srgb} bind def
/col29 {1.000 0.750 0.750 srgb} bind def
/col30 {1.000 0.880 0.880 srgb} bind def
/col31 {1.000 0.840 0.000 srgb} bind def

end
save
-42.0 259.0 translate
1 -1 scale

/cp {closepath} bind def
/ef {eofill} bind def
/gr {grestore} bind def
/gs {gsave} bind def
/sa {save} bind def
/rs {restore} bind def
/l {lineto} bind def
/m {moveto} bind def
/rm {rmoveto} bind def
/n {newpath} bind def
/s {stroke} bind def
/sh {show} bind def
/slc {setlinecap} bind def
/slj {setlinejoin} bind def
/slw {setlinewidth} bind def
/srgb {setrgbcolor} bind def
/rot {rotate} bind def
/sc {scale} bind def
/sd {setdash} bind def
/ff {findfont} bind def
/sf {setfont} bind def
/scf {scalefont} bind def
/sw {stringwidth} bind def
/tr {translate} bind def
/tnt {dup dup currentrgbcolor
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add
  4 -2 roll dup 1 exch sub 3 -1 roll mul add srgb}
  bind def
/shd {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
  4 -2 roll mul srgb} bind def
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def

$F2psBegin
10 setmiterlimit
n 0 792 m 0 0 l 612 0 l 612 792 l cp clip
 0.06000 0.06000 sc
7.500 slw
% Polyline
gs  clippath
2375 3683 m 2455 3805 l 2333 3725 l 2464 3857 l 2507 3814 l  cp clip
n 1575 2925 m 2475 3825 l gs col-1 s gr gr

% arrowhead
n 2375 3683 m 2455 3805 l 2333 3725 l 2371 3721 l 2375 3683 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
2767 3725 m 2644 3805 l 2725 3683 l 2593 3814 l 2636 3857 l  cp clip
n 3525 2925 m 2625 3825 l gs col-1 s gr gr

% arrowhead
n 2767 3725 m 2644 3805 l 2725 3683 l 2729 3721 l 2767 3725 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
3425 2108 m 3505 2230 l 3383 2150 l 3514 2282 l 3557 2239 l  cp clip
n 2625 1350 m 3525 2250 l gs col-1 s gr gr

% arrowhead
n 3425 2108 m 3505 2230 l 3383 2150 l 3421 2146 l 3425 2108 l  cp gs 0.00 setgray ef gr  col-1 s
% Polyline
gs  clippath
1642 2150 m 1519 2230 l 1600 2108 l 1468 2239 l 1511 2282 l  cp clip
n 2400 1350 m 1500 2250 l gs col-1 s gr gr

% arrowhead
n 1642 2150 m 1519 2230 l 1600 2108 l 1604 2146 l 1642 2150 l  cp gs 0.00 setgray ef gr  col-1 s
/Times-Roman ff 210.00 scf sf
1500 2550 m
gs 1 -1 sc (One-Pass Parallel) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Roman ff 210.00 scf sf
2550 4050 m
gs 1 -1 sc (Two-Pass Parallel) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Roman ff 210.00 scf sf
2550 4275 m
gs 1 -1 sc (\(Section 7\)) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Roman ff 210.00 scf sf
3525 2745 m
gs 1 -1 sc (\(Section 6\)) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Roman ff 210.00 scf sf
2550 1200 m
gs 1 -1 sc (\(Section 4\)) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Roman ff 210.00 scf sf
1500 2775 m
gs 1 -1 sc (\(Section 5\)) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Roman ff 210.00 scf sf
2550 975 m
gs 1 -1 sc (One-Pass Single-Node) dup sw pop 2 div neg 0 rm  col-1 sh gr
/Times-Roman ff 210.00 scf sf
3525 2550 m
gs 1 -1 sc (Two-Pass Single-Node) dup sw pop 2 div neg 0 rm  col-1 sh gr
$F2psEnd
rs
%%EndDocument

 endTexFig
 0 627 a Fk(Figure)9 b(1:)28 b Fh(De)o(velopment)8 b(of)h(Sorting)g
(Algorithm)p Fk(.)14 b Fj(The)9 b(sections)0 668 y(of)j(the)f(paper)f
(follow)i(the)f(same)g(de)o(velopment)f(as)h(the)g(pr)n(ogr)o(ess)o
(ion)0 710 y(of)d(sorting)f(algorithms,)g(fr)n(om)h(the)g(simplest)f
(to)h(our)f(most)g(comple)o(x.)0 834 y Fk(where)14 b(more)h(comple)o(x)
f(v)o(ersions)h(b)o(uild)g(from)g(the)g(simpler)g(ones.)0
875 y(W)m(e)d(will)h(sho)o(w)e(that)h(by)f(\256rst)h(understanding)e
(and)g(tuning)i(applica-)0 917 y(tion)c(performance)e(in)i(simple)g
(con\256gurations,)e(we)h(are)g(able)g(to)h(b)o(uild)0
958 y(highly-scalable)13 b(parallel)h(v)o(ersions)g(with)h(little)h(ef)
o(fort.)30 b(Our)15 b(best)0 1000 y(Datamation)9 b(benchmark)f(time)j
(is)f(gi)o(v)o(en)f(for)i(the)e(one-pass)f(parallel)0
1041 y(v)o(ersion)k(in)h(Section)f(5,)i(and)e(the)g(best)h(MinuteSort)g
(results)f(for)i(the)0 1083 y(two-pass)6 b(parallel)h(sort)h(in)f
(Section)g(7.)13 b(W)m(e)7 b(present)g(our)g(conclusions)0
1124 y(in)i(Section)g(8.)0 1224 y Fl(2)41 b(Related)13
b(W)o(o)o(rk)0 1305 y Fk(The)h(Datamation)f(sorting)i(benchmark)d(was)i
(introduced)f(in)h(1985)0 1346 y(by)e(a)g(group)g(of)h(database)d(e)o
(xperts)i(as)g(a)g(test)h(of)f(a)h(processor')n(s)d(I/O)0
1388 y(subsystem)5 b(and)h(operating)h(system)f([17].)13
b(The)7 b(performance)f(metric)0 1429 y(of)g(this)g(benchmark)g(is)g
(the)g(elapsed)g(time)g(to)g(sort)g(one)g(million)g(records)0
1471 y(from)15 b(disk)f(to)g(disk.)28 b(The)13 b(records)h(be)o(gin)f
(on)h(disk)g(and)f(are)h(each)0 1512 y(100-bytes,)g(where)f(the)h
(\256rst)g(10-bytes)f(are)h(the)g(ke)o(y)n(.)26 b(Thus,)15
b(with)0 1554 y(one)g(million)h(100-byte)f(records,)h(95)f(MB)h(of)g
(data)f(are)g(read)g(and)0 1595 y(written)8 b(from)f(disk.)12
b(The)6 b(elapsed)f(time)i(includes)e(the)i(time)g(to)g(launch)0
1637 y(the)15 b(application,)g(open,)h(create,)g(and)e(close)g(all)h
(\256les,)h(ensure)e(the)0 1678 y(output)e(resides)f(on)h(disk,)g(and)g
(to)g(terminate)h(the)f(program.)22 b(Price-)0 1720 y(performance)15
b(of)h(the)g(hardware)f(and)g(software)g(is)h(computed)f(by)0
1761 y(pro-rating)g(the)f(\256v)o(e-year)g(cost)g(o)o(v)o(er)h(the)f
(time)h(of)f(the)h(sort.)29 b(The)0 1803 y(pre)o(vious)9
b(record-holder)h(on)f(this)h(benchmark)f(was)g(a)g(12)h(processor)0
1844 y(SGI)c(Challenge)f(with)i(96)f(disks)f(and)g(2.25)h(GB)g(of)g
(main)g(memory)g([30])0 1886 y(at)j(3.52)g(seconds;)e(a)h(single)h
(processor)e(IBM)j(RS/6000)e(with)i(8)e(disks)0 1927
y(and)f(256)h(MB)h(of)f(memory)g(has)g(an)f(impressi)o(v)o(e)h(time)h
(of)g(5.1)f(seconds)0 1969 y(and)i(better)h(price/performance,)g(b)o
(ut)g(uses)e(ra)o(w)j(disk,)f(which)f(is)h(not)0 2010
y(allo)o(wed)e(in)g(the)g(benchmark)e([1)q(].)56 2052
y(Recognizing)12 b(that)i(the)g(Datamation)f(benchmark)f(is)j(outdated)
0 2093 y(and)10 b(is)h(more)f(a)h(test)f(of)h(startup)g(and)f(shutdo)o
(wn)f(time)i(than)f(I/O)i(per)o(-)0 2135 y(formance,)e(the)h(authors)f
(of)g(AlphaSort)h(introduced)e(MinuteSort)i(in)0 2176
y(1994)f([26].)21 b(The)10 b(ke)o(y)h(and)f(record)h(speci\256cations)e
(are)i(identical)g(to)0 2218 y(that)e(of)f(Datamation;)h(the)f
(performance)f(metric)i(is)g(no)o(w)f(the)g(amount)0
2259 y(of)g(data)g(that)g(can)f(be)g(sorted)h(in)g(one)f(minute)h(of)g
(elapsed)e(time.)14 b(Price-)0 2301 y(performance)d(is)g(calculated)f
(from)j(the)e(list)i(price)e(of)h(the)g(hardware)0 2342
y(and)f(operating)h(system)f(depreciated)f(o)o(v)o(er)i(three)g(years.)
22 b(The)11 b(SGI)0 2384 y(system)d(was)g(also)g(the)h(pre)o(vious)f
(record-holder)h(on)f(the)h(MinuteSort)0 2425 y(benchmark,)14
b(sorting)g(1.6)h(GB.)f(AlphaSort)g(achie)o(v)o(ed)f(1.1)h(GB)h(on)0
2467 y(only)c(three)g(processors,)f(36)h(disks,)g(and)f(1.25)h(GB)h(of)
f(memory)n(,)h(for)0 2508 y(better)d(price/performance)g([26)o(].)56
2550 y(Ov)o(er)f(the)f(years,)g(numerous)f(authors)h(ha)o(v)o(e)g
(reported)g(the)g(perfor)o(-)0 2591 y(mance)f(of)h(their)h(sorting)f
(algorithms)g(and)f(implementations)g([1,)i(6,)f(7,)0
2633 y(15)o(,)j(16,)f(21,)g(25,)h(26)o(,)g(27)o(,)g(30)o(,)g(35)o(],)h
(and)d(we)h(try)h(to)g(le)o(v)o(erage)e(man)o(y)h(of)0
2675 y(the)f(implementation)g(and)f(algorithmic)h(lessons)e(that)i(the)
o(y)g(describe.)1025 45 y(One)h(dif)o(ference)h(between)e(most)i(of)g
(this)g(work)g(and)f(ours)g(is)h(that)g(we)1025 87 y(pro)o(vide)j
(measurements)f(for)i(a)g(range)e(of)i(system)f(con\256gurations,)1025
128 y(v)o(arying)7 b(the)h(number)f(of)h(processors,)e(the)i(number)f
(of)h(disks)f(per)h(ma-)1025 170 y(chine,)i(and)g(amount)f(of)i(memory)
n(.)17 b(Another)10 b(dif)o(ference)g(is)h(that)f(our)1025
211 y(en)o(vironment)i(is)i(one)e(of)i(the)g(fe)o(w)f(parallel)h
(con\256gurations)e(where)1025 253 y(each)d(node)g(is)h(a)g(complete)g
(system,)g(with)h(its)g(o)o(wn)e(virtual)i(memory)1025
294 y(system,)d(disks,)h(and)f(\256le)h(system.)1025
394 y Fl(3)40 b(Exp)q(erimental)13 b(Environment)1025
474 y(3.1)40 b(Ha)o(rdw)o(a)o(re)1025 541 y Fk(T)m(wo)6
b(dif)o(ferent)i(cluster)e(en)o(vironments)f(form)j(our)f(e)o
(xperimental)g(test-)1025 583 y(bed.)15 b(The)9 b(\256rst)h(consists)e
(of)i(64)g(commodity)f(UltraSP)m(ARC)h(I)g(work-)1025
624 y(stations,)c(each)f(with)i(64)f(MB)h(of)f(memory)g(\(ho)o(we)o(v)o
(er)o(,)h(most)f(measure-)1025 666 y(ments)j(only)h(e)o(xtend)f(to)i
(32)e(nodes)g(due)g(to)i(time)f(constraints\).)16 b(Each)1025
707 y(workstation)g(houses)f(two)h(internal)i(5400)d(RPM)i(Seagate)e
(Ha)o(wk)1025 749 y(disks)c(on)h(a)g(single)f(fast-narro)o(w)h(SCSI)h
(b)o(us.)22 b(Note)11 b(that)i(with)g(only)1025 790 y(two)e(disks)f
(per)h(machine,)g(we)g(can)g(not)g(af)o(ford)h(to)f(dedicate)f(a)h
(spare)1025 832 y(disk)d(for)i(paging)e(acti)o(vity)n(.)p
1059 924 858 2 v 1058 966 2 42 v 1081 954 a(Ultra)i(Enterprise)f(I)h
(Model)f(170)p 1690 966 V 1915 966 V 1058 1007 V 1081
995 a(\(64)g(MB,)h(1)f(5400)f(RPM)h(Disk\))p 1690 1007
V 272 w($15,495)p 1915 1007 V 1059 1009 858 2 v 1058
1051 2 42 v 1081 1038 a(Main)g(Memory)p 1690 1051 V 415
w($16)f(per)i(MB)p 1915 1051 V 1058 1092 V 1081 1080
a(Internal)g(5400)e(RPM)h(Seagate)e(Ha)o(wk)p 1690 1092
V 226 w($925)p 1915 1092 V 1058 1134 V 1081 1121 a(External)i(7200)f
(RPM)h(Seagate)f(Barracuda)p 1690 1134 V 121 w($1,100)p
1915 1134 V 1058 1175 V 1081 1163 a(Enclosure)g(for)i(8)f(External)g
(Disks)p 1690 1175 V 248 w($2,000)p 1915 1175 V 1058
1217 V 1081 1204 a(F)o(ast-W)o(ide)g(SCSI)g(Card)p 1690
1217 V 414 w($750)p 1915 1217 V 1058 1258 V 1081 1246
a(Myrinet)h(4.1-M2F)f(Card)p 1690 1258 V 366 w($1,200)p
1915 1258 V 1058 1300 V 1081 1287 a(Myrinet)h(M2F-SW8)f(Switch)p
1690 1300 V 307 w($2,400)p 1915 1300 V 1059 1301 858
2 v 1058 1343 2 42 v 1081 1330 a(8-node)f(System)p 1690
1343 V 1915 1343 V 1058 1384 V 1081 1372 a Fj(\(8)i(x)f(128)f(MB,)i(8)f
(x)g(2)g(5400)f(RPM)h(Disks,)p 1690 1384 V 1915 1384
V 1058 1426 V 1081 1413 a(8)g(x)g(2)g(7200)f(RPM)h(Disks,)g(8)g(SCSI)g
(Car)o(ds,)p 1690 1426 V 1915 1426 V 1058 1467 V 1081
1455 a(4)g(Disk)g(Enclosur)o(es,)d(8)j(Myrinet)g(Car)o(ds,)p
1690 1467 V 1915 1467 V 1058 1509 V 1081 1496 a(1)g(Switc)o(h\))p
1690 1509 V 534 w Fk($183,152)p 1915 1509 V 1059 1511
858 2 v 1058 1552 2 42 v 1081 1540 a(64-node)f(System)p
1690 1552 V 1915 1552 V 1058 1594 V 1081 1581 a Fj(\(64)h(x)g(64)g(MB,)
h(64)e(x)h(2)g(5400)f(RPM)h(Disks,)p 1690 1594 V 1915
1594 V 1058 1635 V 1081 1623 a(64)g(Myrinet)f(Car)o(ds,)g(26)h(Switc)o
(hes\))p 1690 1635 V 172 w Fk($1,190,080)p 1915 1635
V 1059 1637 858 2 v 1026 1708 a(T)m(able)f(1:)27 b Fh(Hard)o(war)o(e)8
b(List)i(Prices.)i Fj(October)c(1996)g(list)i(prices.)1081
1832 y Fk(The)d(second)f(cluster)h(connects)f(eight)i(more)f
(fully-equipped)g(Ul-)1025 1873 y(traSP)m(ARC)j(I)h(Model)f(170)g
(workstations.)16 b(Each)9 b(contains)g(128)h(MB)1025
1915 y(of)i(main)f(memory)g(and)g(an)g(e)o(xtra)h(fast-wide)f(SCSI)h
(card,)g(with)g(two)1025 1956 y(7200)e(RPM)h(Seagate)e(Barracuda)h(e)o
(xternal)h(disks)g(attached.)18 b(Thus,)1025 1998 y(while)9
b(this)f(cluster)g(only)h(contains)e(one)g(eighth)h(of)h(the)g
(processors)d(in)1025 2039 y(the)k(other)h(con\256guration,)f(it)h
(contains)f(one)g(quarter)g(of)h(the)g(number)1025 2081
y(of)e(disks)f(and)h(amount)f(of)i(memory)n(.)1081 2122
y(The)h(main)h(lesson)f(taught)g(by)h(the)g(authors)f(of)h(AlphaSort)g
([26])1025 2164 y(is)g(that)g(e)o(v)o(en)f(lar)o(ge)i(sorting)f
(problems)f(should)g(be)g(performed)h(in)g(a)1025 2205
y(single)6 b(pass,)h(since)f(only)g(half)h(the)g(amount)g(of)g(disk)f
(I/O)i(is)f(performed)1025 2247 y(and)g(the)g(price)h(of)g(memory)g(is)
g(relati)o(v)o(ely)h(lo)o(w)n(.)k(All)8 b(pre)o(vious)f(record-)1025
2288 y(holders)k(on)h(both)g(the)g(Datamation)g(and)f(MinuteSort)h
(benchmarks)1025 2330 y(were)d(able)g(to)h(sort)g(the)f(records)g(in)g
(a)h(single-pass.)i(Ho)o(we)o(v)o(er)o(,)e(as)e(we)1025
2372 y(shall)k(see,)h(our)g(NO)o(W)g(con\256guration)e(is)i
(memory-starv)o(ed,)g(so)f(we)1025 2413 y(perform)d(the)g(MinuteSort)h
(benchmark)d(in)j(two)f(passes.)1081 2455 y(In)f(addition)g(to)g(the)g
(usual)f(connection)g(to)h(the)g(outside)f(world)h(via)1025
2496 y(10)g(Mb/s)g(Ethernet,)g(e)o(v)o(ery)g(workstation)f(contains)g
(a)h(single)g(Myrinet)1025 2538 y(network)k(card.)24
b(Myrinet)14 b(is)f(a)f(switch-based,)h(high-speed,)f(local-)1025
2579 y(area)7 b(network,)g(with)h(links)f(capable)f(of)i
(bi-directional)g(transfer)f(rates)1025 2621 y(of)12
b(160)f(MB/s)h([10)o(].)22 b(Each)11 b(Myrinet)h(switch)f(has)g(eight)h
(ports,)g(and)1025 2662 y(the)g(64-node)f(cluster)h(is)h(constructed)e
(by)h(connecting)e(26)i(of)h(these)1025 2704 y(switches)8
b(in)h(a)g(3-ary)g(tree.)p eop
%%Page: 3 3
3 2 bop 0 45 a Fl(3.2)41 b(Soft)o(w)o(a)o(re)0 112 y
Fk(Each)6 b(machine)g(in)g(our)g(cluster)g(runs)f(Solaris)h(2.5.1,)t(a)
g(modern,)g(multi-)0 153 y(threaded)h(v)o(ersion)h(of)h(UNIX)g([24].)14
b(The)8 b(disparate)f(resources)g(in)i(the)0 195 y(cluster)15
b(are)g(uni\256ed)f(under)h(GLUnix)o(,)i(the)f(prototype)e(distrib)o
(uted)0 236 y(operating)d(system)g(for)h(NO)o(W)g([19)o(].)22
b(GLUnix)11 b(monitors)h(nodes)e(in)0 278 y(the)j(system)g(for)h
(load-balancing,)f(can)f(co-schedule)f(parallel)j(pro-)0
319 y(grams,)8 b(and)e(pro)o(vides)h(full)h(job)f(control)h(and)e(I/O)j
(redirection.)k(In)7 b(our)0 361 y(e)o(xperiments,)k(we)g(primarily)h
(use)e(GLUnix)h(as)f(a)h(parallel)h(program)0 402 y(launcher)n(.)56
444 y(The)i(parallel)h(v)o(ersions)f(of)h(NO)o(W)n(-Sort)h(are)e
(written)i(in)f(Split-)0 485 y(C)c([12].)18 b(Split-C)12
b(is)f(a)f(parallel)h(e)o(xtension)f(to)h(C)g(that)f(supports)g(ef)o
(\256-)0 527 y(cient)h(access)e(to)i(a)g(global)g(address)e(space)h(on)
g(distrib)o(uted)i(memory)0 568 y(machines.)56 610 y(Split-C)c(is)e(b)o
(uilt)i(on)e(top)g(of)h(Acti)o(v)o(e)g(Messages)t([33)o(],)h(a)f
(communi-)0 651 y(cation)h(layer)h(designed)e(to)j(take)e(adv)o(antage)
e(of)k(the)e(lo)o(w)i(latenc)o(y)e(and)0 693 y(high)13
b(bandwidth)f(of)i(switch-based)e(networks.)25 b(An)14
b(Acti)o(v)o(e)f(Mes-)0 734 y(sage)7 b(is)i(essentially)f(a)g
(restricted,)i(lightweight)f(v)o(ersion)f(of)h(a)f(remote)0
776 y(procedure)i(call.)22 b(When)11 b(a)h(process)e(sends)g(an)h(Acti)
o(v)o(e)h(Message,)e(it)0 818 y(speci\256es)e(a)j(handler)e(to)i(be)f
(e)o(x)o(ecuted)g(on)g(the)g(remote)g(node.)17 b(When)0
859 y(the)10 b(message)e(is)j(recei)o(v)o(ed,)f(the)g(handler)g(e)o(x)o
(ecutes)f(atomically)h(with)0 901 y(respect)i(to)g(other)h(message)d
(arri)o(v)o(als.)25 b(Acti)o(v)o(e)12 b(Messages)e(o)o(v)o(er)k(the)0
942 y(Myrinet)i(has)f(the)h(follo)o(wing)g(performance)f
(characteristics:)26 b(the)0 984 y(round-trip)16 b(latenc)o(y)e(is)i
(roughly)e(20)h Fg(\026)p Fk(s,)i(and)d(the)h(layer)g(can)f(sus-)0
1025 y(tain)g(a)f(uni-directional)h(bandwidth)f(\(one)g(node)g
(sending,)g(another)0 1067 y(recei)o(ving\))c(of)g(35)g(MB/s)g([13].)0
1163 y Fl(3.3)41 b(Input)14 b(Key)f(Cha)o(racterization)0
1229 y Fk(In)f(this)g(study)n(,)g(we)f(make)g(a)h(number)f(of)h
(simplifying)g(assumptions)0 1271 y(about)e(the)h(distrib)o(ution)h(of)
f(ke)o(y)f(v)o(alues)g(and)g(the)h(layout)g(of)g(records)0
1312 y(across)g(processors)g(and)h(disks,)h(allo)o(wing)g(us)f(to)h
(focus)f(on)g(the)g(OS)0 1354 y(and)h(architectural)g(issues)f(in)o(v)o
(olv)o(ed)h(in)h(sorting.)27 b(Clearly)n(,)15 b(imple-)0
1396 y(mentations)c(used)f(for)i(sorting)f(data)g(sets)g(in)h(the)f
(real)h(world)f(would)0 1437 y(need)d(to)h(be)g(more)g(rob)o(ust.)56
1479 y(F)o(ollo)o(wing)h(the)f(precedent)e(set)i(by)g(other)g
(researchers,)f(we)h(mea-)0 1520 y(sure)k(the)f(performance)g(of)i(NO)o
(W)n(-Sort)f(only)g(on)g(ke)o(y)f(v)o(alues)g(with)0
1562 y(uniform)i(distrib)o(utions.)27 b(This)13 b(assumption)f(has)g
(implications)i(for)0 1603 y(our)d(method)g(of)g(distrib)o(uting)h(ke)o
(ys)e(into)h(local)g(b)o(uckets)f(and)g(across)0 1645
y(processing)d(nodes.)14 b(W)o(ith)9 b(a)h(non-uniform)f(distrib)o
(ution,)i(we)e(would)0 1686 y(need)17 b(to)h(modify)h(our)f
(implementations)f(to)i(perform)f(a)g(sample)0 1728 y(sort)12
b([8,)h(15)o(].)23 b(By)11 b(adding)g(an)h(early)f(phase)g(where)g(we)h
(sample)f(the)0 1769 y(data)c(to)g(determine)g(the)g(range)g(of)g(ke)o
(ys)f(tar)o(geted)h(for)h(each)e(processor)o(,)0 1811
y(we)i(could)g(ensure)g(that)h(each)e(processor)g(recei)o(v)o(es)h(a)g
(similar)i(amount)0 1852 y(of)f(records;)g(we)g(plan)g(on)f(in)o(v)o
(estigating)h(this)g(further)h(in)f(the)g(future.)56
1894 y(W)m(e)h(also)f(assume)f(that)i(the)g(initial)h(number)e(of)h
(records)f(on)h(each)0 1935 y(workstation)f(is)g(equal,)g(although)f
(the)h(performance)f(of)i(our)f(parallel)0 1977 y(implementations)j
(would)h(not)g(be)f(greatly)i(af)o(fected)e(by)h(small)g(im-)0
2018 y(balances.)h(If)e(records)d(are)h(located)f(on)h(only)f(a)h
(subset)f(of)h(the)g(work-)0 2060 y(stations,)17 b(then)e(our)h
(current)f(read)g(phase)f(could)h(only)g(utilize)i(the)0
2101 y(processors)12 b(attached)g(to)j(those)d(disks,)j(with)f(se)o(v)o
(ere)f(performance)0 2143 y(implications.)i(Restructuring)10
b(our)g(algorithms)f(to)h(better)h(deal)e(with)0 2184
y(this)g(situation)g(is)h(unfortunately)e(be)o(yond)g(the)h(scope)e(of)
j(this)f(paper)n(.)0 2285 y Fl(4)41 b(One-P)o(ass)12
b(Single-No)q(de)f(So)o(rting)0 2365 y Fk(In)d(this)f(section)f(we)h
(describe)f(the)h(basic)g(one-pass)e(v)o(ersion)i(of)g(NO)o(W)n(-)0
2406 y(Sort)j(for)h(a)e(single)h(workstation,)f Fj(i.e)o(.)p
Fk(,)j(when)d(all)h(records)f(\256t)h(in)g(main)0 2448
y(memory)g(after)g(being)f(read)g(from)i(disk.)k(W)m(e)10
b(discuss)e(the)h(impact)h(of)0 2489 y(dif)o(ferent)k(interfaces)f(for)
h(performing)f(disk)g(I/O)i(and)d(b)o(uf)o(fer)i(man-)0
2531 y(agement,)d(and)f(the)h(in-memory)g(sorting)g(algorithm.)20
b(As)10 b(indicated)0 2572 y(in)h(Figure)g(1,)h(the)f(one-pass)e
(single-node)h(v)o(ersion)h(forms)g(the)g(basis)0 2614
y(of)i(all)g(of)g(our)g(sorting)f(algorithms.)25 b(Each)11
b(of)i(the)g(components)d(of)0 2655 y(the)h(single-node)e(sort)i(is)g
(used)e(again)h(in)h(the)f(other)h(sorts,)g(and)f(so)g(is)0
2697 y(worth)f(understanding)e(and)h(tuning)h(in)h(detail.)1081
45 y(At)e(the)g(highest)g(le)o(v)o(el,)h(the)f(one-pass)e(single-node)g
(sort)i(contains)1025 87 y(three)h(steps)f(\(which)h(will)h(be)f
(described)f(in)h(more)g(detail)g(shortly\):)1072 165
y(1.)18 b Fh(Read:)12 b Fk(Read)6 b(the)h Fg(N)j Fk(100-byte)c(records)
g(from)i(disk)e(into)h(main)1118 207 y(memory)n(.)12
b(K)o(e)o(ys)6 b(may)g(be)g(p)o(artially)g(sorted)g(b)o(y)g(s)o
(imultaneou)o(sly)1118 248 y(distrib)o(uting)k(into)g
Fg(B)i Ff(=)f Fk(2)1468 232 y Fe(b)1492 248 y Fk(b)o(uckets.)1072
319 y(2.)18 b Fh(Sort:)j Fk(Sort)14 b(the)f(10-byte)f(ke)o(ys)g(in)h
(memory)n(.)25 b(If)14 b(ke)o(ys)e(ha)o(v)o(e)1118 361
y(been)d(placed)g(in)i(b)o(uckets,)e(then)h(each)e(b)o(ucket)h(is)i
(sorted)e(indi-)1118 402 y(vidually)f(with)g(either)g(quicksort)f(or)h
(a)g(partial-radix)h(sort)f(with)1118 444 y(cleanup.)1072
515 y(3.)18 b Fh(Write:)d Fk(Gather)8 b(and)h(write)h(sorted)f(records)
f(to)h(disk.)1081 593 y(In)f(an)g(implementation,)h(these)e(three)h
(steps)g(may)f(be)h(o)o(v)o(erlapped)1025 635 y(or)13
b(kept)e(synchronous.)21 b(F)o(or)13 b(e)o(xample,)g(we)f(in)o(v)o
(estigate)g(the)g(bene-)1025 676 y(\256ts)e(of)h(o)o(v)o(erlapping)f
(sorting)g(with)i(reading,)e(by)g(copying)f(ke)o(ys)g(into)1025
718 y(b)o(uckets)t(while)e(reading.)12 b(Since)6 b(the)g(majority)h(of)
g(the)f(e)o(x)o(ecution)g(time)1025 759 y(is)k(spent)f(in)h(the)g
(phases)d(performing)k(I/O,)g(we)e(be)o(gin)h(by)f(describing)1025
801 y(our)g(approach)e(to)j(reading)e(from)i(disk.)1025
897 y Fl(4.1)40 b(Reading)13 b(and)g(W)o(riting)f(from)h(Disk)1025
963 y Fk(NO)o(W)n(-Sort)j(must)h(work)e(well)i(in)g(a)f(v)o(ariety)g
(of)g(cluster)g(con\256gu-)1025 1005 y(rations:)22 b(namely)n(,)13
b(dif)o(fering)i(numbers)d(of)i(disks)e(and)h(amounts)f(of)1025
1046 y(memory)n(.)g(In)d(order)g(for)g(an)f(application)f(to)i
(con\256gure)d(itself)k(for)f(best)1025 1088 y(performance)j(in)i(its)h
(en)o(vironment,)e(it)i(must)e(\256rst)h(gather)g(rele)o(v)o(ant)1025
1130 y(information,)c(which)f(the)g(OS)g(does)e(not)j(always)d(pro)o
(vide.)1025 1225 y Fl(4.1.1)40 b(User-Level)12 b(Striping)1025
1292 y Fk(Software)c(does)f(not)h(currently)h(e)o(xist)f(to)h(stripe)g
(\256les)e(across)g(multiple)1025 1334 y(local)h(disks)f(with)i(dif)o
(ferent)g(speeds.)i(T)m(o)d(fully)h(utilize)g(the)f(aggre)o(gate)1025
1375 y(bandwidth)i(of)j(multiple)f(disks)f(per)g(machine,)h(we)f
(implemented)g(a)1025 1417 y(user)o(-le)o(v)o(el)6 b(library)g(for)g
(\256le)g(striping)g(on)g(top)g(of)g(each)g(local)g(Solaris)g(\256le)
1025 1458 y(system)g(\(i.e.,)k(we)d(are)g(not)h(b)o(uilding)g(on)f(top)
g(of)h(ra)o(w)g(disk\).)13 b(Similar)c(to)1025 1500 y(the)d(approach)t
(described)t(in)h([26)o(],)h(each)d(striped)h(\256le)g(is)g
(characterized)1025 1541 y(by)k(a)h(stripe)g(de\256nition)f(\256le,)h
(which)g(speci\256es)d(the)j(size)f(of)h(the)g(base)1025
1583 y(stripe)d(in)h(bytes,)f(the)g(names)f(of)i(the)f(\256les)g(\(on)h
(dif)o(ferent)g(disks\))f(in)g(the)1025 1624 y(stripe,)f(and)e(a)h
(multiplicati)o(v)o(e)i(factor)e(associated)t(with)g(each)f
(\256le/disk.)1081 1666 y(T)m(o)11 b(determine)g(the)g(proper)g(ratio)h
(of)f(stripe)h(sizes)e(across)g(disks,)1025 1707 y(we)c(de)o(v)o
(eloped)t Fd(diskconf)t Fk(.)12 b(This)6 b(tool,)i(gi)o(v)o(en)e(a)g
(list)h(of)f(SCSI)h(b)o(uses)1025 1749 y(and)j(a)i(list)g(of)g(disks)e
(on)h(those)f(b)o(uses,)h(creates)g(a)g(lar)o(ge)g(data)g(\256le)h(on)
1025 1790 y(each)5 b(of)i(the)f(disks;)g(it)i(reads)d(\256rst)i(from)g
(each)e(\256le)h(independently)n(,)f(and)1025 1832 y(then)10
b(reads)g(simultaneously)g(from)i(all)f(\256les)g(on)f(the)h(same)f(b)o
(us.)18 b(By)1025 1873 y(measuring)11 b(each)g(of)h(the)g(achie)o(v)o
(ed)f(bandwidths)f(and)h(determining)1025 1915 y(whether)i(or)h(not)g
(each)e(b)o(us)h(is)h(saturated,)g(the)g(tool)g(calculates)e(the)1025
1956 y(multiplicati)o(v)o(e)e(factor)f(of)g(the)g(base)e(stripe)i(for)h
(each)d(disk)h(to)h(achie)o(v)o(e)1025 1998 y(its)14
b(maximum)f(transfer)g(rate.)27 b(The)13 b(tool)g(performs)h(an)f
(analogous)1025 2039 y(chore)8 b(for)i(writes.)1081 2081
y(As)d(described)f(in)i(Section)f(3,)h(we)g(ha)o(v)o(e)f(two)g(disk)g
(con\256gurations)1025 2122 y(to)16 b(consider:)26 b(two)16
b(disks)e(on)i(a)g(fast-narro)o(w)g(SCSI)f(b)o(us,)j(and)d(an)1025
2164 y(additional)8 b(two)g(disks)f(on)h(a)h(fast-wide)f(SCSI.)h(W)m(e)
f(\256rst)h(v)o(eri\256ed)f(that)1025 2205 y(the)g(striping)h(library)h
(does)d(not)i(de)o(grade)e(the)i(achie)o(v)o(able)d(bandwidth)1025
2247 y(when)k(there)i(is)f(only)g(one)g(disk.)20 b(T)m(able)11
b(2)g(sho)o(ws)f(the)h(performance)1025 2288 y(of)k(the)g(striped)g
(\256le)h(system)e(on)g(the)h(simple)g(and)g(more)g(comple)o(x)1025
2330 y(disk)9 b(con\256gurations.)15 b(In)10 b(the)g(\256rst)h(two)f
(ro)o(ws,)g(we)g(see)f(that)h(the)g(two)1025 2372 y(5400)k(RPM)h(disks)
f(saturate)h(the)g(fast-narro)o(w)g(SCSI)h(b)o(us.)31
b(Since)1025 2413 y(the)12 b(fast-narro)o(w)g(SCSI)g(b)o(us)g(has)f(a)h
(peak)e(bandwidth)i(of)g(10)g(MB/s,)1025 2455 y(we)f(measure)f(only)h
(8.3)g(MB/s)h(from)g(two)g(disks)e(capable)g(of)h(a)h(total)1025
2496 y(of)g(11)f(MB/s.)21 b(Thus,)12 b(25\045)f(of)h(potential)g
(performance)e(is)i(lost)g(due)1025 2538 y(to)f(this)h(architectural)f
(o)o(v)o(ersight.)20 b(The)11 b(second)e(two)j(ro)o(ws)f(indicate)1025
2579 y(that)f(the)h(fast-wide)f(SCSI)g(b)o(us)g(adequately)e(handles)h
(the)h(two)g(faster)1025 2621 y(disks.)33 b(Finally)n(,)18
b(the)e(last)g(three)g(ro)o(ws)g(sho)o(w)f(the)h(superiority)g(of)1025
2662 y(using)10 b Fd(diskconf)15 b Fk(to)d(con\256gure)d(the)i
(striping)h(library)n(,)h(compared)1025 2704 y(to)7 b(nai)o(v)o(ely)g
(striping)h(with)f(equal-sized)f(blocks)g(on)h(disks)f(of)h(dif)o
(ferent)p eop
%%Page: 4 4
4 3 bop 0 48 938 2 v -1 89 2 42 v 22 77 a Fk(Seagate)8
b(Disks)p 439 89 V 229 w(SCSI)h(Bus)p 631 89 V 60 w(Read)p
783 89 V 70 w(Write)p 936 89 V -1 131 V 439 131 V 631
131 V 654 118 a(\(MB/s\))p 783 131 V 46 w(\(MB/s\))p
936 131 V 0 132 938 2 v -1 174 2 42 v 22 161 a(1)g(5400)f(RPM)i(Ha)o
(wk)p 439 174 V 151 w(Narro)o(w)p 631 174 V 109 w(5.5)p
783 174 V 105 w(5.2)p 936 174 V -1 215 V 22 203 a(2)f(5400)f(RPM)i(Ha)o
(wk)p 439 215 V 151 w(Narro)o(w)p 631 215 V 109 w(8.3)p
783 215 V 105 w(8.0)p 936 215 V 0 217 938 2 v -1 258
2 42 v 22 246 a(1)f(7200)f(RPM)i(Barracuda)p 439 258
V 85 w(W)o(ide)p 631 258 V 142 w(6.5)p 783 258 V 105
w(6.2)p 936 258 V -1 300 V 22 288 a(2)f(7200)f(RPM)i(Barracuda)p
439 300 V 85 w(W)o(ide)p 631 300 V 132 w(13.0)p 783 300
V 87 w(12.1)p 936 300 V 0 302 938 2 v -1 343 2 42 v 22
331 a(2)f(of)h(each)e(\(nai)o(v)o(e)h(striping\))p 439
343 V 67 w(Both)p 631 343 V 139 w(16.0)p 783 343 V 87
w(15.5)p 936 343 V -1 385 V 22 372 a(2)g(of)h(each)e(\(with)i(disk)f
(tool\))p 439 385 V 64 w(Both)p 631 385 V 139 w(20.5)p
783 385 V 87 w(19.1)p 936 385 V -1 426 V 22 414 a(2)g(of)h(each)e
(\(peak)g(aggre)o(gate\))p 439 426 V 44 w(Both)p 631
426 V 139 w(21.3)p 783 426 V 87 w(20.1)p 936 426 V 0
428 938 2 v 0 499 a(T)m(able)f(2:)25 b Fh(Band)o(widths)7
b(of)g(Disk)g(Con\256gurations.)k Fj(The)c(Read)f(and)0
540 y(Write)g(columns)f(show)g(the)h(measur)o(ed)t(bandwidth)f(using)g
(the)h(striping)0 582 y(libr)o(ary)n(.)20 b(The)11 b(last)h(thr)o(ee)e
(r)n(ows)g(give)h(the)h(performance)c(with)k(naive)0
623 y(striping)f(of)g(same-sized)f(bloc)o(ks)g(to)h(eac)o(h)g(disk,)g
(with)h(the)f(disk)g(tool,)0 665 y(and)c(the)h(peak)f(aggr)o(e)n(ga)o
(te,)f(calculated)h(as)g(the)h(sum)f(of)h(the)g(maximum)0
706 y(bandwidths)g(seen)f(over)h(the)h(two)g(SCSI)g(b)o(uses.)0
861 y Fk(speeds.)15 b(By)10 b(reading)f(\(or)i(writing\))h
Fj(two)e Fk(blocks)f(of)i(data)f(from)h(each)0 903 y(slo)o(wer)g(disk)g
(on)g(the)g(fast-narro)o(w)g(SCSI,)h(and)e Fj(thr)o(ee)g
Fk(from)i(each)e(on)0 944 y(the)f(fast-wide)g(SCSI,)g(we)g(achie)o(v)o
(e)f(20.5)g(MB/s)h(or)h(96\045)e(of)i(the)f(peak)0 986
y(aggre)o(gate)f(bandwidth)g(seen)g(from)i(the)f(four)g(disks.)0
1082 y Fl(4.1.2)41 b(Bu\013er)14 b(Management)0 1149
y Fk(Depending)c(upon)h(the)h(system)f(interface)h(used)e(to)j(read)e
(data)h(from)0 1190 y(disk,)k(the)e(application)g(may)h(or)g(may)f(not)
h(be)f(able)g(to)h(ef)o(fecti)o(v)o(ely)0 1232 y(control)9
b(its)h(memory)f(usage)e(and)i(pre)o(v)o(ent)g(double-b)o(uf)o(fering)g
(by)g(the)0 1273 y(operating)d(system.)11 b(In)6 b(this)g(section,)g
(we)g(compare)g(three)g(approac)o(hes)0 1315 y(to)13
b(reading)e(records)g(from)i(disk:)20 b Fd(read)q Fk(,)14
b Fd(mmap)r Fk(,)f(and)f Fd(mmap)i Fk(with)0 1356 y Fd(madvise)s
Fk(.)g(F)o(or)9 b(demonstration)f(purposes,)f(we)h(use)g(a)h(v)o(ery)g
(simple)0 1398 y(implementation)14 b(of)h(the)f(sorting)g(algorithm)h
(which)e(performs)i(all)0 1439 y(steps)e(sequentially)g(and)g
(quicksorts)h(the)g(ke)o(ys)f(when)g(the)o(y)h(are)g(in)0
1481 y(memory)n(.)56 1522 y(The)7 b(left-most)i(graph)f(of)g(Figure)g
(2)f(sho)o(ws)g(that)h(when)f(the)h(appli-)0 1564 y(cation)g(uses)g
(the)g Fd(read)j Fk(system)d(call)h(to)g(read)f(records)g(into)i
(memory)0 1605 y(from)d(disk,)g(the)f(total)g(sort)h(time)g(increases)t
(se)o(v)o(erely)e(when)h(more)g(than)0 1647 y(20)k(MB)h(of)g(records)f
(are)g(sorted,)h(e)o(v)o(en)e(though)h(64)g(MB)h(of)g(physical)0
1688 y(memory)h(are)g(a)o(v)o(ailable.)22 b(This)11 b(performance)h(de)
o(gradation)f(occurs)0 1730 y(due)g(to)i(thrashing)e(in)h(the)g
(virtual)h(memory)f(system.)22 b(W)o(ith)12 b Fd(read)r
Fk(,)0 1772 y(the)g(\256le)g(system)f(performs)h(its)h(o)o(wn)e(b)o(uf)
o(fering,)j(and)d(thus)h(the)g(user)0 1813 y(program)h(is)g(unable)e
(to)i(control)g(the)g(total)g(amount)f(of)i(memory)e(in)0
1855 y(use.)56 1896 y(T)m(o)h(a)o(v)o(oid)f(the)h(double-b)o(uf)o
(fering)g(of)g Fd(read)i Fk(while)e(le)o(v)o(eraging)0
1938 y(the)g(con)o(v)o(enience)c(of)14 b(the)e(\256le)h(system,)g(we)g
(in)o(v)o(estigate)f(the)h Fd(mmap)0 1979 y Fk(interface.)k
(Applications)10 b(use)f(memory)i(mapped)e(\256les)h(by)g(opening)0
2021 y(the)i(desired)f(\256le,)i(calling)f Fd(mmap)i
Fk(to)e(bind)g(the)g(\256le)g(into)g(a)g(memory)0 2062
y(se)o(gment)5 b(of)i(the)f(address)t(space,)g(and)f(accessing)s(the)h
(memory)g(re)o(gion)0 2104 y(as)k(desired.)19 b(As)11
b(sho)o(wn)f(in)h(the)g(middle)g(graph,)h(performance)e(with)0
2145 y Fd(mmap)18 b Fk(also)d(de)o(grades)f(after)j(about)e(20)h(MB)g
(of)g(records,)h(due)e(to)0 2187 y(the)8 b(page)g(replacement)f(polic)o
(y)h(of)h(the)g(virtual)g(memory)f(subsystem.)0 2228
y(LR)o(U)f(replacement)g(thro)o(ws)h(a)o(way)f(soon-to-be-needed)e
(sort-b)o(uf)o(fers)0 2270 y(during)12 b(the)f(read)h(phase;)g(again,)g
(the)f(ensuing)g(thrashing)g(de)o(grades)0 2311 y(performance.)56
2353 y(F)o(ortunately)n(,)c Fd(mmap)i Fk(has)c(an)i(auxiliary)f(system)
g(call,)i Fd(madvise)s Fk(,)0 2394 y(which)15 b(informs)h(the)g
(operating)e(system)h(of)h(the)f(intended)g(access)0
2436 y(pattern)6 b(for)g(a)g(particular)g(re)o(gion)g(of)g(memory)n(.)
11 b(F)o(or)6 b(e)o(xample,)g(one)g(call)0 2477 y(to)k
Fd(madvise)j Fk(noti\256es)c(the)g(kernel)g(that)h(a)g(re)o(gion)f
(will)i(be)f(accessed)0 2519 y(sequentially)n(,)d(thus)g(allo)o(wing)g
(the)h(OS)g(to)f(fetch)h(ahead)e(of)i(the)f(current)0
2560 y(page)f(and)h(to)h(thro)o(w)f(a)o(way)g(pages)f(that)h(ha)o(v)o
(e)g(already)g(been)f(accessed.)0 2602 y(The)k(right-most)h(graph)f(of)
h(Figure)f(2)h(sho)o(ws)e(that)i(with)g(both)g Fd(mmap)0
2643 y Fk(and)e Fd(madvise)j Fk(the)e(sorting)f(program)g(has)g(linear)
g(performance)g(up)0 2685 y(to)g(roughly)g(40)g(MB,)g(when)g(it)h(has)e
(used)g(all)i(a)o(v)o(ailable)e(memory)n(.)1025 45 y
Fl(4.1.3)40 b(Determining)13 b(Available)f(Memo)o(ry)1025
112 y Fk(The)c(amount)g(of)h(a)o(v)o(ailable)f(memory)h(on)f(a)h
(workstation)f(determines)1025 153 y(the)i(number)f(of)h(records)f
(that)h(can)f(be)g(sorted)h(with)g(a)g(one-pass)e(sort,)1025
195 y(and)h(the)h(number)g(of)g(records)g(per)g(run)g(in)h(a)f
(multi-pass)g(sort.)17 b(Some)1025 236 y(pre)o(vious)10
b(work)g(has)g(addressed)f(the)i(issue)e(of)j(adapting)e(sorting)h(al-)
1025 278 y(gorithms)d(to)h(memory)f(constraints)f(at)h(run-time)h([34,)
g(36)o(];)h(ho)o(we)o(v)o(er)o(,)1025 319 y(we)e(must)f(\256rst)i(kno)o
(w)e(the)h(amount)f(of)h(free)g(memory)g(a)o(v)o(ailable)f(to)h(the)
1025 361 y(sorting)h(application.)14 b(Because)8 b(there)h(is)h(no)f(e)
o(xisting)g(Solaris)h(inter)o(-)1025 402 y(face)e(that)h(gi)o(v)o(es)g
(an)g(accurate)e(estimate,)j(we)e(de)o(v)o(eloped)g Fd(memconf)s
Fk(.)1081 444 y(The)f(memory)g(tool)h(allocates)f(a)g(b)o(uf)o(fer)h
(and)f(fetches)g(it)h(into)g(main)1025 485 y(memory)13
b(using)g(one)g(of)h(two)f(methods:)21 b(by)14 b(writing)g(an)f
(arbitrary)1025 527 y(v)o(alue)i(to)i(the)f(\256rst)g(word)g(on)g(each)
f(page)f(or)j(by)f(copying)e(words)1025 568 y(from)8
b(a)f(memory-mapped,)g(sequentially-advised)e(input)i(\256le.)13
b(After)1025 610 y(prefetching,)i(the)g(tool)g(again)e(touches)g(each)g
(page)g(of)i(the)g(b)o(uf)o(fer)o(,)1025 651 y(recording)10
b(CPU)h(utilization.)19 b(If)12 b(the)f(b)o(uf)o(fer)h(\256ts)f(in)g
(main)g(memory)n(,)1025 693 y(then)f(CPU)g(utilization)h(is)f(high)g
(\(at)h(least)f(85\045)g(by)g(our)h(current)f(def-)1025
734 y(inition\),)j(and)d(a)g(lar)o(ger)i(b)o(uf)o(fer)f(is)g(tried.)19
b(If)12 b(the)f(b)o(uf)o(fer)g(does)f(not)h(\256t,)1025
776 y(CPU)6 b(utilization)i(is)e(lo)o(w)h(due)f(to)h(paging)e(acti)o
(vity)n(,)j(and)e(the)g(tool)h(backs)1025 818 y(of)o(f)13
b(to)f(a)f(smaller)h(b)o(uf)o(fer)n(.)23 b(A)12 b(binary)g(search)e(is)
i(used)f(to)h(re\256ne)f(our)1025 859 y(estimate)e(of)g(usable)f
(memory)n(.)1081 901 y(Running)13 b(the)i(basic)e(v)o(ersion)h(of)h
Fd(memconf)j Fk(sho)o(wed)13 b(us)h(that)1025 942 y(on)c(machines)e
(with)j(64,)f(128,)g(and)g(256)f(MB)i(of)f(real)g(memory)n(,)h(only)
1025 984 y(47,)e(104,)f(and)h(224)f(MB,)i(respecti)o(v)o(ely)n(,)e(are)
h(a)o(v)o(ailable)f(to)h(user)g(appli-)1025 1025 y(cations)i(after)i
(the)f(operating)g(system)f(and)g(daemon)g(processes)e(are)1025
1067 y(factored)i(out.)22 b(Applications)11 b(using)g
Fd(mmap)j Fk(and)d Fd(madvise)s Fk(,)j(such)1025 1108
y(as)7 b(NO)o(W)n(-Sort,)i(ha)o(v)o(e)e(approximately)g(10\045)h(less)f
(a)o(v)o(ailable)g(memory)1025 1150 y(\(42,)i(93,)g(and)g(195)f(MB\).)
1081 1191 y(Finally)n(,)h(we)g(v)o(eri\256ed)g(that)h(our)f
(predictions)g(of)g(a)o(v)o(ailable)g(mem-)1025 1233
y(ory)d(matched)f(the)h(number)g(of)g(records)f(we)h(were)g(able)g(to)g
(sort)h(without)1025 1274 y(memory)j(thrashing.)16 b(Since)9
b(a)h(sharp)g(increase)f(in)h(sort)h(time)f(occurs)1025
1316 y(when)c(we)h(sort)g(just)g(a)g(fe)o(w)h(more)f(records)f(than)h
(\256t)g(in)g(a)o(v)o(ailable)g(mem-)1025 1357 y(ory)n(,)12
b(we)g(must)g(be)g(conserv)o(ati)o(v)o(e;)g(thus,)g(we)g(scale)f(our)h
(estimate)g(of)1025 1399 y(a)o(v)o(ailable)d(memory)h(by)f(95\045.)15
b(Our)10 b(predictions)f(are)h(a)f(comfortable)1025 1440
y(distance)e(from)j(the)f(\252memory)f(wall\272,)i(while)f(not)g
(wasting)f(a)o(v)o(ailable)1025 1482 y(memory)n(.)1025
1578 y Fl(4.2)40 b(In-Co)o(re)14 b(So)o(rting)1025 1645
y Fk(This)6 b(section)g(qua)o(nti\256es)f(the)g(performance)g(of)h(v)n
(arious)f(main-memory)1025 1686 y(sorting)15 b(techniques.)29
b(If)17 b(performed)d(correctly)n(,)j(the)e(in-core)g(sort)1025
1728 y(within)8 b(the)f(disk-to-disk)g(single-node)f(sort)h(comprises)f
(only)h(a)g(small)1025 1769 y(portion)12 b(of)f(the)h(total)g(e)o(x)o
(ecution)f(time.)22 b(F)o(or)12 b(e)o(xample,)g(the)f(in-core)1025
1811 y(sort)e(consumes)e(only)i(0.6)g(of)g(the)g(5.1)h(seconds)c
(required)j(to)h(sort)f(one)1025 1852 y(million)g(records)f(on)g(an)g
(IBM)h(RS/6000)e(with)i(8)g(disks)e([1],)j(i.e.,)g(12\045)1025
1894 y(of)i(the)f(total)h(time.)22 b(In)12 b(this)g(section)f(we)g(in)o
(v)o(estigate)g(the)g(program-)1025 1935 y(ming)e(comple)o(xity)g
(needed)f(to)h(achie)o(v)o(e)f(this)i(range)f(of)g(performance)1025
1977 y(by)g(measuring)e(three)j(dif)o(ferent)g(in-core)f(sorting)g
(algorithms.)1081 2018 y Fh(Quicksort)p Fk(:)j(The)7
b(\256rst)h(in-core)f(sort)h(is)g(a)f(simple)h(quicksort)f(o)o(v)o(er)
1025 2060 y(all)12 b(of)g(the)f(ke)o(ys)f(in)i(memory)f([23].)21
b(Pre)o(vious)11 b(work)g(has)f(indicated)1025 2101 y(that)h(swapping)f
(only)h(the)g(ke)o(y)f(and)h(a)g(pointer)g(to)h(the)f(full)h(record)f
(is)1025 2143 y(faster)g(than)g(swapping)f(the)h(entire)h(100-byte)e
(record,)i(e)o(v)o(en)f(though)1025 2184 y(e)o(xtra)e(memory)g(and)f
(work)h(is)g(required)f(to)i(set)e(up)h(the)g(pointers)f([26].)1025
2226 y(Comparisons)15 b(between)g(ke)o(ys)g(be)o(gin)i(with)g(the)f
(most-signi\256cant)1025 2267 y(word,)c(and)f(only)h(e)o(xamine)f(the)g
(remaining)h(words)f(if)i(the)e(pre)o(vious)1025 2309
y(ones)d(are)h(identical.)1081 2350 y(The)j(top)g(line)h(in)g(the)f
(left-side)h(graph)f(of)h(Figure)f(3)g(sho)o(ws)f(the)1025
2392 y(time)i(for)h(the)e(incore)h(quicksort)f(as)g(a)g(function)h(of)g
(the)g(number)f(of)1025 2433 y(ke)o(ys.)f(F)o(or)d(reference,)e(in)h(a)
g(system)e(with)j(four)f(disks,)f(approximately)1025
2475 y(12)i(seconds)f(are)i(required)g(to)g(read)g(and)f(write)i(one)e
(million)j(records;)1025 2516 y(thus,)e(with)h(quicksort,)f(20\045)g
(of)g(the)h(e)o(x)o(ecution)e(time)i(is)f(spent)g(in)g(the)1025
2558 y(in-core)g(sort.)1081 2599 y Fh(Bucket)k(+)h(Quicksort)p
Fk(:)22 b(The)13 b(second)f(in-core)i(sort)g(performs)1025
2641 y(a)d(quicksort)g(after)i(the)e(ke)o(ys)g(ha)o(v)o(e)g(been)f
(distrib)o(uted)j(into)f(b)o(uckets;)1025 2682 y(ke)o(ys)d(are)i
(placed)e(in)i(one)f(of)h Fg(B)k Ff(=)d Fk(2)1520 2666
y Fe(b)1547 2682 y Fk(b)o(uckets)c(based)h(on)i(the)f(high-)p
eop
%%Page: 5 5
5 4 bop -114 4 a
 11367059 7843260 3289088 3289088 26970521 19866091 startTexFig
 -114 4 a
%%BeginDocument: Graphs/SingleInternalRead.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -66 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Helvetica findfont 200 scalefont setfont
newpath
LTa
1200 501 M
5697 0 V
-5697 0 R
0 4238 V
LTb
1200 501 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(0) Rshow
1200 1207 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(20) Rshow
1200 1914 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(40) Rshow
1200 2620 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(60) Rshow
1200 3326 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(80) Rshow
1200 4033 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(100) Rshow
1200 4739 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(120) Rshow
1200 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(0) Cshow
2150 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(10) Cshow
3099 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(20) Cshow
4049 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(30) Cshow
4998 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(40) Cshow
5948 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(50) Cshow
6897 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(60) Cshow
1200 501 M
5697 0 V
0 4238 V
-5697 0 V
0 -4238 V
200 2620 M
currentpoint gsave translate 90 rotate 0 0 M
(Time \(Seconds\)) Cshow
grestore
4048 101 M
(Size \(MB\)) Cshow
4048 4939 M
(read\(\)) Cshow
LT0
6234 4476 M
(Total Time) Rshow
6354 4476 M
360 0 V
1710 597 M
510 80 V
510 90 V
510 85 V
510 273 V
510 278 V
510 438 V
510 482 V
510 580 V
510 912 V
6474 4476 D
1710 597 D
2220 677 D
2730 767 D
3240 852 D
3750 1125 D
4260 1403 D
4770 1841 D
5280 2323 D
5790 2903 D
6300 3815 D
LT1
6234 4276 M
(Write Time) Rshow
6354 4276 M
360 0 V
1710 592 M
510 82 V
510 89 V
510 85 V
510 272 V
510 277 V
510 434 V
510 473 V
510 581 V
510 904 V
6474 4276 A
1710 592 A
2220 674 A
2730 763 A
3240 848 A
3750 1120 A
4260 1397 A
4770 1831 A
5280 2304 A
5790 2885 A
6300 3789 A
LT2
6234 4076 M
(Sort Time) Rshow
6354 4076 M
360 0 V
1710 549 M
510 43 V
510 46 V
510 45 V
510 116 V
510 112 V
510 142 V
510 89 V
510 103 V
510 247 V
6474 4076 B
1710 549 B
2220 592 B
2730 638 B
3240 683 B
3750 799 B
4260 911 B
4770 1053 B
5280 1142 B
5790 1245 B
6300 1492 B
LT3
6234 3876 M
(Read Time) Rshow
6354 3876 M
360 0 V
1710 545 M
510 39 V
510 41 V
510 40 V
510 95 V
510 93 V
510 111 V
510 51 V
510 82 V
510 208 V
6474 3876 C
1710 545 C
2220 584 C
2730 625 C
3240 665 C
3750 760 C
4260 853 C
4770 964 C
5280 1015 C
5790 1097 C
6300 1305 C
stroke
grestore
end
showpage
%%EndDocument

 endTexFig
 615 4 a
 11367059 7843260 3289088 3289088 26970521 19866091 startTexFig
 615 4 a
%%BeginDocument: Graphs/SingleInternalMmap.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -66 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Helvetica findfont 200 scalefont setfont
newpath
LTa
1200 501 M
5697 0 V
-5697 0 R
0 4238 V
LTb
1200 501 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(0) Rshow
1200 1207 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(20) Rshow
1200 1914 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(40) Rshow
1200 2620 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(60) Rshow
1200 3326 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(80) Rshow
1200 4033 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(100) Rshow
1200 4739 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(120) Rshow
1200 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(0) Cshow
2150 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(10) Cshow
3099 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(20) Cshow
4049 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(30) Cshow
4998 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(40) Cshow
5948 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(50) Cshow
6897 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(60) Cshow
1200 501 M
5697 0 V
0 4238 V
-5697 0 V
0 -4238 V
200 2620 M
currentpoint gsave translate 90 rotate 0 0 M
(Time \(Seconds\)) Cshow
grestore
4048 101 M
(Size \(MB\)) Cshow
4048 4939 M
(mmap\(\)) Cshow
LT0
6234 4476 M
(Total Time) Rshow
6354 4476 M
360 0 V
1710 597 M
510 86 V
510 88 V
510 147 V
510 321 V
510 509 V
510 552 V
510 582 V
510 696 V
510 999 V
6474 4476 D
1710 597 D
2220 683 D
2730 771 D
3240 918 D
3750 1239 D
4260 1748 D
4770 2300 D
5280 2882 D
5790 3578 D
6300 4577 D
LT1
6234 4276 M
(Write Time) Rshow
6354 4276 M
360 0 V
1710 591 M
510 89 V
510 86 V
510 147 V
510 320 V
510 505 V
510 546 V
510 581 V
510 687 V
510 1000 V
6474 4276 A
1710 591 A
2220 680 A
2730 766 A
3240 913 A
3750 1233 A
4260 1738 A
4770 2284 A
5280 2865 A
5790 3552 A
6300 4552 A
LT2
6234 4076 M
(Sort Time) Rshow
6354 4076 M
360 0 V
1710 547 M
510 44 V
510 47 V
510 91 V
510 89 V
510 151 V
510 162 V
510 169 V
510 124 V
510 185 V
6474 4076 B
1710 547 B
2220 591 B
2730 638 B
3240 729 B
3750 818 B
4260 969 B
4770 1131 B
5280 1300 B
5790 1424 B
6300 1609 B
LT3
6234 3876 M
(Read Time) Rshow
6354 3876 M
360 0 V
1710 544 M
510 39 V
510 42 V
510 83 V
510 66 V
510 115 V
510 105 V
510 96 V
510 101 V
510 146 V
6474 3876 C
1710 544 C
2220 583 C
2730 625 C
3240 708 C
3750 774 C
4260 889 C
4770 994 C
5280 1090 C
5790 1191 C
6300 1337 C
stroke
grestore
end
showpage
%%EndDocument

 endTexFig
 1344 4 a
 11367059 7843260 3289088 3289088 26970521 19866091 startTexFig
 1344 4 a
%%BeginDocument: Graphs/SingleInternalMmapMadvise.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -66 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Helvetica findfont 200 scalefont setfont
newpath
LTa
1200 501 M
5697 0 V
-5697 0 R
0 4238 V
LTb
1200 501 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(0) Rshow
1200 1207 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(20) Rshow
1200 1914 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(40) Rshow
1200 2620 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(60) Rshow
1200 3326 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(80) Rshow
1200 4033 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(100) Rshow
1200 4739 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(120) Rshow
1200 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(0) Cshow
2150 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(10) Cshow
3099 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(20) Cshow
4049 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(30) Cshow
4998 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(40) Cshow
5948 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(50) Cshow
6897 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(60) Cshow
1200 501 M
5697 0 V
0 4238 V
-5697 0 V
0 -4238 V
200 2620 M
currentpoint gsave translate 90 rotate 0 0 M
(Time \(Seconds\)) Cshow
grestore
4048 101 M
(Size \(MB\)) Cshow
4048 4939 M
(mmap() and madvise()) Cshow
LT0
6234 4476 M
(Total Time) Rshow
6354 4476 M
360 0 V
1710 595 M
510 83 V
510 91 V
510 97 V
510 72 V
510 98 V
510 78 V
510 286 V
510 641 V
510 1030 V
6474 4476 D
1710 595 D
2220 678 D
2730 769 D
3240 866 D
3750 938 D
4260 1036 D
4770 1114 D
5280 1400 D
5790 2041 D
6300 3071 D
LT1
6234 4276 M
(Write Time) Rshow
6354 4276 M
360 0 V
1710 590 M
510 84 V
510 91 V
510 96 V
510 72 V
510 98 V
510 77 V
510 284 V
510 632 V
510 1029 V
6474 4276 A
1710 590 A
2220 674 A
2730 765 A
3240 861 A
3750 933 A
4260 1031 A
4770 1108 A
5280 1392 A
5790 2024 A
6300 3053 A
LT2
6234 4076 M
(Sort Time) Rshow
6354 4076 M
360 0 V
1710 547 M
510 45 V
510 47 V
510 56 V
510 32 V
510 51 V
510 44 V
510 132 V
510 66 V
510 162 V
6474 4076 B
1710 547 B
2220 592 B
2730 639 B
3240 695 B
3750 727 B
4260 778 B
4770 822 B
5280 954 B
5790 1020 B
6300 1182 B
LT3
6234 3876 M
(Read Time) Rshow
6354 3876 M
360 0 V
1710 543 M
510 41 V
510 42 V
510 51 V
510 28 V
510 45 V
510 40 V
510 94 V
510 67 V
510 112 V
6474 3876 C
1710 543 C
2220 584 C
2730 626 C
3240 677 C
3750 705 C
4260 750 C
4770 790 C
5280 884 C
5790 951 C
6300 1063 C
stroke
grestore
end
showpage
%%EndDocument

 endTexFig
 0 583 a Fk(Figure)10 b(2:)32 b Fh(Read\(\))11 b(versus)c(Mmap\(\).)19
b Fj(All)11 b(thr)o(ee)e(gr)o(aphs)g(show)g(cumulative)g(numbers)f(for)
i(an)g(Ultr)o(aSP)m(ARC)g(I)h(with)g(64)f(MB)g(of)h(memory)e(and)0
625 y(one)e(Seagate)g(5400)g(RPM)h(disk.)13 b(The)7 b(\256rst)h(two)g
(gr)o(aphs)f(show)g(that)h(when)g(r)o(ead)e(or)i(mmap)g(is)g(used,)f
(the)i(total)g(sort)e(time)i(incr)o(eases)c(super)o(-linearly)0
666 y(befor)o(e)j(nearing)g(the)i(memory)e(limits)j(of)f(the)g(mac)o
(hine)o(.)15 b(The)9 b(right-most)h(gr)o(aph)e(shows)h(that)h(with)g
(memory)e(mapping)h(and)g(advising,)g(available)0 708
y(memory)f(can)g(be)h(used)e(mor)o(e)h(ef)o(fectively)n(.)0
832 y Fk(order)17 b Fg(b)g Fk(bits)f(of)h(the)f(ke)o(y)n(.)35
b(Placing)16 b(ke)o(ys)f(into)i(the)f(appropriate)0 873
y(b)o(ucket)e(is)i(easily)f(o)o(v)o(erlapped)g(with)i(the)e(read)h
(phase)e(due)h(to)h(the)0 915 y(simple)d(interface)f(pro)o(vided)h(by)f
Fd(mmap)r Fk(.)25 b(W)m(e)13 b(see)f(no)g(de)o(gradation)0
956 y(in)e(read)f(bandwidth)g(when)g(o)o(v)o(erlapping,)h(since)e(the)i
(CPU)g(is)f(under)o(-)0 998 y(utilized.)k(In)c(our)e(implementation,)h
(each)f(b)o(ucket)f(contains)h(the)h(most)0 1039 y(signi\256cant)f
(32-bits)h(of)h(the)f(ke)o(y)g(after)h(remo)o(ving)f(the)g(top)g
Fg(b)p Fk(-bits,)i(and)0 1081 y(a)i(pointer)g(to)h(the)f(full)h
(record.)22 b(In)13 b(the)f(common)f(case,)h(only)f(these)0
1122 y(32-bits)f(of)g(the)f(ke)o(y)g(are)h(e)o(xamined;)f(only)h(when)e
(ties)i(between)f(ke)o(ys)0 1164 y(occur)f(are)h(random)g(accesses)d
(to)j(memory)g(necessary)n(.)56 1205 y(The)f(number)g(of)h(b)o(uckets)e
(is)i(determined)e(at)i(run-time)h(such)d(that)0 1247
y(the)g(a)o(v)o(erage)e(number)h(of)h(ke)o(ys)f(per)g(b)o(ucket)g
(\256ts)g(into)h(the)g(second-le)o(v)o(el)0 1288 y(cache,)f(which)h(is)
h(512)e(KB)i(on)e(the)i(UltraSP)m(ARC.)f(Since)g(quicksort)f(is)0
1330 y(performed)11 b(in-place)f(and)h(each)e(partial)j(ke)o(y)e(plus)h
(pointer)g(requires)0 1371 y(8)g(bytes,)h(there)f(should)g(be)g(64K)g
(ke)o(ys)f(per)i(b)o(ucket.)19 b(Note)11 b(that)h(this)0
1413 y(approach)5 b(is)h(highly)g(dependent)t(on)g(a)g(uniform)h
(distrib)o(ution)h(of)e(ke)o(ys;)0 1455 y(with)11 b(a)f(ske)o(wed)e
(distrib)o(ution,)k(certain)e(b)o(uckets)f(may)h(contain)f(more)0
1496 y(ke)o(ys)f(than)h(\256t)g(in)g(cache,)f(de)o(grading)g
(performance.)56 1538 y(As)e(sho)o(wn)g(by)g(the)g(middle)h(line)f(of)h
(Figure)g(3,)g(performing)g(quick-)0 1579 y(sort)j(on)g(b)o(uckets)e
(that)i(\256t)h(in)f(the)g(second-le)o(v)o(el)f(cache)f(is)i(faster)g
(than)0 1621 y(using)k(quicksort)h(on)f(all)i(of)f(memory;)k(with)c
(this)h(approach)d(only)0 1662 y(14\045)8 b(of)h(the)f(total)h(time)g
(to)g(sort)f(one)g(million)h(records)f(is)g(spent)g(in)h(the)0
1704 y(in-core)g(sort.)56 1745 y Fh(Bucket)d(+)i(Partial-Radix)p
Fk(:)13 b(The)7 b(third)h(in-core)f(sort)h(performs)g(a)0
1787 y(partial-radix)g(sort)g(with)g(clean-up)e(on)g(the)i(ke)o(ys)e
(within)h(each)f(b)o(ucket,)0 1828 y(as)11 b(suggested)e(in)j([1)q(].)
22 b(Once)10 b(again,)i(the)g(most-signi\256cant)e(32-bits)0
1870 y(of)h(the)g(ke)o(y)f(\(after)i(remo)o(ving)e(the)h(top)g
Fg(b)p Fk(-bits\))h(and)e(a)h(pointer)f(to)i(the)0 1911
y(full)e(record)f(are)g(kept)f(in)i(the)f(b)o(ucket.)56
1953 y(Radix)15 b(sort)h(relies)g(on)f(the)h(representation)f(of)h(ke)o
(ys)e(as)h Fg(n)p Fk(-bit)0 1994 y(numbers.)d(W)m(e)c(perform)g(two)f
(passes)f(o)o(v)o(er)i(the)f(ke)o(ys)g(and)f(use)h(a)g(radix)0
2036 y(size)12 b(of)i(11,)f(e)o(xamining)g(a)g(total)g(of)h(22-bits.)25
b(W)m(e)13 b(refer)h(to)f(this)g(as)0 2077 y(a)g(partial-radix)h(sort)g
(since)e(we)i(do)e(not)i(radix)f(sort)h(on)f(all)h(80)c
Fc(\000)h Fg(b)0 2119 y Fk(bits.)22 b(On)12 b(each)f(pass)f(o)o(v)o(er)
j(the)f(ke)o(ys,)f(a)h(histogram)g(is)g(constructed)0
2160 y(that)i(contains)f(the)g(count)h(of)g(each)e(of)j(the)e(2)617
2144 y Fi(11)658 2160 y Fk(digits.)28 b(Then,)15 b(the)0
2202 y(histogram)d(is)h(scanned)d(from)j(the)g(lo)o(west)f(entry)g(to)h
(the)f(highest)g(to)0 2243 y(calculate)d(the)g(rank)h(of)g(each)e(ke)o
(y)h(in)h(the)g(sorted-order)n(.)15 b(Finally)n(,)10
b(the)0 2285 y(ke)o(ys)e(are)h(permuted)f(to)i(their)f(destinations)f
(according)g(to)h(their)h(rank)0 2326 y(in)g(the)f(histogram.)k(After)e
(the)e(partial)h(radix)f(sort,)h(a)f(clean-up)f(phase)0
2368 y(is)14 b(performed,)i(where)e(ke)o(ys)f(with)i(ties)g(in)f(the)g
(top)h(22+)p Fg(b)f Fk(bits)h(are)0 2409 y(b)o(ubble-sorted.)56
2451 y(As)10 b(with)h(quicksort,)f(the)g(number)g(of)h(b)o(uckets)d(is)
j(selected)e(such)0 2492 y(that)h(the)g(a)o(v)o(erage)f(number)h(of)g
(ke)o(ys)f(per)h(b)o(ucket)f(\256ts)h(in)g(the)g(second-)0
2534 y(le)o(v)o(el)i(cache.)20 b(Ho)o(we)o(v)o(er)o(,)13
b(since)d(radix)i(sort)g(requires)g(a)g(source)e(and)0
2575 y(a)k(destination)g(b)o(uf)o(fer)o(,)j(only)d(half)h(as)f(man)o(y)
h(ke)o(ys)e(\256t)i(in)g(cache)e(as)0 2617 y(compared)8
b(to)h(quicksort,)g(i.e.,)h(32K)f(ke)o(ys.)56 2658 y(The)d(bottom)g
(line)g(in)h(the)f(left-side)h(graph)e(of)i(Figure)f(3)g(sho)o(ws)f
(that)0 2700 y(radix)j(sort)g(on)f(each)g(b)o(ucket)f(is)i(greatly)g
(superior)f(to)h(quicksort.)k(Only)1037 790 y
 14208860 9804108 3289088 3289088 26970521 19866091 startTexFig
 1037 790
a
%%BeginDocument: Graphs/SingleInternalLocalSort.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -66 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Helvetica findfont 200 scalefont setfont
newpath
LTa
1200 501 M
5697 0 V
LTb
1200 501 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(0) Rshow
1200 1135 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(1) Rshow
1200 1769 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(2) Rshow
1200 2403 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(3) Rshow
1200 3037 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(4) Rshow
1200 3671 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(5) Rshow
1200 4305 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(6) Rshow
1200 4939 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(7) Rshow
1200 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(250 K) Cshow
2150 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(500 K) Cshow
3099 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(750 K) Cshow
4049 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(1 M) Cshow
4998 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(1.25 M) Cshow
5948 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(1.5 M) Cshow
6897 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(1.75 M) Cshow
1200 501 M
5697 0 V
0 4438 V
-5697 0 V
0 -4438 V
200 2720 M
currentpoint gsave translate 90 rotate 0 0 M
(Time \(seconds\)) Cshow
grestore
4048 101 M
(Keys) Cshow
LT0
6234 4676 M
(Quicksort) Rshow
6354 4676 M
360 0 V
1200 911 M
950 417 V
949 532 V
950 488 V
949 532 V
950 528 V
949 511 V
6474 4676 D
1200 911 D
2150 1328 D
3099 1860 D
4049 2348 D
4998 2880 D
5948 3408 D
6897 3919 D
LT1
6234 4476 M
(Quicksort over Buckets) Rshow
6354 4476 M
360 0 V
1200 838 M
950 285 V
949 324 V
950 294 V
949 323 V
950 334 V
949 394 V
6474 4476 A
1200 838 A
2150 1123 A
3099 1447 A
4049 1741 A
4998 2064 A
5948 2398 A
6897 2792 A
LT2
6234 4276 M
(Radix over Buckets) Rshow
6354 4276 M
360 0 V
1200 575 M
950 72 V
949 71 V
950 72 V
949 75 V
950 68 V
949 123 V
6474 4276 B
1200 575 B
2150 647 B
3099 718 B
4049 790 B
4998 865 B
5948 933 B
6897 1056 B
stroke
grestore
end
showpage
%%EndDocument

 endTexFig
 1025 1494 a Fk(Figure)c(3:)26 b Fh(Comparison)6 b(of)i(In-Cor)o(e)f
(Sorting)h(Algorithms)p Fk(.)13 b Fj(The)1025 1536 y(gr)o(aph)6
b(compar)n(es)f(the)h(so)o(rting)g(time)g(using)f(quic)o(k)o(sor)o(t)h
(ove)o(r)g(a)o(ll)g(ke)o(y)o(s)g(in)1025 1577 y(memory)n(,)j(quic)o
(ksort)g(independently)f(on)i(eac)o(h)f(b)o(uc)o(ket,)h(and)g(a)g(r)o
(adix)1025 1619 y(sort)e(on)h(eac)o(h)f(b)o(uc)o(ket.)13
b(The)8 b(gr)o(aph)g(is)h(not)h(cumulative)o(.)1025 1743
y Fk(4\045)e(of)h(the)f(total)h(time)h(to)e(sort)h(one)f(million)h
(records)f(is)g(no)o(w)g(spent)g(in)1025 1784 y(the)i(in-core)g(sort.)
17 b(Clearly)n(,)10 b(the)g(combination)f(of)i(distrib)o(uting)f(ke)o
(ys)1025 1826 y(into)k(b)o(uckets)d(and)i(performing)h(a)f(radix)g
(sort)h(on)f(the)g(ke)o(ys)g(within)1025 1867 y(each)e(b)o(ucket)g(is)i
(worth)f(the)g(added)f(comple)o(xity)n(.)23 b(W)m(e)12
b(should)g(note)1025 1909 y(that)e(we)g(implemented)f(some)g(of)i(the)f
(optimizations)f(found)h(in)20 b([1],)1025 1950 y(including)9
b(restricting)h(the)g(number)f(of)g(b)o(uckets)f(to)i(be)f(less)g(than)
g(the)1025 1992 y(number)d(of)h(TLB)f(entries,)i(o)o(v)o(erlapping)e
(of)h(sorting)g(and)e(writing,)k(and)1025 2033 y(a)i(small)h
(optimization)f(on)g(the)g(clean-up)g(phase;)g(ho)o(we)o(v)o(er)o(,)g
(we)g(did)1025 2075 y(not)e(see)f(a)h(signi\256cant)f(gain)g(from)i
(these)e(methods.)1025 2171 y Fl(4.3)40 b(Discussion)1025
2238 y Fk(T)m(o)7 b(summarize,)h(Figure)f(4)h(sho)o(ws)e(the)i(total)g
(time)h(as)e(returned)g(by)g(the)1025 2279 y(UNIX)13
b Fd(time)i Fk(command)c(for)j(the)e(one-pass)f(single-node)h(v)o
(ersion)1025 2321 y(of)j(NO)o(W)n(-Sort)g(on)g(systems)e(with)j(two)f
(and)f(four)h(disks.)30 b(Before)1025 2362 y(timing)14
b(each)d(run,)k(we)e(\257ush)e(the)i(\256le)g(cache)f(by)g(unmounting)g
(and)1025 2404 y(re-mounting)h(each)f(of)i(the)g(striped)f(disks.)26
b(As)13 b(e)o(xpected,)g(the)g(in-)1025 2445 y(core)7
b(sorting)g(time)h(is)f(ne)o(gligible)h(in)f(both)g(con\256gurations)f
(compared)1025 2487 y(to)17 b(the)f(time)h(for)g(reading)f(and)g
(writing)h(the)f(records)g(from)h(disk.)1025 2528 y(Furthermore,)9
b(the)g(read)g(bandwidth)f(is)i(roughly)e(balanced)f(with)j(the)1025
2570 y(write)f(bandwidth)e(and)g(matches)g(the)h(transfer)g(times)g
(found)g(with)g(the)1025 2611 y(disk)e(con\256guration)f(tool)i(within)
g(5-10\045.)13 b(Finally)n(,)7 b(the)f(performance)1025
2653 y(is)j(linear)h(in)f(the)g(number)g(of)h(records)e(when)h(the)g
(records)f(\256t)i(in)f(main)1025 2694 y(memory)n(.)p
eop
%%Page: 6 6
6 5 bop 70 4 a
 14208860 9804108 3289088 3289088 26970521 19866091 startTexFig
 70 4 a
%%BeginDocument: Graphs/SingleInternal.2Disks.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -66 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Helvetica findfont 200 scalefont setfont
newpath
LTa
1200 501 M
5697 0 V
LTb
1200 501 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(0) Rshow
1200 925 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(5) Rshow
1200 1349 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(10) Rshow
1200 1772 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(15) Rshow
1200 2196 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(20) Rshow
1200 2620 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(25) Rshow
1200 3044 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(30) Rshow
1200 3468 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(35) Rshow
1200 3891 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(40) Rshow
1200 4315 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(45) Rshow
1200 4739 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(50) Rshow
2182 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(500K \(48 MB\)) Cshow
4147 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(1M \(95 MB\)) Cshow
6111 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(1.5M \(143 MB\)) Cshow
1200 501 M
5697 0 V
0 4238 V
-5697 0 V
0 -4238 V
200 2620 M
currentpoint gsave translate 90 rotate 0 0 M
(Time \(seconds\)) Cshow
grestore
4048 101 M
(Keys \(Amout of Data\)) Cshow
%REMZI
2048 2739 M
(Datamation) Cshow
%REMZI
4048 4939 M
(2 Disks) Cshow
LT0
1200 2592 M
2947 0 V
0 -2091 R
0 2091 V
LT1
6234 4476 M
(Total) Rshow
6354 4476 M
360 0 V
1200 1060 M
982 497 V
982 539 V
983 496 V
982 513 V
982 558 V
6474 4476 D
1200 1060 D
2182 1557 D
3164 2096 D
4147 2592 D
5129 3105 D
6111 3663 D
LT2
6234 4276 M
(Write) Rshow
6354 4276 M
360 0 V
1200 1012 M
982 517 V
982 495 V
983 483 V
982 524 V
982 555 V
6474 4276 A
1200 1012 A
2182 1529 A
3164 2024 A
4147 2507 A
5129 3031 A
6111 3586 A
LT3
6234 4076 M
(Sort) Rshow
6354 4076 M
360 0 V
1200 757 M
982 254 V
982 249 V
983 230 V
982 262 V
982 298 V
6474 4076 B
1200 757 B
2182 1011 B
3164 1260 B
4147 1490 B
5129 1752 B
6111 2050 B
LT4
6234 3876 M
(Read) Rshow
6354 3876 M
360 0 V
1200 747 M
982 245 V
982 238 V
983 221 V
982 252 V
982 288 V
6474 3876 C
1200 747 C
2182 992 C
3164 1230 C
4147 1451 C
5129 1703 C
6111 1991 C
stroke
grestore
end
showpage
%%EndDocument

 endTexFig
 980 4 a
 14208860 9804108 3289088 3289088 26970521 19866091 startTexFig
 980 4 a
%%BeginDocument: Graphs/SingleInternal.4Disks.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -66 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Helvetica findfont 200 scalefont setfont
newpath
LTa
1200 501 M
5697 0 V
LTb
1200 501 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(0) Rshow
1200 925 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(5) Rshow
1200 1349 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(10) Rshow
1200 1772 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(15) Rshow
1200 2196 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(20) Rshow
1200 2620 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(25) Rshow
1200 3044 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(30) Rshow
1200 3468 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(35) Rshow
1200 3891 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(40) Rshow
1200 4315 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(45) Rshow
1200 4739 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(50) Rshow
2182 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(500K \(48 MB\)) Cshow
4147 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(1M \(95 MB\)) Cshow
6111 501 M
0 63 V
0 4175 R
0 -63 V
0 -4375 R
(1.5M \(143 MB\)) Cshow
1200 501 M
5697 0 V
0 4238 V
-5697 0 V
0 -4238 V
200 2620 M
currentpoint gsave translate 90 rotate 0 0 M
(Time \(seconds\)) Cshow
grestore
4048 101 M
(Keys \(Amout of Data\)) Cshow
%REMZI
2048 1739 M
(Datamation) Cshow
%REMZI
4048 4939 M
(4 Disks) Cshow
LT0
1200 1594 M
2947 0 V
0 -1093 R
0 1093 V
LT1
6234 4476 M
(Total) Rshow
6354 4476 M
360 0 V
1200 825 M
982 218 V
982 259 V
983 292 V
982 306 V
982 266 V
6474 4476 D
1200 825 D
2182 1043 D
3164 1302 D
4147 1594 D
5129 1900 D
6111 2166 D
LT2
6234 4276 M
(Write) Rshow
6354 4276 M
360 0 V
1200 758 M
982 246 V
982 253 V
983 272 V
982 293 V
982 256 V
6474 4276 A
1200 758 A
2182 1004 A
3164 1257 A
4147 1529 A
5129 1822 A
6111 2078 A
LT3
6234 4076 M
(Sort) Rshow
6354 4076 M
360 0 V
1200 630 M
982 118 V
982 133 V
983 135 V
982 145 V
982 94 V
6474 4076 B
1200 630 B
2182 748 B
3164 881 B
4147 1016 B
5129 1161 B
6111 1255 B
LT4
6234 3876 M
(Read) Rshow
6354 3876 M
360 0 V
1200 621 M
982 107 V
982 123 V
983 126 V
982 134 V
982 86 V
6474 3876 C
1200 621 C
2182 728 C
3164 851 C
4147 977 C
5129 1111 C
6111 1197 C
stroke
grestore
end
showpage
%%EndDocument

 endTexFig
 0 708 a Fk(Figure)10 b(4:)31 b Fh(Single-Node,)9 b(Single-Pass)g(Sort)
h(T)o(ime)p Fk(.)17 b Fj(Both)10 b(gr)o(aphs)e(ar)o(e)h(cumulative)o(.)
16 b(The)9 b(time)i(for)f(the)f(sort)h(is)g(shown)f(as)g(a)h(function)g
(of)g(the)0 749 y(number)f(of)h(r)o(ecor)o(ds)o(.)15
b(The)9 b(gr)o(aph)g(on)h(the)g(left)h(depicts)f(a)g(system)f(using)g
(two)i(disks)e(connected)f(to)i(a)g(fast-narr)n(ow)g(SCSI)g(b)o(us;)g
(the)g(gr)o(aph)g(on)f(the)0 791 y(right)g(is)g(for)g(a)g(system)f
(that)i(uses)d(an)i(additional)g(two)g(disks)f(on)h(a)g(fast-wide)g
(SCSI.)h(Both)f(systems)e(contain)i(256)f(MB)h(of)h(r)o(eal)e(memory)n
(.)56 915 y Fk(Optimizing)h(the)f(single-node,)g(single-pass)e(sort)j
(has)f(shed)f(light)0 956 y(on)15 b(a)g(number)g(of)g(machine)f
(architecture)h(and)g(operating)f(system)0 998 y(issues.)24
b(First,)15 b(our)d(disk)h(con\256guration)e(tool)j(has)e(sho)o(wn)f
(that)j(the)0 1039 y(UltraSP)m(ARC)6 b(internal)h(fast-narro)o(w)f
(SCSI)g(b)o(us)g(saturates)f(with)h(more)0 1081 y(than)11
b(one)f(5400)h(RPM)g(disk.)20 b(A)11 b(fast-wide)g(SCSI)h(b)o(us)e
(would)h(ha)o(v)o(e)0 1122 y(enabled)i(us)g(to)i(achie)o(v)o(e)e(11)h
(MB/s)g(from)h(our)g(two)f(internal)g(disks)0 1164 y(instead)g(of)h
(8.3)g(MB/s,)i(a)e(25\045)g(loss)f(in)i(performance.)30
b(W)m(e)15 b(also)0 1205 y(found)9 b(that)g(striping)h(to)f(disks)f
(with)i(dif)o(ferent)g(bandwidths)e(requires)0 1247 y(dif)o(ferent)i
(stripe)f(sizes)f(across)g(disks.)56 1288 y(Second,)f(our)i(e)o(v)o
(aluation)f(of)h(\256le)g(system)f(interfaces)g(has)g(sho)o(wn)0
1330 y(that)h Fd(mmap)i Fk(pro)o(vides)d(simple)g(and)g(ef)o(\256cient)
g(\256ne-grained)g(access)e(to)0 1371 y(\256les.)17 b(W)o(ith)11
b(the)f Fd(mmap)j Fk(and)c Fd(madvise)14 b Fk(interfaces,)c(copying)f
(ke)o(ys)0 1413 y(into)g(b)o(uckets)e(is)h(completely)g(hidden)f(under)
h(the)h(disk)f(transfer)g(time.)0 1454 y(Obtaining)k(this)g(same)e
(performance)h(with)i(the)f Fd(read)h Fk(system)e(call)0
1496 y(would)k(require)g(more)h(programming)f(comple)o(xity:)26
b(because)13 b(the)0 1537 y(cost)e(of)h(issuing)f(each)g
Fd(read)i Fk(is)f(high,)h(users)e(must)g(use)g(threads)g(to)0
1579 y(prefetch)6 b(data)h(in)g(lar)o(ge)g(chunks.)k(Further)o(,)c(the)
g(\256le)g(system)f(b)o(uf)o(fering)0 1620 y(that)g(occurs)g(with)g
Fd(read)h Fk(wastes)f(an)g(inordinate)g(amou)o(nt)g(of)g(memory)n(,)0
1662 y(which)j(is)g(not)g(acceptable)e(for)j(data-intensi)o(v)o(e)e
(applications.)56 1703 y(Third,)h(we)g(ha)o(v)o(e)f(seen)g(that)h(with)
g(a)g(simple)f(memory)h(con\256gura-)0 1745 y(tion)e(tool,)h(an)e
(application)g(can)g(ef)o(fecti)o(v)o(ely)h(determine)g(and)f(use)g
(most)0 1786 y(of)11 b(a)o(v)o(ailable)f(memory)n(.)17
b(The)10 b(memory)g(tool)h(disco)o(v)o(ered)e(the)i(b)o(uf)o(fer)0
1828 y(requirements)6 b(of)h Fd(mmap)q Fk(,)h(roughly)e(a)h(10\045)f
(tax)g(applied)g(to)h(free)g(mem-)0 1869 y(ory)n(.)13
b(Ho)o(we)o(v)o(er)o(,)c(an)f(OS)h(interface)g(that)g(ga)o(v)o(e)f
(programs)g(an)h(accurate)0 1911 y(run-time)h(estimate)f(of)g(free)h
(memory)f(would)f(be)h(preferable.)0 2011 y Fl(5)41 b(One-P)o(ass)12
b(P)o(a)o(rallel)g(So)o(rting)0 2091 y Fk(W)m(e)g(ha)o(v)o(e)g
(detailed)g(the)g(intricacies)g(of)g(single-node)f(sorting)h(when)0
2133 y(the)c(records)g(\256t)g(into)h(memory)n(,)f(speci\256cally)f
(disk)g(striping,)j(memory)0 2174 y(management,)g(and)h(the)g(in-core)g
(sorting)h(algorithm.)21 b(W)m(e)11 b(no)o(w)g(e)o(x-)0
2216 y(amine)e(the)g(one-pass)e(parallel)i(sort)g(and)g(the)g(issues)e
(that)i(arise)g(when)0 2257 y(communication)d(is)g(added)o(.)k(W)m(e)c
(also)g(present)g(our)g(bes)o(t)g(performance)0 2299
y(on)j(the)g(Datamation)f(benchmark.)56 2340 y(Assuming)h(that)h(the)h
(records)e(be)o(gin)h(e)o(v)o(enly)f(distrib)o(uted)i(across)0
2382 y Fg(P)18 b Fk(workstations,)13 b(numbered)f(0)g(through)h
Fg(P)i Fc(\000)c Fk(1,)j(the)f(three)f(steps)0 2423 y(of)d(the)g
(single-node)f(sort)h(e)o(xtend)f(v)o(ery)h(naturally)g(into)g(the)g
(four)o(-step)0 2465 y(parallel)g(algorithm:)47 2545
y(1.)18 b Fh(Read:)d Fk(Each)9 b(processor)f(reads)h(records)h(from)h
(its)f(local)g(disk)93 2586 y(into)g(main)f(memory)n(.)47
2658 y(2.)18 b Fh(Communicate:)12 b Fk(K)o(e)o(y)6 b(v)o(alues)g(are)f
(e)o(xamine)o(d)h(a)o(nd)f(the)g(records)93 2699 y(are)k(sent)g(to)g
(one)g(of)g Fg(P)k Fc(\003)c Fg(B)i Fk(local)e(or)h(remote)f(b)o
(uckets.)1072 915 y(3.)18 b Fh(Sort:)c Fk(Each)8 b(processor)f(sorts)i
(its)h(local)f(ke)o(ys.)1072 986 y(4.)18 b Fh(Write:)d
Fk(Each)8 b(processor)g(gathers)g(and)h(writes)h(its)f(records)g(to)
1118 1027 y(local)g(disk.)1081 1107 y(Each)g(of)h(the)g(workstations)f
(memory-maps)h(its)g(input)g(\256les)g(and)1025 1149
y(calculates)d(the)i(processor)e(containing)g(the)i(remote)g(b)o(ucket)
e(for)j(each)1025 1190 y(ke)o(y)n(.)25 b(Our)13 b(current)g
(implementation)g(determines)g(the)g(destination)1025
1232 y(processor)6 b(with)j(a)e(simple)h(b)o(ucket)f(function)h
(\(i.e.,)h(the)f(top)g(lg)1837 1242 y Fi(2)1858 1232
y Fg(P)13 b Fk(bits)1025 1273 y(of)e(each)e(ke)o(y\))i(and)f(copies)f
(the)i(ke)o(y)f(from)h(the)g(input)g(\256le)f(to)i(a)e
Fj(send-)1025 1315 y(b)o(uf)o(fer)j Fk(allocated)g(for)h(each)e
(destination)g(processor)n(.)25 b(Once)12 b(again,)1025
1356 y(this)f(approach)e(for)i(b)o(ucketizing)e(assumes)g(that)h(the)h
(ke)o(y)f(v)o(alues)f(are)1025 1398 y(from)g(a)f(uniform)h(distrib)o
(ution.)14 b(The)7 b(speci\256cs)f(of)j(when)e(the)h(records)1025
1439 y(in)i(a)g(send-b)o(uf)o(fer)g(are)f(sent)h(v)o(ary)f(across)g
(our)h(implementations)f(and)1025 1481 y(are)g(described)e(in)j(more)f
(detail)g(belo)o(w)n(.)1081 1522 y(When)f(a)h(message)e(containing)h
(records)g(arri)o(v)o(es)i(at)f(a)g(processor)o(,)1025
1564 y(an)j(Acti)o(v)o(e)h(Message)e(handler)h(is)h(e)o(x)o(ecuted.)24
b(The)12 b(handler)h(mo)o(v)o(es)1025 1605 y(the)f(records)f(into)i(a)f
(sort-b)o(uf)o(fer)i(and)d(copies)g(the)h(partial)h(ke)o(ys)e(and)1025
1647 y(pointers)j(into)h(the)g(correct)g(local)g(b)o(uckets;)h(these)e
(operations)f(are)1025 1688 y(directly)f(analogous)d(to)j(distrib)o
(uting)h(partial)f(ke)o(ys)f(into)h(b)o(uckets)e(in)1025
1730 y(the)f(single-node)g(sort.)15 b(The)9 b(most)h(signi\256cant)e
(dif)o(ference)i(from)g(the)1025 1771 y(single-node)d(v)o(ersion)h(is)g
(that)h(rather)g(than)f(distrib)o(uting)h(records)f(into)1025
1813 y Fj(local)k Fk(b)o(uckets,)h(each)e(processor)g(distrib)o(utes)i
(records)f(into)h Fj(r)o(emote)1025 1854 y Fk(b)o(uckets.)g(This)c
(computation)g(is)h(naturally)f(decoupled)f(with)i(Acti)o(v)o(e)1025
1896 y(Messages:)20 b(the)13 b(sending)f(processor)g(determines)h(the)g
(destination)1025 1937 y(processor)c(o)o(wning)h(a)h(range)f(of)h(b)o
(uckets;)g(the)g(recei)o(ving)f(processor)1025 1979 y(determines)g(the)
g(\256nal)h(b)o(ucket,)f(performing)h(calculations)e(identical)1025
2020 y(to)g(the)g(single-node)f(v)o(ersion)h(within)g(the)g(message)e
(handler)n(.)1081 2062 y(After)i(synchronizing)e(across)g(all)i
(processors)e(to)i(ensure)e(that)i(all)1025 2103 y(records)d(ha)o(v)o
(e)h(been)f(sent)g(and)h(recei)o(v)o(ed,)g(each)f(node)g(performs)h(an)
f(in-)1025 2145 y(core)i(sort)i(on)e(its)i(records)e(and)h(writes)g
(out)g(its)h(local)f(portion)g(to)g(local)1025 2186 y(disk.)16
b(The)10 b(sort)g(and)g(write)h(steps)e(are)h(identical)g(to)h(the)f
(single-node)1025 2228 y(v)o(ersion.)19 b(At)11 b(the)g(end,)g(the)g
(data)g(is)g(sorted)f(across)g(the)h(disks)f(of)h(the)1025
2269 y(processors,)h(with)h(the)g(lo)o(west-v)o(alued)e(v)o(alued)h(ke)
o(ys)g(on)g(processor)1025 2311 y(0)e(and)g(highest-v)o(alued)f(ke)o
(ys)g(on)i(processor)e Fg(P)14 b Fc(\000)9 b Fk(1.)18
b(Note)10 b(that)h(the)1025 2352 y(number)d(of)i(records)e(per)h(node)f
(will)i(only)f(be)g(approximately)f(equal,)1025 2394
y(and)g(currently)h(depends)e(on)i(the)g(distrib)o(ution)h(of)f(ke)o(y)
f(v)o(alues.)1025 2490 y Fl(5.1)40 b(Exploiting)12 b(Overlap)1025
2557 y Fk(Simultaneously)7 b(reading)i(records)f(from)h(local)g(disk)g
(while)g(sending)1025 2598 y(records)i(to)h(other)h(processors)d(has)h
(the)h(potential)g(to)g(o)o(v)o(erlap)g(disk-)1025 2640
y(wait)h(time)h(and)f(network)f(latenc)o(y)n(.)25 b(Ho)o(we)o(v)o(er)o
(,)14 b(o)o(v)o(erlapping)f(these)1025 2681 y(operations)8
b(is)i(only)f(useful)g(if)i(shared)d(resources,)h(such)f(as)h(the)g
(CPU)p eop
%%Page: 7 7
7 6 bop 13 4 a
 14208860 9804108 3289088 3289088 26970521 19866091 startTexFig
 13 4 a
%%BeginDocument: Graphs/ParallelInternalAlgorithms2.eps
/gnudict 40 dict def
gnudict begin
/Color true def
/Solid true def
/gnu2 200 def
/gnu2 200 def
/gnulinewidth 5.000 def
/vshift -66 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnu2 setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 0.9 0.9 0.9 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Helvetica findfont 200 scalefont setfont
newpath
LTa
1200 501 M
5697 0 V
-5697 0 R
0 4438 V
LTb
1200 501 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(0) Rshow
1200 1056 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(5) Rshow
1200 1611 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(10) Rshow
1200 2165 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(15) Rshow
1200 2720 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(20) Rshow
1200 3275 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(25) Rshow
1200 3830 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(30) Rshow
1200 4384 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(35) Rshow
1200 4939 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(40) Rshow
1770 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(1 narrow) Cshow
2909 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(2 narrow) Cshow
4049 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(2 wide) Cshow
5188 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(4) Cshow
6327 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(Hybrid) Cshow
1200 501 M
5697 0 V
0 4438 V
-5697 0 V
0 -4438 V
200 2720 M
currentpoint gsave translate 90 rotate 0 0 M
(Time \(seconds\)) Cshow
grestore
4048 101 M
(Disks) Cshow
%REMZI
1480 4224 M
currentpoint gsave translate 90 rotate 0 0 M
(Synch) Lshow
grestore
1763 3871 M
currentpoint gsave translate 90 rotate 0 0 M
(Interleaved) Lshow
grestore
2058 3880 M
currentpoint gsave translate 90 rotate 0 0 M
(Threaded) Lshow
grestore
%REMZI
LTb
6234 4676 M
(Write) Rshow
LT0
6354 4676 M
360 0 V
6042 501 M
0 1800 V
4903 501 M
0 1652 V
3764 501 M
0 2087 V
2624 501 M
0 2741 V
1485 501 M
0 3628 V
6327 501 M
0 1531 V
5188 501 M
0 1625 V
4049 501 M
0 1786 V
2909 501 M
0 2412 V
1770 501 M
0 3274 V
6612 501 M
0 1487 V
5473 501 M
0 1506 V
4333 501 M
0 1736 V
3194 501 M
0 2372 V
2055 501 M
0 3275 V
LTb
6234 4476 M
(Sort) Rshow
LT1
6354 4476 M
360 0 V
6042 501 M
0 1241 V
4903 501 M
0 1088 V
3764 501 M
0 1243 V
2624 501 M
0 1633 V
1485 501 M
0 2017 V
6327 501 M
0 929 V
5188 501 M
0 1019 V
4049 501 M
0 927 V
2909 501 M
0 1283 V
1770 501 M
0 1643 V
6612 501 M
0 886 V
5473 501 M
0 910 V
4333 501 M
0 889 V
3194 501 M
0 1252 V
2055 501 M
0 1658 V
LTb
6234 4276 M
(Distribute) Rshow
LT2
6354 4276 M
360 0 V
6042 501 M
0 1182 V
4903 501 M
0 1024 V
3764 501 M
0 1181 V
2624 501 M
0 1572 V
1485 501 M
0 1956 V
6327 501 M
0 865 V
5188 501 M
0 956 V
4049 501 M
0 864 V
2909 501 M
0 1219 V
1770 501 M
0 1580 V
6612 501 M
0 821 V
5473 501 M
0 845 V
4333 501 M
0 824 V
3194 501 M
0 1187 V
2055 501 M
0 1593 V
LTb
6234 4076 M
(Read) Rshow
LT3
6354 4076 M
360 0 V
6042 501 M
0 727 V
4903 501 M
0 526 V
3764 501 M
0 728 V
2624 501 M
0 1091 V
1485 501 M
0 1564 V
6327 501 M
0 865 V
5188 501 M
0 956 V
4049 501 M
0 864 V
2909 501 M
0 1219 V
1770 501 M
0 1580 V
6612 501 M
0 821 V
5473 501 M
0 845 V
4333 501 M
0 824 V
3194 501 M
0 1187 V
2055 501 M
0 1593 V
stroke
grestore
end
showpage
%%EndDocument

 endTexFig
 0 708 a Fk(Figure)13 b(5:)46 b Fh(Comparison)12 b(of)i(Algorithms.)27
b Fj(The)13 b(left-most)h(bar)0 749 y(of)e(eac)o(h)f(gr)n(oup)g(shows)f
(the)i(performance)d(br)o(eakdown)g(of)j(the)g(syn-)0
791 y(c)o(hr)n(onous)e(implementation,)i(the)f(middle-bar)g(the)h
(interleaved)d(im-)0 832 y(plementation,)17 b(and)f(the)g(right-most)g
(bar)f(the)h(thr)o(eaded)d(version.)0 874 y(F)l(or)h(the)h(interleaved)
f(and)g(thr)o(eaded)f(versions,)h(r)o(ead)g(and)g(distri-)0
915 y(b)o(ution)f(time)g(is)g(collapsed)e(into)i(the)g(r)o(ead)e(cate)o
(gory)n(.)22 b(The)12 b(Hybrid)0 957 y(implementation)f(r)o(eads)e(fr)n
(om)i(two)g(fast-wide)g(disks,)g(and)f(writes)h(to)0
998 y(all)f(four)e(disks.)0 1122 y Fk(and)14 b(the)h(I/O)h(b)o(us,)g
(are)f(under)o(-utilized.)31 b(In)16 b(this)f(subsection,)g(we)0
1164 y(e)o(v)o(aluate)10 b(three)i(v)o(ersions)f(of)h(the)f(one-pass)f
(parallel)i(sort)g(that)g(v)o(ary)0 1205 y(the)c(de)o(gree)g(to)h
(which)f(the)o(y)g(o)o(v)o(erlap)g(disk)g(I/O)i(and)d(communication.)56
1247 y Fh(Synchr)o(onous:)12 b Fk(In)e(the)f(synchronous)e(v)o(ersion)i
(each)f(processor)0 1288 y(reads,)k(communicates,)f(sorts,)h(and)f
(then)g(writes,)j(with)e(no)f(o)o(v)o(erlap)0 1330 y(across)f(the)g
(four)i(steps.)18 b(Each)10 b(b)o(uf)o(fer)i(contains)d
Fg(\017)g Fc(\003)h Fg(N)q(=P)16 b Fk(records,)0 1371
y(where)7 b Fg(\017)h Fk(is)g(an)f(e)o(xpansion)f(factor)i(related)g
(to)g(the)f(distrib)o(ution)i(of)f(ke)o(y)0 1413 y(v)o(alues.)25
b(The)13 b(dra)o(wback)f(of)i(a)f(straight-forward)h(implementation)0
1454 y(is)h(that)g(it)h(requires)f(twice)g(as)g(much)f(memory)h(as)f
(the)h(records)f(to)0 1496 y(be)d(sorted:)18 b(one)11
b(b)o(uf)o(fer)h(is)g(needed)e(for)i(the)f(records)g(read)g(and)g(sent)
0 1537 y(by)j(a)f(processor)g(and)g(another)g(b)o(uf)o(fer)i(is)f
(needed)e(for)j(the)f(records)0 1579 y(recei)o(v)o(ed.)20
b(Our)12 b(implementation)g(reserv)o(es)f(only)g(one)g(e)o(xtra)h(b)o
(uf)o(fer)0 1620 y(for)k(communication)e(\()p Fj(i.e)o(.)p
Fk(,)19 b Fg(P)e Ff(+)12 b Fk(1)j(b)o(uf)o(fers\),)k(b)o(ut)c(requires)
g(e)o(xtra)0 1662 y(synchronization)c(across)g(processors.)22
b(On)13 b(iteration)h Fg(i)p Fk(,)g(processor)0 1703
y Fg(p)d Fk(sends)e(to)i(processor)e Ff(\()p Fg(p)g Ff(+)g
Fg(i)p Ff(\))i Fk(mod)f Fg(P)5 b Fk(,)11 b(to)g(minimize)g(contention.)
0 1745 y(After)k(sending)d(the)i(complete)f(b)o(uf)o(fer)i(to)f(the)g
(\256rst)g(processor)o(,)g(the)0 1786 y(processors)e(synchronize,)i
(waiting)g(until)h(the)f(records)f(ha)o(v)o(e)h(been)0
1828 y(recei)o(v)o(ed.)32 b(These)14 b(steps)g(continue)h(until)h(all)g
(records)f(ha)o(v)o(e)g(been)0 1869 y(distrib)o(uted.)56
1911 y Fh(Interlea)o(ved:)f Fk(The)c(second)e(implementation)j
(alternates)e(read-)0 1952 y(ing)h(and)f(communicating,)g(using)h(one)f
(thread.)15 b(As)10 b(before,)g(there)g(is)0 1994 y(a)d(send-b)o(uf)o
(fer)g(for)h(each)e(destination,)i(b)o(ut)f(no)o(w)g(it)i(is)e(relati)o
(v)o(ely)h(small)0 2035 y(\(4)15 b(KB)f(in)g(the)g(current)h
(implementation\).)29 b(Rather)14 b(than)f(waiting)0
2077 y(until)8 b(all)g(records)f(ha)o(v)o(e)g(been)f(read,)i(records)f
(are)g(sent)g(after)h(the)f(send-)0 2118 y(b)o(uf)o(fer)14
b(is)f(full.)27 b(Alternating)14 b(reading)e(and)h(sending)e(not)j
(only)e(has)0 2160 y(the)e(adv)o(antage)e(of)i(o)o(v)o(erlapping)g
(both,)g(b)o(ut)g(also)g(uses)e(less)i(memory)0 2201
y(and)i(is)h(more)f(rob)o(ust)h(to)g(the)f(distrib)o(ution)i(of)f(ke)o
(y)f(v)o(alues)f(than)i(the)0 2243 y(synchronous)t(v)o(ersion.)g(This)7
b(algorithm)h(only)f(synchronizes)e(across)0 2284 y(processors)k(once,)
i(ensuring)e(that)j(all)f(records)g(ha)o(v)o(e)f(been)g(sent)g(and)0
2326 y(recei)o(v)o(ed,)f(before)f(be)o(ginning)h(the)g(in-core)g(sort.)
56 2367 y Fh(Thr)o(eaded:)18 b Fk(The)11 b(\256nal)h(implementation)f
(also)h(o)o(v)o(erlaps)f(read-)0 2409 y(ing)f(and)g(sending,)f(b)o(ut)i
(uses)e(two)h(threads.)16 b(A)11 b Fj(r)o(eader)o(-thr)o(e)o(ad)c
Fk(reads)0 2450 y(the)17 b(records)g(and)f(mo)o(v)o(es)h(them)h(into)f
(local)g(send-b)o(uf)o(fers)g(and)g(a)0 2492 y Fj(communicator)o(-thr)o
(ead)8 b Fk(sends)g(and)i(recei)o(v)o(es)g(messages.)15
b(T)m(wo)10 b(sets)0 2533 y(of)e(send-b)o(uf)o(fers)e(no)o(w)h(e)o
(xist)h(for)g(each)e(destination;)i(when)f(the)g(reader)0
2575 y(\256nishes)h(\256lling)i(an)o(y)f(of)g(the)g(b)o(uf)o(fers)h(in)
g(the)f(set,)g(it)i(signals)d(the)h(com-)0 2616 y(municator)g(which)f
(sends)g(all)i(of)f(the)g(records)f(in)i(the)f(current)g(set.)56
2658 y(Our)16 b(measurements,)f(sho)o(wn)f(in)h(Figure)g(5,)j(found)c
(that)i(with)0 2700 y(only)9 b(one)g(or)h(two)f(disks)g(per)h(node,)f
(the)g(interlea)o(v)o(ed)h(v)o(ersions)e(\(both)1037
4 y
 14208860 9804108 3289088 3289088 26970521 19866091 startTexFig
 1037 4 a
%%BeginDocument: Graphs/ParallelInternalScaling.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -66 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Helvetica findfont 200 scalefont setfont
newpath
LTa
1200 501 M
5697 0 V
LTb
1200 501 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(0) Rshow
1200 945 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(2) Rshow
1200 1389 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(4) Rshow
1200 1832 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(6) Rshow
1200 2276 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(8) Rshow
1200 2720 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(10) Rshow
1200 3164 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(12) Rshow
1200 3608 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(14) Rshow
1200 4051 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(16) Rshow
1200 4495 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(18) Rshow
1200 4939 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(20) Rshow
1200 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(1) Cshow
2153 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(2) Cshow
3106 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(4) Cshow
4059 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(8) Cshow
5012 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(16) Cshow
5966 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(32) Cshow
1200 501 M
5697 0 V
0 4438 V
-5697 0 V
0 -4438 V
200 2720 M
currentpoint gsave translate 90 rotate 0 0 M
(Time \(seconds\)) Cshow
grestore
4048 101 M
(Processors) Cshow
3364 3652 M
(624 MB, 13.2 secs) Lshow
5019 3164 M
(1.15 GB, 10.9 secs) Lshow
LT0
6234 4676 M
(4 disks, 128 MB \(Sort and GLUnix\)) Rshow
6354 4676 M
360 0 V
1200 3186 M
953 78 V
953 51 V
953 120 V
6474 4676 D
1200 3186 D
2153 3264 D
3106 3315 D
4059 3435 D
LT1
6234 4476 M
(4 disks, 128 MB \(Sort, No GLUnix\)) Rshow
6354 4476 M
360 0 V
1200 3078 M
953 95 V
953 25 V
953 116 V
6474 4476 A
1200 3078 A
2153 3173 A
3106 3198 A
4059 3314 A
LT2
6234 4276 M
(2 disks, 64 MB \(Sort and GLUnix\)) Rshow
6354 4276 M
360 0 V
1200 2631 M
953 22 V
953 134 V
953 6 V
953 38 V
954 89 V
6474 4276 B
1200 2631 B
2153 2653 B
3106 2787 B
4059 2793 B
5012 2831 B
5966 2920 B
LT3
6234 4076 M
(2 disks, 64 MB \(Sort, No GLUnix\)) Rshow
6354 4076 M
360 0 V
1200 2543 M
953 -1 V
953 140 V
953 -12 V
953 19 V
954 -9 V
6474 4076 C
1200 2543 C
2153 2542 C
3106 2682 C
4059 2670 C
5012 2689 C
5966 2680 C
stroke
grestore
end
showpage
%%EndDocument

 endTexFig
 1025 708 a Fk(Figure)e(6:)24 b Fh(Scalability)7 b(of)g(the)g(One-Pass)
t(Parallel)f(Sort.)13 b Fj(360,000)1025 749 y(r)o(ecor)o(ds)7
b(per)j(pr)n(ocessor)e(\(37)j(MB\))g(ar)o(e)f(sorted)g(on)g(the)h
(cluster)f(with)1025 791 y(two)e(disks)e(and)h(64)g(MB)g(of)h(memory)e
(per)h(mac)o(hine)o(.)12 b(800,000)7 b(r)o(ecor)o(d)o(s)1025
832 y(per)h(pr)n(ocessor)e(\(78)k(MB\))f(ar)o(e)f(sorted)g(with)i(four)
f(disks)f(and)h(128)f(MB)1025 874 y(of)h(memory)f(per)g(mac)o(hine)o(.)
1025 998 y Fk(single)g(and)g(dual)h(threaded\))f(outperform)i(the)e
(synchronous)f(v)o(ersion)1025 1039 y(by)g(roughly)g(10)h(\045.)13
b(T)m(wo)7 b(threads)g(perform)i(slightly)f(better)g(than)f(one)1025
1081 y(because)g(the)o(y)k(are)f(better)g(able)g(to)g(stagger)g(read)f
(and)h(send)f(requests)1025 1122 y(smoothly)g(o)o(v)o(er)i(time.)17
b(W)o(ith)10 b(more)g(disks,)g(the)g(dif)o(ference)g(between)1025
1164 y(the)k(synchronous)e(and)i(o)o(v)o(erlapped)f(v)o(ersions)h
(diminishes.)29 b(W)o(ith)1025 1205 y(four)12 b(disks)g(in)g(the)g
(system,)h(all)f(three)h(algorithms)f(perform)h(nearly)1025
1247 y(identically)n(.)1081 1288 y(Interestingly)n(,)k(the)f(interlea)o
(v)o(ed)f(v)o(ersions)g(actually)g(read)h(at)f(a)1025
1330 y(slo)o(wer)6 b(rate)h(with)g(four)f(disks)g(than)g(with)h(only)f
(two)g(7200)f(RPM)i(disks.)1025 1371 y(The)g(reduction)h(occurs)f
(because)f(the)i(UltraSP)m(ARC)g(I/O)h(Bus,)g(the)f(S-)1025
1413 y(Bus,)j(is)g(saturated)f(long)g(before)h(its)g(theoretical)g
(peak)f(of)h(80)g(MB/s.)1025 1454 y(W)m(e)j(\256nd)g(that)h(we)f(are)g
(able)g(to)g(read)g(only)g(about)g(13)g(MB/s)g(from)1025
1496 y(the)c(four)h(disks,)g(while)f(simultaneously)f(sending)g(and)h
(recei)o(ving)g(at)1025 1537 y(approximately)5 b(11.5)h(MB/s,)i(for)f
(an)e(aggre)o(gate)g(of)i(36)f(MB/s)h(o)o(v)o(er)f(the)1025
1579 y(S-Bus.)13 b(T)m(o)8 b(make)f(good)h(use)f(of)i(four)g(disks)e
(capable)g(of)i(transferring)1025 1620 y(20)h(MB/s,)i(the)e(S-Bus)g
(would)g(need)f(to)i(be)f(able)g(to)h(sustain)f(roughly)1025
1662 y(60)f(MB/s)g(aggre)o(gate.)1081 1703 y(Due)h(to)g(the)g(limited)h
(bandwidth)e(of)i(the)f(S-Bus,)g(we)g(found)g(that)1025
1745 y(a)i Fj(hybrid)g Fk(system)g(has)g(the)g(best)h(performance)e
(when)h(interlea)o(ving)1025 1786 y(reading)6 b(and)g(communication.)11
b(The)6 b(hybrid)g(system)g(reads)g(from)h(the)1025 1828
y(two)g(disks)f(on)h(the)g(fast-wide)g(b)o(us,)g(and)f(writes)i(to)g
(all)f(four)n(.)14 b(The)6 b(write)1025 1869 y(phase)i(still)k
(pro\256ts)d(from)i(four)g(disks)e(since)g(there)h(is)h(no)e
(concurrent)1025 1911 y(communication,)d(and)h(hence)e(the)i(I/O)h(b)o
(us)f(is)g(de)o(v)o(oted)f(solely)g(to)i(disk)1025 1952
y(acti)o(vity)n(.)13 b(Since)8 b(the)g(threaded)f(parallel)h(sort)h
(equals)e(or)h(outperforms)1025 1994 y(the)j(other)g(implementations,)h
(we)f(focus)f(on)h(it)i(e)o(xclusi)o(v)o(ely)d(for)i(the)1025
2035 y(remainder)d(of)g(our)g(e)o(xperiments.)1025 2131
y Fl(5.2)40 b(Discussion)1025 2198 y Fk(Our)12 b(one-pass)e(parallel)j
(NO)o(W)n(-Sort)f(is)h(almost)f(perfectly)g(scalable)1025
2240 y(as)g(the)i(number)e(of)i(processors)d(is)i(increased)f(and)g
(the)h(number)g(of)1025 2281 y(records)6 b(per)h(processor)f(is)i(kept)
e(constant,)h(as)f(sho)o(wn)g(in)i(Figure)f(6.)13 b(In)1025
2323 y(other)8 b(words,)g(we)g(can)f(sort)h(twice)g(as)g(man)o(y)g(ke)o
(ys)f(in)h(about)f(the)h(same)1025 2364 y(amount)g(of)i(time)g(by)f
(simply)g(doubling)f(the)i(number)e(of)i(processors.)1025
2406 y(The)j(slight)h(increase)f(in)h(time)g(with)h(the)e
Fg(P)19 b Fk(is)14 b(mostly)g(due)f(to)h(the)1025 2447
y(o)o(v)o(erhead)e(of)i(GLUnix)o(,)h(our)e(distrib)o(uted)h(operation)e
(system.)25 b(Re-)1025 2489 y(mote)11 b(process)f(start-up)i(increases)
e(with)i(more)g(processors,)f(taking)1025 2530 y(approximately)e(0.6)g
(seconds)e(on)i(eight)h(nodes)e(and)h(1.1)g(seconds)f(on)1025
2572 y(32.)1081 2613 y(Our)j(performance)f(on)g(the)h(Datamation)f
(benchmark)f(is)i(sho)o(wn)1025 2655 y(in)16 b(Figure)g(7.)34
b(Each)15 b(processor)g(sorts)h(an)f(equal)h(portion)g(of)g(the)1025
2696 y(one)d(million)j(records,)f(so)e(as)h(more)g(processors)e(are)i
(added,)h(each)p eop
%%Page: 8 8
8 7 bop 13 4 a
 14208860 9804108 3289088 3289088 26970521 19866091 startTexFig
 13 4 a
%%BeginDocument: Graphs/ParallelInternalDatamationBoth.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -66 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Helvetica findfont 200 scalefont setfont
newpath
LTa
1200 501 M
5697 0 V
LTb
1200 501 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(0) Rshow
1200 1389 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(2) Rshow
1200 2276 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(4) Rshow
1200 3164 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(6) Rshow
1200 4051 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(8) Rshow
1200 4939 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(10) Rshow
1200 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(1) Cshow
2237 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(2) Cshow
3275 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(4) Cshow
4312 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(8) Cshow
5349 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(16) Cshow
6387 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(32) Cshow
1200 501 M
5697 0 V
0 4438 V
-5697 0 V
0 -4438 V
200 2720 M
currentpoint gsave translate 90 rotate 0 0 M
(Time \(seconds\)) Cshow
grestore
4048 101 M
(Processors) Cshow
4349 1766 M
(2.92) Lshow
4349 1500 M
(2.30) Lshow
6455 1548 M
(2.41) Lshow
6455 1056 M
(1.29) Lshow
1343 2187 M
(SGI Record \(3.52\)) Lshow
LT0
6234 4676 M
(128 MB, 4 Disks \(Sort and GLUnix\)) Rshow
6354 4676 M
360 0 V
2237 4611 M
3275 2653 L
4312 1797 L
6474 4676 D
2237 4611 D
3275 2653 D
4312 1797 D
LT1
6234 4476 M
(128 MB, 4 Disks \(Sort, No GLUnix\)) Rshow
6354 4476 M
360 0 V
2237 4368 M
3275 2417 L
4312 1522 L
6474 4476 A
2237 4368 A
3275 2417 A
4312 1522 A
LT2
1200 2063 M
5697 0 V
LT3
6234 4276 M
(64 MB, 2 Disks \(Sort and GLUnix\)) Rshow
6354 4276 M
360 0 V
3275 3474 M
4312 2329 L
5349 1837 L
6387 1571 L
6474 4276 B
3275 3474 B
4312 2329 B
5349 1837 B
6387 1571 B
LT4
6234 4076 M
(64 MB, 2 Disks \(Sort, No GLUnix\)) Rshow
6354 4076 M
360 0 V
3275 3277 M
4312 2051 L
5349 1501 L
6387 1073 L
6474 4076 C
3275 3277 C
4312 2051 C
5349 1501 C
6387 1073 C
LT5
1200 2063 M
5697 0 V
stroke
grestore
end
showpage
%%EndDocument

 endTexFig
 0 708 a Fk(Figure)14 b(7:)47 b Fh(P)o(erf)o(ormance)12
b(on)i(the)g(Datamation)g(Benchmark.)0 749 y Fj(The)c(gr)o(aph)g(shows)
g(the)h(time)h(to)f(sort)g(1)g(Million)h(r)o(ecor)o(ds)c(with)k(four)0
791 y(disks)6 b(and)h(128)g(MB)h(per)e(pr)n(ocessor)t(and)h(with)h(two)
g(disks)e(and)h(64)g(MB)0 832 y(per)12 b(pr)n(ocessor)-5
b(.)22 b(Data)13 b(points)f(ar)o(e)f(not)i(shown)f(when)f(one)h
(million)0 874 y(r)o(ecor)o(ds)6 b(will)k(not)f(\256t)h(in)f(the)g
(available)f(memory)n(.)0 998 y Fk(node)k(sorts)i(fe)o(wer)g(records.)
26 b(W)o(ith)14 b(the)f(resulting)h(small)g(problem)0
1039 y(sizes,)g(remote)g(process)e(start-up)i(is)g(a)g(signi\256cant)e
(portion)i(of)g(our)0 1081 y(total)h(sorting)f(time.)30
b(In)15 b(fact,)h(on)e(32)g(processors,)g(the)g(total)h(time)0
1122 y(is)h(almost)f(equally)f(di)o(vided)h(between)f(process)g
(start-up)i(and)e(our)0 1164 y(application.)i(Ho)o(we)o(v)o(er)o(,)10
b(this)h(is)f(probably)g(more)g(a)g(function)g(of)h(the)0
1205 y(lack)f(of)h(maturity)g(of)g(our)g(o)o(wn)f(cluster)g(OS,)h(than)
f(the)g(fundamental)0 1247 y(costs)j(of)h(a)g(distrib)o(uted)h
(operating)e(system,)i(and)e(is)h(currently)h(the)0 1288
y(focus)8 b(of)i(optimization.)56 1330 y(Interestingly)n(,)f(process)f
(start-up)i(can)e(also)h(be)f(time-consuming)0 1371 y(on)15
b(SMPs:)26 b(both)15 b([26])h(and)e([30])i(indicate)f(that)h
Fd(bzero)r Fk('ing)g(the)0 1413 y(address-space)10 b(is)j(a)f
(signi\256cant,)h(if)h(not)f(dominant,)h(cost)e(for)i(one-)0
1454 y(pass)h(e)o(xternal)h(sorts,)i(most)e(likely)g(because)e(the)i
(SMP)g(OS)g(does)0 1496 y(not)11 b(parallelize)f(the)h(process.)17
b(On)10 b(NO)o(Ws,)i(this)f(aspect)e(of)i(process)0 1537
y(creation)j(is)g(not)g(a)g(problem,)h(since)e(each)g(local)h(address)e
(space)g(is)0 1579 y(initialized)e(in)f(parallel.)56
1620 y(The)i(parallel)i(single-pass)d(sort)i(re)o(v)o(ealed)g(another)f
(I/O-system)0 1662 y(bottleneck)f(in)h(the)g(UltraSP)m(ARC)g(I)h
(architecture:)17 b(the)10 b(S-Bus.)19 b(Be-)0 1703 y(cause)5
b(the)h(S-Bus)h(can)e(achie)o(v)o(e)h(only)g(about)g(36)g(MB/s,)i(a)e
(workstation)0 1745 y(can)11 b(not)g(ef)o(fecti)o(v)o(ely)h(use)f(more)
h(than)f(two)g(disks)g(when)f(simultane-)0 1786 y(ously)i
(communicating)g(o)o(v)o(er)i(the)f(network.)25 b(T)m(o)13
b(remain)g(a)g(viable)0 1828 y(alternati)o(v)o(e)k(to)f(SMPs,)i
(UltraSP)m(ARC)f(I/O)g(bandwidth)e(must)h(im-)0 1869
y(pro)o(v)o(e)9 b(dramatically)g(or)o(,)g(more)g(radically)n(,)g(pro)o
(vide)g(communication)0 1911 y(o)o(v)o(er)h(the)e(memory)h(b)o(us)g
(without)g(coherence.)i(The)e(corollary)g(to)g(this)0
1952 y(suggests)e(that)i(a)g(system)f(with)h(two)g(disks)f(on)g(a)h
(fast-wide)g(SCSI)g(b)o(us)0 1994 y(is)g(the)g(sweet-spot)f(in)i(the)f
(cost/performance)e(curv)o(e.)56 2035 y(In)g(conclusion,)e(we)i(found)f
(de)o(v)o(eloping)f(the)h(parallel)h(single-pass)0 2077
y(sort)14 b(to)h(be)f(a)f(natural)i(e)o(xtension)e(from)i(the)f
(single-node)e(v)o(ersion:)0 2118 y(the)i(lessons)e(described)h(in)i
(the)f(pre)o(vious)f(section)g(re)o(garding)h(disk)0
2160 y(striping,)i(memory)e(management,)g(and)f(in-core)i(sorting)f
(were)g(all)0 2201 y(directly)e(applicable.)21 b(In)13
b(the)f(NO)o(W)g(en)o(vironment,)f(we)h(were)g(able)0
2243 y(to)j(isolate)g(performance)f(ef)o(fects)h(on)f(a)h(per)o
(-processor)e(basis;)18 b(the)0 2284 y(only)c(dif)o(ference)f(from)i
(the)f(single-node)e(v)o(ersion)i(was)f(additional)0
2326 y(communication)8 b(traf)o(\256c)i(o)o(v)o(er)h(the)e(S-Bus.)15
b(In)10 b(contrast,)f(we)h(belie)o(v)o(e)0 2367 y(that)h(in)g(an)f(SMP)
h(system)f(the)g(pooling)g(of)h(resources)f(obscures)e(this)0
2409 y(type)e(of)h(analysis.)12 b(Finally)n(,)7 b(the)f(Acti)o(v)o(e)h
(Message)e(interface)h(not)h(only)0 2450 y(pro)o(vided)13
b(high)g(bandwidth)f(and)h(lo)o(w)h(o)o(v)o(erhead)e(communication,)0
2492 y(b)o(ut)h(also)e(facilitated)i(an)f(algorithm)h(which)f(dif)o
(fered)h(only)f(slightly)0 2533 y(from)7 b(the)f(single-node)t(v)o
(ersion;)i(instead)d(of)h(copying)t(ke)o(ys)f(into)i(local)0
2575 y(b)o(uckets,)k(each)f(processor)g(no)o(w)i(copies)e(ke)o(ys)h
(into)h(b)o(uckets)e(spread)0 2616 y(across)e(processors.)1025
45 y Fl(6)40 b(Tw)o(o-P)o(ass)13 b(Single-No)q(de)e(So)o(rting)1025
125 y Fk(Ha)o(ving)c(described)f(the)i(one-pass)e(v)o(ersions)h(of)h
(NO)o(W)n(-Sort,)h(we)f(no)o(w)1025 167 y(detail)13 b(the)g(e)o
(xtensions)e(needed)g(for)j(a)f(single-node)e(when)h(there)h(is)1025
208 y(insuf)o(\256cient)g(memory)h(and)f(two)h(passes)e(must)i(be)g
(made)f(o)o(v)o(er)h(the)1025 250 y(records.)23 b(As)13
b(described)e(in)i(Section)f(4.1.3,)i(we)e(use)g(our)g(memory)1025
291 y(con\256guration)c(tool)i(to)g(determine)g(the)f(amount)g(of)i(a)o
(v)o(ailable)e(mem-)1025 333 y(ory)h(so)f(that)h(we)f(can)g(choose)f
(between)g(the)i(one-pass)e(and)h(two-pass)1025 374 y(algorithms.)1072
454 y(1.)18 b Fh(Cr)o(eate)g(Runs:)31 b Fk(The)18 b(one-pass)e(sort)j
(\()p Fh(Read)p Fk(,)h Fh(Sort)p Fk(,)h(and)1118 496
y Fh(Write)p Fk(\))8 b(is)g(repeated)e(to)h(create)g(multiple)h(sorted)
f(runs)g(on)f(disk.)1072 567 y(2.)18 b Fh(Merge:)g Fk(In)12
b(this)g(ne)o(w)g(phase,)f(the)h(sorted)f(runs)h(are)g(mer)o(ged)1118
608 y(into)e(a)f(single)f(sorted)h(\256le.)1081 688 y
Fh(Cr)o(eate)j(Sorted)f(Runs:)20 b Fk(In)13 b(the)f(\256rst)h(phase,)f
(two)g(threads)f(are)1025 730 y(created:)i(a)c Fj(r)o(eader)o(-thr)o
(ead)d Fk(and)j(a)g Fj(writer)o(-thr)o(ead)p Fk(.)k(A)m(v)o(ailable)c
(mem-)1025 771 y(ory)j(\()p Fg(M)t Fk(\))i(is)e(di)o(vided)g(into)h
Fg(B)1427 775 y Fe(c)1456 771 y Fk(b)o(uf)o(fers,)h(where)e
Fg(B)1716 775 y Fe(c)1744 771 y Fk(equals)f(one)h(or)1025
813 y(two,)i(depending)c(upon)i(whether)g(the)h(reader)f(and)g(writer)i
(are)f(syn-)1025 854 y(chronous)6 b(or)j(o)o(v)o(erlapped,)e(as)h
(discussed)d(in)k(the)f(ne)o(xt)g(section.)k(Each)1025
896 y(run)7 b(contains)f Fg(M)r(=B)1301 900 y Fe(c)1324
896 y Fk(records,)h(requiring)g Fg(R)k Ff(=)1710 880
y Fe(N)p 1681 887 85 2 v 1681 908 a(M)q(=B)1750 912 y
Fb(c)1777 896 y Fk(runs,)d(where)1025 944 y Fg(N)i Fk(is)d(the)f
(number)g(of)h(records.)12 b(The)6 b(reader)g(copies)f(the)i(records)e
(from)1025 986 y(disk)h(and)g(mo)o(v)o(es)g(ke)o(ys)f(and)h(pointers)g
(into)h(b)o(uckets,)e(and)h(then)g(signals)1025 1027
y(that)12 b(the)g(b)o(uf)o(fer)h(is)f(full.)23 b(The)12
b(reader)f(is)h(then)g(free)g(to)h(\256ll)f(the)g(ne)o(xt)1025
1069 y(empty)e(b)o(uf)o(fer)i(with)g(the)f(ne)o(xt)g(run.)19
b(The)11 b(writer)h(waits)f(for)h(a)e(b)o(uf)o(fer)1025
1110 y(to)h(be)g(\256lled,)h(sorts)f(each)f(b)o(ucket,)g(writes)i(the)f
(records)f(to)i(disk,)f(and)1025 1152 y(then)f(signals)f(that)h(the)g
(b)o(uf)o(fer)h(is)g(empty)n(.)16 b(This)10 b(process)e(is)i(repeated)
1025 1193 y(until)f(the)f Fg(R)h Fk(runs)f(are)h(sorted)f(and)f
(written)j(to)f(disk)f(as)f(separate)g(\256les.)1081
1235 y Fh(Merge)f(Sorted)f(Runs)o(.)10 b Fk(In)c(the)g(second)f(pha)o
(se)o(,)t(multiple)h(runs)g(are)1025 1276 y(mer)o(ged)j(into)g(a)g
(single)g(output)g(\256le.)14 b(Our)9 b(implementation)g(contains)1025
1318 y(three)i(threads:)17 b(a)11 b Fj(r)o(eader)p Fk(,)f(a)h
Fj(mer)o(ger)d Fk(,)k(and)f(a)g Fj(writer)p Fk(.)19 b(The)11
b(reader)o(-)1025 1359 y(thread)6 b(memory-maps)f(the)h
Fg(R)g Fk(run)h(\256les)e(and)h(reads)f(the)h(\256rst)g(chunk)f(of)1025
1401 y(records)i(from)i(each)e(run)h(into)g(one)f(of)i
Fg(B)1556 1405 y Fe(m)1593 1401 y Fk(sets)f(of)g Fg(R)h
Fk(mer)o(ge)e(b)o(uf)o(fers;)1025 1442 y Fg(B)1054 1446
y Fe(m)1090 1442 y Fk(may)f(be)g(one)g(or)h(two,)g(depending)e(upon)g
(whether)h(or)h(not)g(reading)1025 1484 y(and)h(mer)o(ging)h(are)g
(synchronous)e(or)i(o)o(v)o(erlapped,)g(also)f(discussed)f(in)1025
1525 y(the)g(ne)o(xt)f(section.)12 b(Prefetching)7 b(records)f(in)h
(lar)o(ge)g(chunks)e(\(currently)1025 1567 y(about)10
b(512)h(KB\))g(amortizes)g(the)g(seek)f(time)i(across)e(runs,)h(and)g
(thus)1025 1608 y(obtains)6 b(nearly)g(the)g(sa)o(me)g(rea)o(d)g(ba)o
(nd)o(widths)g(a)o(s)g(s)o(equ)o(ential)g(ac)o(ce)o(sse)o(s.)1025
1650 y(After)g(reading)g(the)g Fg(R)g Fk(b)o(uf)o(fers,)h(the)f(reader)
g(signals)g(to)g(the)g(mer)o(ger)g(that)1025 1692 y(these)g(b)o(uf)o
(fers)h(are)g(full,)i(and)d(continues)f(to)j(prefetch)e(into)i(the)f
(ne)o(xt)f(set)1025 1733 y(of)j(empty)g(mer)o(ge)g(b)o(uf)o(fers.)14
b(The)8 b(mer)o(ger)h(selects)f(the)h(lo)o(west-v)o(alued)1025
1775 y(ke)o(y)e(from)i(the)e(top)h(of)g(each)f(run,)h(and)g(copies)e
(the)i(record)f(into)i(a)e(write)1025 1816 y(b)o(uf)o(fer)n(.)27
b(When)13 b(the)h(write)g(b)o(uf)o(fer)h(is)e(full,)j(the)e(writer)h
(it)f(signaled,)1025 1858 y(which)8 b(writes)i(the)f(records)f(to)i
(disk.)1081 1899 y(Note)h(that)g(the)g(mer)o(ge)g(phase)e(is)i(an)g
(instance)f(where)g(we)h(found)1025 1941 y(that)d(a)h(simple)f
(implementation)g(using)f Fd(mmap)k Fk(and)c Fd(madvise)12
b Fk(does)1025 1982 y(not)e(attain)g(sequential)f(disk)h(performance.)
16 b(When)10 b(accessing)d(mul-)1025 2024 y(tiple)i(read)f(streams)f
(from)i(the)g(same)e(disk,)h Fd(mmap)i Fk(does)d(not)i(prefetch)1025
2065 y(data)15 b(in)g(suf)o(\256ciently)g(lar)o(ge)g(blocks)f(to)i
(amortize)f(the)g(seek)f(costs.)1025 2107 y(Thus,)j(our)e(mer)o(ge)h
(phase)e(must)i(e)o(xplicitly)h(manage)d(prefetching)1025
2148 y(with)c(multiple)f(threads)g(and)f(b)o(uf)o(fers.)1025
2244 y Fl(6.1)40 b(Exploiting)12 b(Overlap)1025 2311
y Fk(In)j(both)g(phases,)g(reading)g(from)h(disk)f(may)f(be)h(o)o(v)o
(erlapped)g(with)1025 2353 y(writing)h(and)f(with)h(computation.)31
b(As)16 b(in)f(the)h(one-pass)d(parallel)1025 2394 y(sort,)d(o)o(v)o
(erlapping)f(phases)e(by)i(pipelining)g(is)g(only)g(bene\256cial)f
(when)1025 2436 y(resources,)13 b(such)g(as)g(the)g(CPU)h(and)f(I/O)i
(b)o(us,)f(are)g(under)o(-utilized;)1025 2477 y(Ov)o(erlapping)9
b(no)o(w)g(has)f(additional)i(implications)f(for)h(the)g(layout)f(of)
1025 2519 y(records)d(across)g(disks)h(and)f(for)j(memory)e(usage,)f
(and)h(pipelining)g(one)1025 2560 y(phase)e(implies)j(pipelining)f
(both)f(phases,)g(since)g(the)h(output)g(from)h(the)1025
2602 y(\256rst)g(phase)e(is)i(the)f(input)h(of)g(the)g(second.)j
(Therefore,)d(we)f(in)o(v)o(estigate)1025 2643 y(the)h(impact)h(of)g
(run)g(length)g(and)f(the)g(layout)h(of)g(records)f(across)f(disks)1025
2685 y(on)i(both)f(phases.)p eop
%%Page: 9 9
9 8 bop 13 4 a
 14208860 9804108 3289088 3289088 26970521 19866091 startTexFig
 13 4 a
%%BeginDocument: Graphs/SingleExternalRunSize.128M.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid false def
/gnulinewidth 5.000 def
/vshift -66 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Helvetica findfont 200 scalefont setfont
newpath
LTa
1200 501 M
5697 0 V
LTb
1200 501 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(0) Rshow
1200 1056 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(10) Rshow
1200 1611 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(20) Rshow
1200 2165 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(30) Rshow
1200 2720 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(40) Rshow
1200 3275 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(50) Rshow
1200 3830 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(60) Rshow
1200 4384 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(70) Rshow
1200 4939 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(80) Rshow
1448 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(4\(53MB\)) Cshow
2438 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(8\(27MB\)) Cshow
3429 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(12\(18MB\)) Cshow
4420 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(16\(13MB\)) Cshow
5411 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(20\(11MB\)) Cshow
6402 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(24\(8.9MB\)) Cshow
1200 501 M
5697 0 V
0 4438 V
-5697 0 V
0 -4438 V
200 2720 M
currentpoint gsave translate 90 rotate 0 0 M
(Time \(seconds\)) Cshow
grestore
4048 101 M
(Number of Runs \(Run Size \(MB\)\)) Cshow
LT0
2438 1444 M
(Create Runs) Rshow
2558 1444 M
360 0 V
1609 4939 M
86 -2916 V
248 -32 V
248 -30 V
247 -48 V
248 -19 V
248 13 V
248 -18 V
247 -21 V
248 26 V
248 -28 V
247 7 V
248 -5 V
248 38 V
247 -12 V
248 2 V
248 -23 V
495 62 V
496 -9 V
495 -20 V
2678 1444 D
1695 2023 D
1943 1991 D
2191 1961 D
2438 1913 D
2686 1894 D
2934 1907 D
3182 1889 D
3429 1868 D
3677 1894 D
3925 1866 D
4172 1873 D
4420 1868 D
4668 1906 D
4915 1894 D
5163 1896 D
5411 1873 D
5906 1935 D
6402 1926 D
6897 1906 D
LT1
2438 1244 M
(Merge Runs) Rshow
2558 1244 M
360 0 V
1448 2019 M
247 -2 V
248 89 V
248 -49 V
247 -50 V
248 8 V
248 6 V
248 24 V
247 34 V
248 -35 V
248 38 V
247 9 V
248 13 V
248 73 V
247 568 V
248 158 V
248 30 V
495 289 V
496 52 V
495 127 V
2678 1244 A
1448 2019 A
1695 2017 A
1943 2106 A
2191 2057 A
2438 2007 A
2686 2015 A
2934 2021 A
3182 2045 A
3429 2079 A
3677 2044 A
3925 2082 A
4172 2091 A
4420 2104 A
4668 2177 A
4915 2745 A
5163 2903 A
5411 2933 A
5906 3222 A
6402 3274 A
6897 3401 A
LT2
2438 1044 M
(Total Time) Rshow
2558 1044 M
360 0 V
1654 4939 M
41 -1391 V
248 61 V
248 -75 V
247 -96 V
248 -13 V
248 20 V
248 9 V
247 17 V
248 -10 V
248 12 V
247 24 V
248 5 V
248 113 V
247 557 V
248 166 V
248 8 V
495 352 V
496 46 V
495 113 V
2678 1044 B
1695 3548 B
1943 3609 B
2191 3534 B
2438 3438 B
2686 3425 B
2934 3445 B
3182 3454 B
3429 3471 B
3677 3461 B
3925 3473 B
4172 3497 B
4420 3502 B
4668 3615 B
4915 4172 B
5163 4338 B
5411 4346 B
5906 4698 B
6402 4744 B
6897 4857 B
stroke
grestore
end
showpage
%%EndDocument

 endTexFig
 0 708 a Fk(Figure)10 b(8:)30 b Fh(Effect)10 b(of)h(Run)e(Size.)16
b Fj(Non-cumulative)9 b(time)h(for)g(both)0 749 y(phases)g(of)j(the)g
(two-phase)e(sort)h(ar)o(e)f(shown,)h(as)g(well)h(as)f(the)h(total)0
791 y(time,)8 b(for)f(2M)g(ke)o(ys)f(on)g(an)h(Ultr)o(aSP)m(ARC)g(1)g
(with)h(128)e(MB)h(of)h(memory)0 832 y(and)d(four)h(disks.)12
b(When)5 b(cr)o(eating)t(runs)g(in)i(phase)t(one,)f(eac)o(h)f(run)h
(must)0 874 y(\256t)i(in)h(memory)n(.)j(When)7 b(mer)o(ging)f(runs)h
(in)h(phase)f(two,)i(the)f(number)e(of)0 915 y(runs)i(should)g(be)g(17)
h(or)g(less.)56 1032 y Fh(Run)g(Length:)14 b Fk(The)9
b(synchronous)e(v)o(ersion)i(of)h(phase)e(one)h(uses)0
1074 y(all)15 b(of)f(memory)g(to)h(create)e(each)g(run;)k(thus,)f(it)f
(generates)e(half)h(as)0 1115 y(man)o(y)9 b(runs)g(as)g(the)g
(pipelined)g(v)o(ersion.)14 b(More)c(runs)f(may)g(adv)o(ersely)0
1157 y(af)o(fect)g(the)g(performance)f(of)h(the)f(mer)o(ge)h(phase,)f
(since)f(reading)i(from)0 1198 y(more)h(disk)f(streams)h(may)f(raise)h
(the)g(seek)e(time)j(be)o(yond)e(that)h(which)0 1240
y(we)15 b(hide)f(by)h(prefetching)f(lar)o(ge)i(chunks.)29
b(The)14 b(number)h(of)g(runs)0 1281 y(is)g(also)f(constrained)g(such)g
(that)h(there)g(e)o(xists)f(suf)o(\256cient)h(memory)0
1323 y(for)e(the)g(prefetch)f(b)o(uf)o(fers)h(of)g(each)e(run)i(in)g
(the)f(mer)o(ge)g(phase)f(\()p Fj(i.e)o(.)p Fk(,)0 1364
y(512)p Fg(k)q(b)d Fc(\001)g Fg(R)h Fc(\001)f Fg(B)207
1368 y Fe(m)247 1364 y Fg(<)j(M)t Fk(\).)56 1406 y Fh(Disk)16
b(Lay)o(out:)26 b Fk(The)15 b(synchronous)e(and)i(pipelined)g(v)o
(ersions)0 1447 y(must)g(manage)e(the)i(layout)g(of)h(records)e(across)
f(disks)i(dif)o(ferently)n(.)0 1489 y(T)m(o)9 b(maintain)h(sequential)e
(access,)g(each)g(disk)h(must)h(be)f(dedicated)f(to)0
1530 y(either)g(reading)f(or)h(writing)h(at)e(an)o(y)h(gi)o(v)o(en)f
(time.)14 b(Since)7 b(the)g(pipelined)0 1572 y(implementations)16
b(are)g(both)g(reading)f(and)h(writing)h(at)g(nearly)f(all)0
1613 y(times,)9 b(half)g(of)g(the)f(disks)g(must)g(be)g(used)g(for)h
(reading,)f(and)g(the)g(other)0 1655 y(half)h(for)g(writing.)14
b(The)8 b(synchronous)e(implementations)h(can)h(utilize)0
1696 y(all)k(the)f(disks)g(for)h(reading)f(and)f(then)h(all)h(of)g(the)
f(disks)g(for)h(writing.)0 1738 y(Thus,)i(when)e(both)h(phases)e(are)i
(synchronous,)f(the)h(input)h(\256le,)h(the)0 1779 y(temporary)e
(sorted)g(runs,)h(and)f(the)g(output)g(\256le)g(are)h(striped)f(across)
0 1821 y(all)f(disks;)g(when)e(both)h(phases)e(are)i(pipelined,)h(each)
e(\256le)h(is)g(striped)0 1862 y(across)h(only)h(half)g(the)g(disks.)25
b(When)13 b(one)f(phase)g(is)h(synchronous)0 1904 y(b)o(ut)e(the)g
(other)h(is)f(not,)h(the)f(synchronous)d(phase)i(suf)o(fers)h(because)d
(it)0 1945 y(can)i(only)g(use)g(that)h(half)g(of)g(the)g(disks)e
(employed)g(by)i(the)f(pipelined)0 1987 y(phase.)56 2028
y(Measurements)e(on)g(both)h(two-disk)g(and)g(four)o(-disk)h(systems)e
(re-)0 2070 y(v)o(eal)13 b(that)g(the)h(best)e(two-pass)g(single-node)g
(v)o(ersion)g(occurs)g(when)0 2111 y(both)j(phases)f(are)h(pipelined.)
32 b(The)15 b(pipelined)g(mer)o(ge)g(phase)f(e)o(x-)0
2153 y(hibits)f(a)f(dramatic)g(impro)o(v)o(ement)g(o)o(v)o(er)h(the)f
(synchronous)e(v)o(ersion)0 2194 y(because)g(it)k(ef)o(fecti)o(v)o(ely)
f(prefetches)e(lar)o(ge)i(chunks)e(of)i(each)e(mer)o(ge)0
2236 y(run)i(and)f(hides)f(the)i(cost)f(of)h(seeking.)23
b(The)12 b(pipelined)g(mer)o(ge)g(im-)0 2277 y(pro)o(v)o(es)h(slightly)
h(when)f(the)g(\256rst)h(phase)d(is)j(synchronous,)e(since)g(it)0
2319 y(has)7 b(fe)o(wer)h(runs)f(to)h(mer)o(ge;)g(ho)o(we)o(v)o(er)o(,)
f(the)h(penalty)f(to)h(the)f(\256rst)h(phase)0 2360 y(of)k(e)o(x)o
(ecuting)g(synchronously)d(while)j(only)g(writing)h(to)g(half)f(of)h
(the)0 2402 y(disks)8 b(outweighs)g(this)h(impro)o(v)o(ement.)0
2498 y Fl(6.2)41 b(Determining)12 b(Run)i(Size)0 2565
y Fk(W)o(ithin)9 b(the)f(pipelined)g(algorithm,)i(the)e
Fj(length)g Fk(of)h(each)e(run)i(impacts)0 2606 y(the)j(performance)f
(of)h(the)g(\256rst)h(phase,)e(while)h(the)g Fj(number)e
Fk(of)j(runs)0 2648 y(impacts)i(the)f(second)g(phase.)29
b(In)16 b(this)f(section,)h(we)f(determine)g(a)0 2689
y(compromise)6 b(in)h(the)g(number)f(of)i(runs)e(and)h(their)g(lengths)
f(that)i(results)1025 45 y(in)g(good)f(performance)g(for)h(both)g
(phases.)j(The)c(tension)g(between)f(the)1025 87 y(two)j(phases)f(when)
g(sorting)i(a)f(\256x)o(ed)g(amount)g(of)h(data)f(and)g(changing)1025
128 y(the)g(number)f(of)i(runs)e(is)i(sho)o(wn)e(in)h(Figure)g(8.)1081
170 y(When)h(fe)o(w)h(runs)g(are)f(created)g(\(four)i(or)f(less\),)h
(the)e(time)i(for)f(the)1025 211 y(\256rst)i(phase)f(is)h(lar)o(ge)g
(since)f(the)h(size)g(of)g(each)f(run)h(is)h(greater)f(than)1025
253 y(the)f(amount)f(of)h(a)o(v)o(ailable)f(memory)h(\()p
Fg(M)r(=B)1631 257 y Fe(c)1647 253 y Fk(\);)i(thus,)f(the)e(memory)1025
294 y(manager)c(pages)g(data)h(to)h(and)f(from)h(disk.)k(Be)o(yond)8
b(the)g(point)h(where)1025 336 y(each)g(run)h(\256ts)g(in)g(memory)n(,)
g(the)g(time)g(for)h(the)f(\256rst)g(phase)f(continues)1025
377 y(to)g(drop)f(slightly)h(as)f(the)g(run)h(size)f(decreases,)e(due)i
(to)g(the)h(lo)o(wer)g(cost)1025 419 y(of)k(\256lling)g(and)f(draining)
h(the)g(read/write)g(pipeline.)25 b(That)12 b(is,)j(with)1025
460 y(less)7 b(data)g(per)h(run,)g(the)g(time)h(the)e(writer)j(must)d
(wait)h(for)h(the)f(reader)f(to)1025 502 y(read)h(the)g(\256rst)h(run)g
(decreases,)d(and)h(the)i(time)g(for)g(the)g(writer)g(to)g(write)1025
543 y(the)g(last)g(run)g(decreases.)1081 585 y(Con)o(v)o(ersely)n(,)14
b(as)f(the)h(number)g(of)h(runs)f(increases)e(up)i(through)1025
626 y(17,)c(the)f(time)i(for)g(the)e(second)f(phase)g(increases.)14
b(The)9 b(mer)o(ge)h(phase)1025 668 y(reads)d(records)h(from)h(disk)e
(in)i(512)e(KB)i(chunks)d(to)j(amortize)f(the)g(cost)1025
709 y(of)14 b(seeking)e(across)g(independent)g(runs,)j(creating)e(a)g
(similar)i(start-)1025 751 y(up)8 b(ef)o(fect.)14 b(The)9
b(start-up)g(time)h(increases)d(with)j(the)f(number)f(of)i(runs)1025
792 y(because)s(the)c(reader)g(prefetches)f(a)h(\256x)o(ed)f(chunk)g
(for)i(each)e(of)h(the)g(runs.)1025 834 y(The)j(net)h(result)g(between)
e(the)i(\252memory)f(wall\272)g(and)g(17)h(runs)f(is)h(that)1025
875 y(increasing)f(the)i(number)f(of)h(runs)g(for)g(a)g(gi)o(v)o(en)g
(problem)f(set)h(has)f(no)1025 917 y(o)o(v)o(erall)i(ef)o(fect)f(on)f
(performance,)h(slightly)h(decreasing)c(the)j(time)h(to)1025
958 y(generate)7 b(the)i(runs,)g(while)g(increasing)e(the)i(time)g(to)g
(mer)o(ge)g(the)f(runs.)1025 1000 y(After)g(17)f(runs,)h(performance)e
(de)o(grades)g(rather)h(sharply)g(again,)g(with)1025
1041 y(mer)o(ge)j(time)h(increasing)e(by)h(30)g(to)h(50)f(percent.)16
b(Currently)n(,)11 b(we)f(are)1025 1083 y(not)k(sure)g(of)g(the)g
(cause)e(of)j(this)f(beha)o(vior)o(,)h(b)o(ut)f(suspect)f(that)h(it)h
(is)1025 1124 y(related)10 b(to)h(cache)e(performance,)i(since)e(the)i
(performance)e(drop-of)o(f)1025 1166 y(is)f(mirrored)h(by)f(an)f
(increase)g(in)h(user)o(-CPU)g(time,)h(and)e(not)h(disk-wait)1025
1207 y(time.)1025 1304 y Fl(6.3)40 b(Discussion)1025
1370 y Fk(W)m(e)10 b(conclude)e(by)i(summarizing)g(the)g(MinuteSort)h
(performance)e(of)1025 1412 y(the)d(two-pass)g(single-no)o(de)f(so)o
(rt)h(with)g(two)g(and)f(four)h(disk)o(s)f(in)h(T)m(ab)o(le)g(3.)1025
1453 y(The)11 b(time)i(for)f(the)g(mer)o(ge)g(phase)e(is)i(slightly)h
(lar)o(ger)f(than)g(the)g(time)1025 1495 y(to)f(create)f(the)g(runs)h
(because)d(the)i(records)g(are)h(di)o(vided)f(into)h(twelv)o(e)1025
1536 y(runs,)h(which)f(concurs)f(with)i(the)g(data)f(in)h(Figure)f(8.)
21 b(W)m(e)12 b(use)e(these)1025 1578 y(results)i(as)f(a)h(comparison)e
(case)h(for)i(the)f(two-pass)e(parallel)j(sort)f(in)1025
1619 y(the)d(ne)o(xt)g(section.)p 1099 1705 776 2 v 1098
1747 2 42 v 1241 1747 V 1264 1734 a(2)g(Disks,)g(110)f(MB)p
1548 1747 V 53 w(4)h(Disks,)f(229)h(MB)p 1874 1747 V
1099 1749 776 2 v 1099 1758 V 1098 1799 2 42 v 1122 1787
a(Create)p 1241 1799 V 44 w(28.6)g(s)g(\(7.7)g(MB/s\))p
1548 1799 V 46 w(26.7)f(s)h(\(17.2)g(MB/s\))p 1874 1799
V 1099 1801 776 2 v 1098 1842 2 42 v 1122 1830 a(Mer)o(ge)p
1241 1842 V 45 w(29.4)g(s)g(\(7.5)g(MB/s\))p 1548 1842
V 46 w(32.5)f(s)h(\(14.1)g(MB/s\))p 1874 1842 V 1099
1844 776 2 v 1098 1885 2 42 v 1122 1873 a(T)m(otal)p
1241 1885 V 66 w(58.4)g(s)p 1548 1885 V 218 w(60.4)f(s)p
1874 1885 V 1099 1887 776 2 v 1025 1958 a(T)m(able)j(3:)38
b Fh(Single-node)11 b(MinuteSort)h(Results.)21 b Fj(The)11
b(amount)g(of)1025 2000 y(data)c(that)g(can)f(be)h(sorted)f(in)h(one)f
(minute)h(on)g(a)g(single)f(node)g(is)i(shown)1025 2041
y(for)h(a)g(Ultr)o(aSP)m(ARC)f(I)i(with)g(2)f(disks)f(and)g(64)h(MB)g
(of)g(memory)f(versus)1025 2083 y(one)f(with)i(4)f(disks)f(and)h(128)f
(MB)i(of)f(memory)n(.)k(110)7 b(MB)i(corr)o(esp)o(ond)o(s)1025
2124 y(to)g(1,150,000)f(r)o(ecor)o(ds)o(;)f(229)i(MB)g(to)g(2,400,000)f
(r)o(ecor)o(ds)o(.)1081 2254 y Fk(In)h(this)h(section,)e(we)h(again)f
(sa)o(w)h(that)h(NO)o(W)n(-Sort)f(must)g(ha)o(v)o(e)g(an)1025
2295 y(accurate)e(estimate)h(of)h(a)o(v)o(ailable)f(memory:)13
b(to)c(choose)d(between)h(the)1025 2337 y(one-pass)f(or)j(two-pass)f
(algorithm)h(for)g(a)f(gi)o(v)o(en)h(number)f(of)h(records,)1025
2378 y(and)g(to)i(determine)e(the)h(maximum)g(run)g(size)g(in)g(the)g
(two-pass)f(algo-)1025 2420 y(rithm.)1081 2461 y(Examining)k(the)h
(two-pass)f(single-node)f(sort,)k(we)e(found)f(that)1025
2503 y(pipelined)e(v)o(ersions)g(of)h(both)f(phases)f(performed)h
(better)h(than)g(syn-)1025 2544 y(chronous)c(implementations,)i(re)o
(gardless)e(of)j(the)e(number)h(of)g(disks.)1025 2586
y(W)m(e)j(found)g(that)h Fd(mmap)h Fk(with)g Fd(madvise)h
Fk(does)c(not)i(prefetch)f(suf-)1025 2627 y(\256ciently)g(lar)o(ge)h
(blocks)f(to)h(amortize)g(seek)e(costs)h(across)f(multiple)1025
2669 y(streams,)c(forcing)h(us)e(to)i(e)o(xplicitly)g(use)f(a)g
(prefetching)g(thread)g(in)g(the)p eop
%%Page: 10 10
10 9 bop 0 45 a Fk(mer)o(ge)11 b(phase.)18 b(By)11 b(prefetching)g(lar)
o(ge)g(blocks,)g(sequential)f(perfor)o(-)0 87 y(mance)j(is)h
(maintained)f(e)o(v)o(en)g(when)g(the)g(mer)o(ge)h(phase)e(must)i(read)
0 128 y(from)e Fg(R)g Fk(runs,)g(where)f Fg(R)h Fk(is)f(greater)g(than)
g(the)g(number)g(of)h(disks)e(in)0 170 y(the)f(system.)56
211 y(Finally)n(,)e(we)f(ha)o(v)o(e)h(observ)o(ed)e(the)h(importance)g
(of)h(carefully)f(man-)0 253 y(aging)h(the)i(layout)e(of)i(records)e
(across)g(disks;)h(by)g(dedicating)f(half)i(the)0 294
y(disks)j(for)h(reading)f(and)g(half)h(for)g(writing,)i(we)d(do)g(not)h
(disrupt)g(the)0 336 y(sequential)8 b(access)f(pattern)i(generated)e
(by)i(each)f(stream.)0 436 y Fl(7)41 b(Tw)o(o-P)o(ass)12
b(P)o(a)o(rallel)f(So)o(rting)0 516 y Fk(In)d(this)g(section)f(we)h
(describe)e(our)i(two-pass)f(parallel)h(algorithm)g(and)0
558 y(our)13 b(results)f(on)g(the)g(MinuteSort)h(benchmark.)22
b(This)12 b(\256nal)g(sorting)0 599 y(algorithm)7 b(e)o(xtends)t
(naturally)g(from)g(the)e(one-pass)t(parallel)i(and)e(two-)0
641 y(pass)j(single-node)f(algorithms.)47 720 y(1.)18
b Fh(Cr)o(eate)7 b(Runs:)12 b Fk(Processors)5 b(create)h(sorted)g(runs)
h(across)f(all)h(of)93 762 y(the)k(nodes)f(of)h(the)g(cluster)n(.)19
b(Runs)10 b(are)h(created)f(by)g(repeating)93 803 y(the)h
Fh(Read)p Fk(,)f Fh(Send)p Fk(,)h Fh(Sort)p Fk(,)g(and)e
Fh(Write)j Fk(steps)d(of)i(the)f(one-pass)93 845 y(parallel)g(sort.)47
916 y(2.)18 b Fh(Merge:)12 b Fk(Each)7 b(processor)f(mer)o(ges)h(its)i
(local)e(sorted)h(runs)f(into)93 958 y(a)12 b(single)e(local)h(\256le.)
21 b(This)11 b(phase)e(is)j(identical)f(to)g(the)g(mer)o(ge)93
999 y(on)d(a)g(single-node)e(described)g(in)j(the)e(pre)o(vious)g
(section)g(and)g(is)93 1041 y(not)i(discussed)e(further)n(.)0
1137 y Fl(7.1)41 b(Exploiting)11 b(Overlap)0 1204 y Fk(Creating)16
b(multiple)h(sorted)f(runs)g(across)f(processors)f(in)j(the)f(\256rst)0
1245 y(phase)10 b(contains)h(se)o(v)o(eral)g(opportunities)h(for)g(o)o
(v)o(erlap.)23 b(In)12 b(the)g(one-)0 1287 y(pass)h(parallel)h
(algorithm,)j(reading)c(and)g(sending)g(could)h(be)f(o)o(v)o(er)o(-)0
1328 y(lapped;)f(in)f(the)h(two-pass)e(single-node)g(sort,)i(reading)f
(and)f(writing)0 1370 y(could)j(be)g(o)o(v)o(erlapped.)26
b(In)14 b(the)f(two-pass)f(parallel)i(sort,)i(we)d(may)0
1411 y(o)o(v)o(erlap)h(none,)g(one,)h(or)f(both)f(of)h(these)f(pairs)h
(of)g(operations.)27 b(T)m(o)0 1453 y(understand)9 b(the)i(tradeof)o
(fs,)i(we)e(describe)f(the)h(actions)f(of)h(the)h(three)0
1494 y(threads)d(in)h(more)g(detail:)15 b(the)9 b Fj(r)o(eader)p
Fk(,)f(the)h Fj(communicator)p Fk(,)g(and)g(the)0 1536
y Fj(writer)p Fk(.)56 1577 y(The)j(read)g(thread)g(is)g(responsible)f
(for)i(mapping)f(the)g(input)g(\256le)0 1619 y(and)5
b(copying)t(ke)o(ys)g(and)h(records)f(into)h(per)o(-destination)g
(send-b)o(uf)o(fers.)0 1660 y(When)k(an)o(y)f(of)i(the)f(send-b)o(uf)o
(fers)g(\256ll,)h(the)f(reader)g(signals)f(the)h(com-)0
1702 y(municator)n(.)i(As)6 b(in)h(the)f(one-pass)f(parallel)h(sort,)i
(the)e(reader)g(and)f(com-)0 1743 y(municator)11 b(can)f(be)g(o)o(v)o
(erlapped)g(\(using)h(two)g(sets)f(of)h(send)f(b)o(uf)o(fers\))0
1785 y(or)f(synchronous)e(\(with)j(one)e(set\).)56 1826
y(When)h(signaled,)g(the)h(communicator)o(-thread)f(picks)g(up)g(the)g
(en-)0 1868 y(tire)g(set)f(of)h(send-b)o(uf)o(fers)e(and)h(sends)e
(each)h(to)h(the)h(appropriate)e(desti-)0 1909 y(nation)g(processor)n
(.)k(When)c(a)g(message)e(arri)o(v)o(es,)j(the)f(Acti)o(v)o(e)g
(Message)0 1951 y(handler)e(is)h(in)o(v)o(oked,)f(which)h(copies)f(the)
h(records)f(into)h(the)g(sort-b)o(uf)o(fer)0 1992 y(and)g(the)h
(partial)h(ke)o(ys)e(into)i(the)f(appropriate)f(b)o(ucket.)12
b(After)c(the)f(com-)0 2034 y(municator)13 b(has)g(sent)g(all)i(of)f
(the)f(records)g(in)h(the)g(current)f(run,)j(the)0 2076
y(processors)7 b(synchronize)g(and)h(wait)h(to)h(recei)o(v)o(e)f(the)g
(records.)56 2117 y(After)h(a)e(run)h(has)f(been)g(sent)g(and)g(recei)o
(v)o(ed,)g(the)h(writer)o(-thread)h(is)0 2159 y(signaled.)i(The)6
b(writer)j(sorts)e(the)g(ke)o(ys)f(within)i(each)e(b)o(ucket)f(and)i
(then)0 2200 y(gathers)h(and)h(writes)g(the)g(records)g(to)g(disk.)14
b(Similar)c(to)g(the)f(two-pass)0 2242 y(single-node)j(sort,)k(the)e
(reading)f(of)h(one)f(run)h(may)g(be)f(o)o(v)o(erlapped)0
2283 y(with)d(the)f(writing)h(of)g(the)f(pre)o(vious)f(run.)14
b(Ov)o(erlapping)9 b(implies)g(that)0 2325 y(two)h(sets)f(of)h(sort-b)o
(uf)o(fers)g(and)f(b)o(uckets)f(e)o(xist,)i(each)f(set)g(consuming)0
2366 y(approximately)f(half)i(of)f(memory)n(.)56 2408
y(Our)16 b(measurements)d(indicate)i(that)h(the)g(number)f(of)h(disks)e
(in)0 2449 y(the)c(system)f(determine)g(which)g(operations)g(should)g
(be)g(o)o(v)o(erlapped.)0 2491 y(W)o(ith)f(two)f(disks,)g(the)g(best)f
(implementation)h(o)o(v)o(erlaps)g(all)h(four)f(oper)o(-)0
2532 y(ations.)13 b(W)o(ith)c(four)f(disks,)g(the)h(best)e(o)o(v)o
(erlaps)h(reading)g(and)g(sending,)0 2574 y(b)o(ut)15
b(performs)f(reading)g(and)g(writing)h(synchronously)n(.)27
b(When)14 b(all)0 2615 y(operations)8 b(are)h(o)o(v)o(erlapped,)f(the)h
(CPU)g(is)g(saturated)f(at)h(nearly)g(95\045)0 2657 y(utilization.)36
b(Performing)16 b(the)g(read)g(and)g(write)h(operations)e(syn-)0
2698 y(chronously)10 b(not)h(only)h(minimizes)f(CPU)h(and)e(I/O)j(b)o
(us)e(contention,)1025 45 y(b)o(ut)i(by)g(creating)g(only)g(one)f(run)i
(at)f(a)g(time,)j(stripes)d(the)g(input)g(\256le)1025
87 y(across)e(all)i(four)g(disks)f(and)g(creates)f(less)h(runs)h(to)f
(mer)o(ge)h(in)g(phase)1025 128 y(two.)1025 224 y Fl(7.2)40
b(Discussion)1037 295 y
 14208860 9804108 3289088 3289088 26970521 19866091 startTexFig
 1037 295 a
%%BeginDocument: Graphs/ParallelExternalScalingFinal.eps
/gnudict 40 dict def
gnudict begin
/Color false def
/Solid true def
/gnulinewidth 5.000 def
/vshift -66 def
/dl {10 mul} def
/hpt 31.5 def
/vpt 31.5 def
/M {moveto} bind def
/L {lineto} bind def
/R {rmoveto} bind def
/V {rlineto} bind def
/vpt2 vpt 2 mul def
/hpt2 hpt 2 mul def
/Lshow { currentpoint stroke M
  0 vshift R show } def
/Rshow { currentpoint stroke M
  dup stringwidth pop neg vshift R show } def
/Cshow { currentpoint stroke M
  dup stringwidth pop -2 div vshift R show } def
/DL { Color {setrgbcolor Solid {pop []} if 0 setdash }
 {pop pop pop Solid {pop []} if 0 setdash} ifelse } def
/BL { stroke gnulinewidth 2 mul setlinewidth } def
/AL { stroke gnulinewidth 2 div setlinewidth } def
/PL { stroke gnulinewidth setlinewidth } def
/LTb { BL [] 0 0 0 DL } def
/LTa { AL [1 dl 2 dl] 0 setdash 0 0 0 setrgbcolor } def
/LT0 { PL [] 0 1 0 DL } def
/LT1 { PL [4 dl 2 dl] 0 0 1 DL } def
/LT2 { PL [2 dl 3 dl] 1 0 0 DL } def
/LT3 { PL [1 dl 1.5 dl] 1 0 1 DL } def
/LT4 { PL [5 dl 2 dl 1 dl 2 dl] 0 1 1 DL } def
/LT5 { PL [4 dl 3 dl 1 dl 3 dl] 1 1 0 DL } def
/LT6 { PL [2 dl 2 dl 2 dl 4 dl] 0 0 0 DL } def
/LT7 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 1 0.3 0 DL } def
/LT8 { PL [2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 2 dl 4 dl] 0.5 0.5 0.5 DL } def
/P { stroke [] 0 setdash
  currentlinewidth 2 div sub M
  0 currentlinewidth V stroke } def
/D { stroke [] 0 setdash 2 copy vpt add M
  hpt neg vpt neg V hpt vpt neg V
  hpt vpt V hpt neg vpt V closepath stroke
  P } def
/A { stroke [] 0 setdash vpt sub M 0 vpt2 V
  currentpoint stroke M
  hpt neg vpt neg R hpt2 0 V stroke
  } def
/B { stroke [] 0 setdash 2 copy exch hpt sub exch vpt add M
  0 vpt2 neg V hpt2 0 V 0 vpt2 V
  hpt2 neg 0 V closepath stroke
  P } def
/C { stroke [] 0 setdash exch hpt sub exch vpt add M
  hpt2 vpt2 neg V currentpoint stroke M
  hpt2 neg 0 R hpt2 vpt2 V stroke } def
/T { stroke [] 0 setdash 2 copy vpt 1.12 mul add M
  hpt neg vpt -1.62 mul V
  hpt 2 mul 0 V
  hpt neg vpt 1.62 mul V closepath stroke
  P  } def
/S { 2 copy A C} def
end
gnudict begin
gsave
50 50 translate
0.050 0.050 scale
0 setgray
/Helvetica findfont 200 scalefont setfont
newpath
LTa
1200 501 M
5697 0 V
-5697 0 R
0 4438 V
LTb
1200 501 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(0) Rshow
1200 1056 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(1) Rshow
1200 1611 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(2) Rshow
1200 2165 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(3) Rshow
1200 2720 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(4) Rshow
1200 3275 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(5) Rshow
1200 3830 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(6) Rshow
1200 4384 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(7) Rshow
1200 4939 M
63 0 V
5634 0 R
-63 0 V
-5754 0 R
(8) Rshow
1200 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(0) Cshow
2014 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(10) Cshow
2828 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(20) Cshow
3642 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(30) Cshow
4455 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(40) Cshow
5269 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(50) Cshow
6083 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(60) Cshow
6897 501 M
0 63 V
0 4375 R
0 -63 V
0 -4575 R
(70) Cshow
1200 501 M
5697 0 V
0 4438 V
-5697 0 V
0 -4438 V
200 2720 M
currentpoint gsave translate 90 rotate 0 0 M
(Amount Sorted \(GB\)) Cshow
grestore
6400 3950 M
(6.0 GB) Cshow
4048 101 M
(Processors) Cshow
%1363 1500 M
5363 1500 M
(SGI Record) Lshow
3553 2410 M
currentpoint gsave translate 37 rotate 0 0 M
(Perfect Scaling) Lshow
grestore
1338 986 M
currentpoint gsave translate 56 rotate 0 0 M
(Perfect Scaling) Lshow
grestore
LT0
6234 4676 M
(4 disks, 128 MB) Rshow
6354 4676 M
360 0 V
1281 596 M
82 94 V
163 189 V
325 378 V
6474 4676 D
1281 596 D
1363 690 D
1526 879 D
1851 1257 D
LT1
6234 4476 M
(2 disks, 64 MB) Rshow
6354 4476 M
360 0 V
6409 3830 M
3804 2165 L
2502 1389 L
1851 956 L
1526 728 L
1363 615 L
-82 -55 V
6474 4476 A
6409 3830 A
3804 2165 A
2502 1389 A
1851 956 A
1526 728 A
1363 615 A
1281 560 A
LT2
1200 1389 M
5697 0 V
LT3
1281 560 M
3804 2400 L
6409 4304 L
LT4
1281 623 M
82 128 V
163 244 V
325 499 V
stroke
grestore
end
showpage
%%EndDocument

 endTexFig
 1025 999 a Fk(Figure)11 b(9:)38 b Fh(Parallel)12 b(MinuteSort)f
(Results.)21 b Fj(This)12 b(gr)o(aph)f(shows)1025 1041
y(MinuteSort)e(r)o(esults)g(on)g(two)h(dif)o(fer)o(ent)g(cluster)f
(con\256gur)o(ations:)k(an)1025 1082 y(8-node)d(cluster)g(with)i(4)f
(disks)f(and)h(128)f(MB)i(per)e(pr)n(ocessor)e(and)i(a)1025
1124 y(64-node)d(cluster)g(with)i(2)f(disks)g(and)f(64)h(MB)h(per)e(pr)
n(ocessor)l(.)j(P)m(erfect)1025 1165 y(scaling)e(is)h(r)o(elative)f(to)
i(single-node)e(performance)n(.)1025 1260 y Fk(The)13
b(performance)g(of)h(the)g(two-pass)f(parallel)h(NO)o(W)n(-Sort)h(on)e
(the)1025 1302 y(MinuteSort)e(benchmark)e(is)i(sho)o(wn)f(in)h(Figure)f
(9.)19 b(W)o(ith)11 b(eight)g(ma-)1025 1343 y(chines)f(and)i(four)g
(disks)f(per)h(machine,)g(our)g(implementation)f(sorts)1025
1385 y(1.4)d(GB)h(in)g(a)f(minute.)14 b(W)m(e)8 b(e)o(xperience)f(a)i
(lar)o(ge)f(drop)h(in)f(the)h(number)1025 1426 y(of)f(ke)o(ys)f(that)i
(can)e(be)h(sorted)g(when)f(we)h(mo)o(v)o(e)g(from)i(the)e(single-node)
1025 1468 y(sort)j(to)h(the)f(parallel)h(v)o(ersion)f(running)g(on)g
(one)f(processor)g(because)1025 1509 y(reading)e(and)g(writing)i(are)e
(no)o(w)h(performed)f(synchronously)e(instead)1025 1551
y(of)13 b(o)o(v)o(erlapped;)g(ho)o(we)o(v)o(er)o(,)g(compared)e(to)h
(the)h(parallel)g(v)o(ersion)f(on)1025 1592 y(one)6 b(processor)o(,)t
(the)g(algorithm)g(scales)g(perfectly)g(linearly)g(with)g(more)1025
1634 y(processors.)1081 1675 y(On)15 b(the)g(cluster)f(with)i(two)f
(disks)f(per)h(machine,)g(the)g(parallel)1025 1717 y(v)o(ersion)c(of)g
(the)g(sort)h(on)e(one)h(machine)f(sorts)h(as)f(man)o(y)h(ke)o(ys)f(as)
g(the)1025 1758 y(single-node)d(algorithm,)j(since)e(both)h
(implementations)f(o)o(v)o(erlap)i(all)1025 1800 y(phases.)23
b(W)o(ith)13 b(16)g(processors,)f(we)h(sort)g(1.6)g(GB)h(of)f(data,)h
(which)1025 1841 y(ties)d(the)g(pre)o(vious)g(MinuteSort)g(record)g(by)
g(the)g(more)g(fully-loaded)1025 1883 y(SGI)d(system:)13
b(12)7 b(processors,)g(96)h(disks,)g(and)f(2.25)h(GB)g(of)h(memory)n(.)
1025 1924 y(W)o(ith)f(32)g(processors,)e(we)i(sort)g(3.0)g(GB)g(in)g
(57.9)g(seconds,)e(and)h(on)h(64)1025 1966 y(nodes,)e(we)h(sort)h(6.0)f
(GB)h(in)f(59.3)g(seconds.)k(The)6 b(algorithm)i(does)e(not)1025
2007 y(scale)i(quite)i(linearly)f(with)i(the)e(number)g(of)h
(processors;)e(the)h(drop)g(is)1025 2049 y(lar)o(gely)g(due)f(to)i
(start-up)f(bottlenecks,)f(costing)g(us)h(3)f(seconds)f(on)i(64)1025
2090 y(nodes.)1081 2132 y(Unfortunately)n(,)f(due)g(to)g(the)g(relati)o
(v)o(e)i(dearth)d(of)i(memory)f(on)g(our)1025 2173 y(workstations,)k
(the)h(MinuteSort)g(is)f(a)h(two-pass)e(algorithm)i(on)f(our)1025
2215 y(cluster;)h(on)e(pre)o(vious)f(record-holding)h(systems,)g
(MinuteSort)h(was)1025 2256 y(performed)h(in)g(a)g(single)g(pass.)24
b(F)o(or)13 b(e)o(xample,)h(to)f(sort)h(1.6)f(GB)g(of)1025
2298 y(data,)d(we)f(are)h(performing)g(twice)g(the)g(I/O)h(of)f(the)f
(SGI)i(XFS)e(system)1025 2339 y(in)g(the)g(same)f(amount)h(of)g(time.)
1025 2440 y Fl(8)40 b(Conclusions)1025 2520 y Fk(In)11
b(this)g(paper)f(we)h(presented)e(NO)o(W)n(-Sort,)j(a)f(collection)f
(of)h(con\256g-)1025 2561 y(urable)i(sorting)g(algorithms)h(for)g
(networks)e(of)i(workstations.)25 b(W)m(e)1025 2603 y(ha)o(v)o(e)14
b(sho)o(wn)f(that)h(NO)o(Ws)h(are)f(well-suited)g(to)h(I/O-intensi)o(v)
o(e)g(ap-)1025 2644 y(plications)e(such)f(as)h(sorting.)28
b(The)13 b(cluster)g(en)o(vironment)g(is)g(ideal)1025
2686 y(for)f(the)f(de)o(v)o(elopment)f(of)i(ef)o(\256cient)f(parallel)h
(applications)e(because)p eop
%%Page: 11 11
11 10 bop 23 43 1905 2 v 22 85 2 42 v 45 72 a Fk(System)p
433 85 V 306 w(Y)l(ear)p 552 85 V 44 w(Procs)p 680 85
V 44 w(Disks)p 810 85 V 49 w(Mem)p 939 85 V 174 w(Datamation)p
1415 85 V 320 w(MinuteSort)p 1926 85 V 22 126 V 433 126
V 552 126 V 680 126 V 810 126 V 841 114 a(\(GB\))p 939
126 V 45 w(T)o(ime)9 b(\(s\))p 1110 126 V 45 w(Price/Perf)h(\(cents\))p
1415 126 V 45 w(Data)e(\(GB\))p 1617 126 V 46 w(Price/Perf)i(\($/GB\))p
1926 126 V 23 128 1905 2 v 22 170 2 42 v 45 157 a(DEC)f(Alpha)g(AXP)g
(3000)p 433 170 V 66 w(1993)p 552 170 V 108 w(1)p 680
170 V 92 w(10)p 810 170 V 44 w(0.256)p 939 170 V 105
w(13.7)p 1110 170 V 151 w(0.9)p 1415 170 V 290 w(\261)p
1617 170 V 167 w(\261)p 1926 170 V 22 211 V 45 199 a(DEC)g(Alpha)g(AXP)
g(7000)p 433 211 V 66 w(1993)p 552 211 V 108 w(3)p 680
211 V 92 w(28)p 810 211 V 44 w(0.256)p 939 211 V 124
w(7.0)p 1110 211 V 151 w(1.4)p 1415 211 V 290 w(\261)p
1617 211 V 167 w(\261)p 1926 211 V 22 253 V 45 240 a(DEC)g(Alpha)g(AXP)
g(7000)p 433 253 V 66 w(1993)p 552 253 V 108 w(3)p 680
253 V 92 w(36)p 810 253 V 63 w(1.25)p 939 253 V 152 w(\261)p
1110 253 V 165 w(\261)p 1415 253 V 275 w(1.1)p 1617 253
V 145 w(0.47)p 1926 253 V 22 294 V 45 282 a(SGI)h(Challenge)e(XL)p
433 294 V 130 w(1995)p 552 294 V 89 w(12)p 680 294 V
92 w(96)p 810 294 V 63 w(2.25)p 939 294 V 124 w(3.5)p
1110 294 V 151 w(0.4)p 1415 294 V 261 w(1.6)p 1617 294
V 145 w(0.61)p 1926 294 V 22 336 V 45 323 a(IBM)i(RS/6000)e(39H)p
433 336 V 126 w(1996)p 552 336 V 108 w(1)p 680 336 V
111 w(8)p 810 336 V 44 w(0.256)p 939 336 V 124 w(5.1)p
1110 336 V 151 w(0.2)p 1415 336 V 290 w(\261)p 1617 336
V 167 w(\261)p 1926 336 V 23 337 1905 2 v 22 379 2 42
v 45 366 a(NO)o(W)i(UltraSP)m(ARC)p 433 379 V 121 w(1996)p
552 379 V 108 w(8)p 680 379 V 92 w(32)p 810 379 V 63
w(1.00)p 939 379 V 105 w(2.92)p 1110 379 V 142 w(0.32)p
1415 379 V 251 w(1.4)p 1617 379 V 145 w(0.13)p 1926 379
V 22 420 V 45 408 a(NO)o(W)g(UltraSP)m(ARC)p 433 420
V 121 w(1996)p 552 420 V 89 w(16)p 680 420 V 92 w(32)p
810 420 V 63 w(1.00)p 939 420 V 105 w(3.01)p 1110 420
V 142 w(0.57)p 1415 420 V 251 w(1.6)p 1617 420 V 145
w(0.19)p 1926 420 V 22 462 V 45 449 a(NO)o(W)g(UltraSP)m(ARC)p
433 462 V 121 w(1996)p 552 462 V 89 w(32)p 680 462 V
92 w(64)p 810 462 V 63 w(2.00)p 939 462 V 105 w(2.41)p
1110 462 V 142 w(0.91)p 1415 462 V 251 w(3.0)p 1617 462
V 145 w(0.20)p 1926 462 V 22 503 V 45 491 a(NO)o(W)g(UltraSP)m(ARC)p
433 503 V 121 w(1996)p 552 503 V 89 w(64)p 680 503 V
73 w(128)p 810 503 V 63 w(4.00)p 939 503 V 152 w(\261)p
1110 503 V 165 w(\261)p 1415 503 V 275 w(6.0)p 1617 503
V 145 w(0.20)p 1926 503 V 23 505 1905 2 v 22 547 2 42
v 45 534 a Fj(Ideal)g(NO)n(W)f(Ultr)o(aSP)m(ARC)p 433
547 V 44 w(1996)p 552 547 V 89 w(28)p 680 547 V 92 w(56)p
810 547 V 63 w(8.76)p 939 547 V 152 w Fk(\261)p 1110
547 V 165 w(\261)p 1415 547 V 275 w Fj(6.2)p 1617 547
V 145 w Fk(0.10)p 1926 547 V 23 548 1905 2 v 0 619 a(T)m(able)g(4:)28
b Fh(Summary)9 b(of)g(Datamation)h(and)f(MinuteSort)g(Results.)14
b Fj(Note)c(that)f(the)h(price)e(of)i(the)f(SGI)h(Challenge)e(is)i
(estimated)f(and)f(the)i(IBM)0 661 y(RS/6000)e(uses)g(r)o(aw)h(disk,)f
(whic)o(h)h(is)h(not)f(allowed)f(in)i(the)f(Datamation)g
(speci\256cation.)i(Note)e(that)h(1)f(GB)g(is)g Fk(2)1453
645 y Fi(30)1489 661 y Fj(bytes.)0 823 y Fk(it)h(pro)o(vides)f
(performance)f(isolation:)13 b(by)c(monitoring)g(the)g(beha)o(vior)0
864 y(of)14 b(the)g(application)e(on)i(each)e(node,)i(the)g(program-de)
o(v)o(eloper)e(can)0 906 y(isolate)h(performance)f(bottlenecks.)24
b(Clusters)13 b(also)f(enable)g(incre-)0 947 y(mental)f(scalability:)16
b(hardware,)10 b(whether)g(it)i(be)e(processors,)f(disks,)0
989 y(or)f(memory)n(,)f(can)g(be)g(added)f(to)i(the)f(system)f(and)h
(used)f(in)i(an)f(ef)o(fecti)o(v)o(e)0 1030 y(manner)n(.)56
1072 y(This)k(work)g(was)f(enabled)g(by)h(two)h(ke)o(y)e(pieces)g(of)i
(software)f(on)0 1113 y(the)k(NO)o(W)f(cluster)n(.)31
b(The)14 b(\256rst)h(of)g(these)f(is)h(Acti)o(v)o(e)g(Messages,)f(a)0
1155 y(high-speed)f(communication)h(layer)i(pro)o(viding)f(lo)o(w)g
(latenc)o(y)g(and)0 1196 y(high)8 b(throughput)f(to)h(parallel)h
(programs)e([13,)h(33].)14 b(The)7 b(second)f(ke)o(y)0
1238 y(software)h(component)e(is)i(GLUnix,)h(a)f(distrib)o(uted)g
(operating)f(system)0 1279 y(for)k(NO)o(Ws)f([19)o(].)56
1321 y(By)d(studying)g(disk-to-disk)g(s)o(orting,)t(we)g(qualitati)o(v)
o(ely)g(and)g(quan)o(-)0 1362 y(titati)o(v)o(ely)14 b(assessed)9
b(the)k(workstation)e(operating)h(system)f(and)h(ma-)0
1404 y(chine)f(architecture.)20 b(One)11 b(of)h(the)f(underlying)g
(goals)f(of)i(the)f(NO)o(W)0 1446 y(project)c(is)f(to)h(utilize)h(e)o
(xisting)e(commodity)g(software)g(and)g(hardware;)0 1487
y(the)h(assumption)f(is)h(that)g(general-purpose)f(workstations)f(form)
k(solid)0 1529 y(b)o(uilding)14 b(blocks)e(for)i(clusters)f(connected)f
(via)h(a)g(high-speed)f(net-)0 1570 y(work.)24 b(In)13
b(this)g(paper)o(,)f(we)h(demonstrated)e(some)h(of)h(the)f(strengths)0
1612 y(and)c(weaknesses)e(of)j(this)h(assumption.)56
1653 y(F)o(or)17 b(NO)o(W)n(-Sort,)i(the)d(most)g(important)h(function)
f(of)g(the)g(op-)0 1695 y(erating)h(system)e(is)i(to)g(support)f(ef)o
(\256cient)g(\256le)h(access.)33 b(W)m(e)17 b(\256nd)0
1736 y(that)10 b Fd(mmap)h Fk(with)g Fd(madvise)i Fk(in)d(Solaris)f
(2.5.1)h(pro)o(vides)f(fast,)h(\256ne-)0 1778 y(grained)g(access)f(to)i
(\256les,)g(with)h(the)f(\256le)f(system)g(usually)g(pro)o(viding)0
1819 y(adequate)c(prefetching)h(and)g(b)o(uf)o(fer)h(management;)f(ho)o
(we)o(v)o(er)o(,)g(it)i(con-)0 1861 y(sumes)i(10\045)h(of)h(a)o(v)o
(ailable)f(memory)n(.)23 b(The)12 b(older)g Fd(read)j
Fk(interface)0 1902 y(still)g(incurs)e(the)g(double-b)o(uf)o(fering)g
(problem,)i(and)d(should)h(not)g(be)0 1944 y(used)e(by)h(programs)g
(with)h(lar)o(ge)g(memory)f(requirements.)23 b(W)m(e)12
b(did)0 1985 y(\256nd)e(that)h Fd(mmap)h Fk(with)f Fd(madvise)j
Fk(was)9 b(not)i(suf)o(\256cient)f(when)f(read-)0 2027
y(ing)i(from)h(multiple)f(independent)e(streams)h(in)h(the)g(mer)o(ge)g
(phase)e(of)0 2068 y(the)h(two-pass)f(sort;)j(there,)f(we)f(needed)e
(to)j(use)e(multiple)j(threads)d(to)0 2110 y(manage)f(prefetching)g
(ourselv)o(es.)56 2151 y(W)m(e)e(found)g(the)g(e)o(xisting)g(Solaris)g
(support)f(for)i(I/O-)h(and)d(memory-)0 2193 y(intensi)o(v)o(e)13
b(applications)f(to)i(be)f(lacking)f(in)i(two)f(ke)o(y)g(areas.)25
b(First,)0 2234 y(ef)o(\256ciently)12 b(employing)f(multiple)i(disks)e
(of)i(dif)o(fering)g(speeds)d(on)i(a)0 2276 y(single)i(workstation)f
(is)h(not)h(straight-forward.)29 b(Second,)14 b(there)g(is)0
2317 y(no)c(reasonable)f(way)h(to)h(determine)f(a)o(v)o(ailable)g
(memory)n(,)h(so)f(that)h(an)0 2359 y(application)6 b(does)g(not)g(o)o
(v)o(er)o(-e)o(xtend)g(resou)o(rces)f(and)g(thrash.)k(T)m(o)d(solv)o(e)
0 2400 y(these)11 b(problems,)h(we)g(de)o(v)o(eloped)f(two)g(small)i
(con\256guration)d(tools.)0 2442 y(The)e(\256rst)g(of)h(these)e(e)o(v)o
(aluates)f(the)i(speed)f(of)i(the)f(disks)f(in)h(the)g(system)0
2483 y(and)k(feeds)f(this)i(information)h(into)e(our)h(striping)g
(library)n(,)h(allo)o(wing)0 2525 y(us)e(to)h(get)g(maximal)f
(performance)g(from)h(our)g(disks.)23 b(The)12 b(second)0
2566 y(tool)g(measures)e(a)o(v)o(ailable)h(memory)h(on)f(each)g(node)f
(of)j(the)e(cluster)n(.)0 2608 y(These)f(two)i(tools)g(combine)e(to)i
(enable)f(the)g(sorting)h(application)f(to)0 2649 y(tune)e(itself)h(to)
f(the)g(a)o(v)o(ailable)g(cluster)g(and)f(attain)h(peak)f(ef)o
(\256cienc)o(y)n(.)56 2691 y(W)m(e)14 b(found)g(that)h(the)f(I/O)h(b)o
(us)f(structure)h(of)f(the)g(UltraSP)m(ARC)1025 823 y(I)i(workstation)g
(pro)o(vides)f(inadequate)f(support)h(for)i(the)f(disk)f(and)1025
864 y(communication)9 b(needs)f(of)j(sorting.)17 b(F)o(or)10
b(e)o(xample,)g(we)g(found)g(that)1025 906 y(with)h(four)f(disks,)g(an)
g(implementation)g(with)h(synchronous)c(reading)1025
947 y(and)14 b(writing)i(was)d(sometimes)h(superior)h(to)g(a)f
(pipelined)g(v)o(ersion.)1025 989 y(Indeed,)8 b(we)g(were)h(surprised)f
(to)h(\256nd)f(that)h(a)f(machine)g(with)h(just)g(two)1025
1030 y(disks)k(and)f(a)i(connection)e(to)i(a)f(high-speed)f(network)h
(is)h(the)f(most)1025 1072 y(ef)o(fecti)o(v)o(e)g(b)o(uilding)g(block,)
h(as)e(adding)g(more)h(disks)f(leads)g(to)h(little)1025
1113 y(bene\256t.)19 b(There)10 b(are)h(two)g(solutions)g(to)g(this)g
(pending)f(problem:)18 b(an)1025 1155 y(impro)o(v)o(ed)7
b(I/O)g(infrastructure,)h(with)f(enough)e(bandwidth)g(to)i(support)1025
1196 y(disks)k(and)h(network,)h(or)g(communication)f(facilities)h(that)
f(function)1025 1238 y(o)o(v)o(er)17 b(the)f Fj(memory)f
Fk(b)o(us)g(\(perhaps)h(without)g(coherence\),)h(lea)o(ving)1025
1279 y(only)12 b(the)h(disks)f(to)i(consume)d(precious)h(I/O)i(b)o(us)e
(bandwidth.)24 b(W)m(e)1025 1321 y(also)8 b(found)h(that)g(the)g
(internal)h(fast-narro)o(w)f(SCSI)g(b)o(us)g(pre)o(v)o(ents)f(full)1025
1362 y(utilization)k(of)h(the)e(bandwidth)g(of)h(the)g(two)g(internal)g
(disks,)g(a)g(25\045)1025 1404 y(performance)c(loss.)1081
1446 y(The)f(performance)f(of)i(our)g(system)e(relati)o(v)o(e)j(to)f
(pre)o(vious)e(record-)1025 1487 y(holders)11 b(on)h(both)g(the)g
(Datamation)g(and)f(MinuteSort)h(benchmarks)1025 1529
y(is)j(sho)o(wn)e(in)i(T)m(able)f(4.)31 b(Our)15 b(best-performing)g
(con\256guration)e(of)1025 1570 y(32)h(processors)f(sorts)h(one)g
(million)i(records)d(in)i(one-pass)e(in)i(2.41)1025 1612
y(seconds,)8 b(b)o(ut)i(at)g(a)g(relati)o(v)o(ely)h(high)e(cost.)16
b(The)9 b(8)h(processor)e(system)1025 1653 y(with)g(four)h(disks)d(per)
i(node)f(is)h(slightly)g(slo)o(wer)o(,)g(at)g(2.92)f(seconds,)f(b)o(ut)
1025 1695 y(has)k(signi\256cantly)g(better)i(cost/performance.)19
b(The)10 b(IBM)i(RS/6000)1025 1736 y(still)h(achie)o(v)o(es)e(the)h
(best)g(cost/performance)f(of)i(all)g(kno)o(wn)e(results,)1025
1778 y(b)o(ut)k(uses)f(ra)o(w)i(disk,)h(which)e(is)g(not)g(allo)o(wed)g
(by)g(the)g(benchmark)1025 1819 y(speci\256cation.)1081
1861 y(Our)8 b(MinuteSort)f(results)h(were)f(obtained)f(on)h(machine)f
(con\256gu-)1025 1902 y(rations)h(with)i(little)g(memory)n(,)f(and)f
(thus)g(required)h(two-pass)e(e)o(xternal)1025 1944 y(algorithms.)33
b(The)15 b(pre)o(vious)g(record-holders)g(contained)f(enough)1025
1985 y(main)g(memory)g(to)g(hold)g(the)g(data.)27 b(Ev)o(en)14
b(performing)g(twice)g(the)1025 2027 y(amount)e(of)i(I/O,)g(we)f(were)g
(able)g(to)g(sort)h(6.0)f(GB)g(\(6)h(x)f(2)1819 2011
y Fi(30)1859 2027 y Fk(bytes\))1025 2068 y(in)h(one)e(minute)i(on)f(64)
g(processors.)24 b(In)14 b(this)f(con\256guration,)h(with)1025
2110 y(only)f(128)f(disks,)i(we)f(are)g(able)g(to)g(deli)o(v)o(er)h
(roughly)f(431)f(MB/s)i(to)1025 2151 y(the)j(sorting)f(application.)36
b(The)17 b(pre)o(vious)e(MinutesSort)i(record-)1025 2193
y(holder)10 b(needed)e(96-disks)h(to)i(deli)o(v)o(er)g(only)f(54)g
(MB/s.)18 b(F)o(or)11 b(the)f(best)1025 2234 y(price/performance,)c(we)
g(project)g(that)g(if)h(we)f(had)f(28)h(processors)t(with)1025
2276 y(two)h(disks)g(and)g(320)g(MB)h(of)g(memory)g(each,)f(we)g(could)
g(\256t)h(6.2)g(GB)g(of)1025 2317 y(records)e(in)i(memory;)g(thus,)f
(by)g(sorting)g(in)h(only)f(one-pass,)f(we)h(could)1025
2359 y(use)h(much)g(less)h(hardware)f(to)h(obtain)g(slightly)g(better)h
(performance.)1081 2400 y(V)n(isit)f(our)f(home)g(page)f(to)i(\256nd)f
(out)g(more)h(about)e(NO)o(W)n(-Sort)i(and)1025 2442
y(the)g(NO)o(W)g(Project:)14 b Fd(http://no)q(w.c)q(s.)q(ber)q(ke)q(le)
q(y.e)q(du)q Fk(.)1025 2536 y Fl(Ackno)o(wledgments)1025
2607 y Fm(NO)o(W)n(-Sort)6 b(was)g(the)f(combined)g(ef)o(fort)h(of)f
(many)g(members)g(in)h(the)f(the)h(Berke-)1025 2645 y(ley)i(NO)o(W)i
(Project.)16 b(W)m(e)10 b(would)e(\256rst)i(like)f(to)h(thank)e
(Richard)h(P)l(.)h(Martin)f(for)1025 2682 y(implementing)k(and)g
(supporting)g(Split-C)i(and)f(Acti)o(ve)f(Messages)g(1.0)h(on)p
eop
%%Page: 12 12
12 11 bop 0 45 a Fm(Myrinet.)20 b(This)12 b(work)e(would)g(not)h(ha)o
(ve)e(been)h(\256nished)h(without)g(his)g(help.)0 82
y(W)m(e)g(also)g(thank)e(Doug)h(Ghormley)f(and)h(Da)o(vid)h(Petrou)f
(for)h(their)g(ef)o(forts)f(in)0 120 y(making)d(GLUnix)h(a)g(fast,)h
(reliable)f(system.)j(W)m(e)e(thank)e(the)h(members)g(of)g(the)0
157 y(T)n(ertiary)g(Disk)h(group)e(for)h(lending)g(us)g(the)g
(Barracuda)f(disks,)i(and)e(K)o(en)h(Lutz)0 195 y(and)f(Eric)h(Fraser)g
(for)g(making)f(both)g(clusters)h(a)f(working)g(reality)n(.)12
b(W)m(e)c(extend)0 232 y(special)h(thanks)g(to)h(Jim)h(Gray)e(and)g
(Chris)i(Nyber)o(g)e(for)h(comments)e(on)i(early)0 269
y(drafts)d(as)f(well)i(as)e(helpful)g(con)o(versations)t(about)g
(sorting.)11 b(Finally)n(,)d(we)e(thank)0 307 y(the)i(anonymous)d(re)o
(vie)o(wers)j(for)g(providing)e(useful)h(feedback.)56
344 y(This)14 b(work)g(was)f(funded)g(in)h(part)g(by)g(D)o(ARP)m(A)g
(F30602-95-C-0014,)0 381 y(D)o(ARP)m(A)7 b(N00600-93-C-24)o(81,)t(NSF)g
(CD)o(A)g(94-01156,)t(N)o(ASA)g(FDN)o(A)o(GW)n(-)0 419
y(5198,)15 b(and)e(the)h(California)g(State)g(MICR)o(O)g(Program.)30
b(Andrea)13 b(Arpaci-)0 456 y(Dusseau)7 b(is)h(supported)f(by)g(an)h
(Intel)g(Graduate)f(Fello)o(wship.)0 550 y Fl(References)17
622 y Fm([1])18 b(R.)12 b(C.)f(Agarwal.)19 b(A)11 b(Super)g(Scalar)g
(Sort)h(Algorithm)e(for)h(RISC)h(Pro-)74 659 y(cessors.)e(In)e
Fa(Pr)o(oceedings)d(of)j(the)f(1996)f(A)o(CM)i(SIGMOD)f(Confer)o(ence)p
Fm(,)74 696 y(pages)g(240\261246,)f(June)h(1996.)17 750
y([2])18 b(T)n(.)11 b(E.)g(Anderson,)f(D.)h(E.)g(Culler)o(,)g(and)f(D.)
h(A.)g(Patterson.)18 b(A)10 b(Case)g(for)74 788 y(NO)o(W)e(\(Networks)g
(of)g(W)m(orkstations\).)j Fa(IEEE)f(Micr)o(o)p Fm(,)d(Feb)o(.)h(1994.)
17 842 y([3])18 b(R.)13 b(H.)g(Arpaci,)h(A.)f(C.)h(Dusseau,)e(A.)i(M.)e
(V)l(ahdat,)i(L.)f(T)n(.)g(Liu,)i(T)n(.)e(E.)74 879 y(Anderson,)c(and)g
(D.)h(A.)h(Patterson.)16 b(The)10 b(Interaction)e(of)i(Parallel)g(and)
74 916 y(Sequential)c(W)m(orkloads)g(on)f(a)g(Netwo)o(rk)h(o)o(f)g(W)m
(orkstation)o(s.)f(In)h Fa(Pr)o(oceed-)74 954 y(ings)i(of)g
(SIGMETRICS/P)m(erformance)f('95)p Fm(,)h(pages)f(267\26178,)f(1995.)17
1008 y([4])18 b(C.)6 b(Baru,)g(G.)g(Fecteau,)g(A.)g(Goyal,)f(H.)h
(Hsiao,)g(A.)g(Jhnigran,)f(S.)i(Padman-)74 1045 y(abhan,)j(and)g(W)m(.)
i(W)o(ilson.)19 b(An)11 b(Overvie)o(w)f(of)g(DB2)h(Parallel)g(Edition.)
74 1082 y(In)g Fa(Pr)o(oceedings)e(of)i(1995)f(SIGMOD)g(International)g
(Confer)o(ence)f(on)74 1120 y(Managemen)o(t)d(of)i(Data)p
Fm(,)g(San)g(Jose,)g(CA,)h(May)e(1995.)17 1174 y([5])18
b(A.)13 b(Basu,)h(V)l(.)f(Buch,)g(W)m(.)g(V)l(ogels,)g(and)f(T)n(.)h(v)
o(on)f(Eicken.)23 b(U-Net:)e(A)74 1211 y(User)o(-Le)o(vel)8
b(Network)f(Interface)g(for)h(Parallel)g(and)f(Distrib)o(uted)i(Com-)74
1248 y(puting.)d(In)f Fa(Pr)o(oceedings)g(of)g(the)g(15th)g(A)o(CM)g
(Symposium)g(on)g(Ope)o(rating)74 1286 y(Systems)i(Principles)p
Fm(,)i(Copper)e(Mountain,)f(Colorado,)i(Dec.)g(1995.)17
1340 y([6])18 b(B.)7 b(Baugsto,)f(J.)g(Greipsland,)g(and)f(J.)i
(Kamerbeek.)g(Sorting)f(Lar)o(ge)g(Data)74 1377 y(Files)i(on)e(POMA.)11
b(In)c Fa(Pr)o(oceedings)t(of)g(COMP)m(AR-90)h(V)n(APPIV)p
Fm(,)h(pages)74 1414 y(536\261547,)d(Sept.)i(1990.)j(Springer)d(V)l
(erlag)g(Lecture)g(Notes)f(No.)i(357.)17 1468 y([7])18
b(M.)7 b(Beck,)f(D.)h(Bitton,)h(and)e(W)m(.)h(K.)g(W)o(ilkinson.)i
(Sorting)e(Lar)o(ge)g(Files)g(on)74 1506 y(a)e(Backend)g(Multiproces)o
(sor.)t(T)n(echnical)g(Report)g(86-741)o(,)s(Department)74
1543 y(of)j(Computer)f(Science,)h(Cornell)g(Uni)o(versity)n(,)f(Mar)n
(.)h(1986.)17 1597 y([8])18 b(G.)c(Blelloch,)h(C.)f(Leiserson,)h(and)d
(B.)j(Maggs.)25 b(A)13 b(Comparison)g(of)74 1634 y(Sorting)8
b(Algorithms)g(for)g(the)g(Connection)f(Machine)g(CM-2.)12
b(In)c Fa(Sym-)74 1672 y(posium)f(on)h(P)m(arallel)g(Algorithms)g(and)f
(Ar)o(chitectur)o(es)p Fm(,)f(July)i(1991.)17 1726 y([9])18
b(M.)12 b(A.)g(Blumrich,)h(K.)f(Li,)h(R.)g(Alpert,)g(C.)f(Dubnicki,)g
(E.)g(W)m(.)h(Felten,)74 1763 y(and)f(J.)h(Sandber)o(g.)22
b(V)n(irtual)13 b(Memory)e(Mapped)g(Network)h(Interface)74
1801 y(for)g(the)g(SHRIMP)h(Multicomputer)n(.)21 b(In)12
b Fa(Pr)o(oceedings)e(of)i(the)g(Inter)o(-)74 1838 y(national)7
b(Symposium)g(on)h(Computer)f(Ar)o(chitectur)o(e)p Fm(,)g(pages)h
(142\261153,)74 1875 y(Apr)n(.)g(1994.)0 1929 y([10])18
b(N.)7 b(Boden,)g(D.)g(Cohen,)g(R.)h(E.)f(Felderman,)g(A.)h(Kulawik,)e
(and)g(C.)h(Seitz.)74 1967 y(Myrinet:)12 b(A)d(Gigabit-per)o(-second)e
(Local)h(Area)h(Network.)j Fa(IEEE)e(Mi-)74 2004 y(cr)o(o)p
Fm(,)d(Feb)o(.)h(1995.)0 2058 y([11])18 b(H.)8 b(Boral,)f(W)m(.)h
(Alexander)o(,)d(L.)j(Clay)n(,)g(G.)f(Copeland,)f(et)i(al.)i
(Prototyping)74 2095 y(Bubba,)g(a)f(Highly)h(Parallel)g(Database)e
(System.)17 b Fa(IEEE)11 b(T)n(ransactions)74 2133 y(on)d(Knowledge)e
(and)h(Data)h(Engineering)p Fm(,)f(2\(1\):4\26124,)f(Mar)n(.)i(1990.)0
2187 y([12])18 b(D.)23 b(Culler)o(,)k(A.)c(Dusseau,)j(S.)e(Goldstein,)i
(A.)d(Krishnamurthy)n(,)74 2224 y(S.)14 b(Lumetta,)g(T)n(.)f(v)o(on)f
(Eicken,)h(and)f(K.)h(Y)m(elick.)24 b(Parallel)13 b(Program-)74
2261 y(ming)8 b(in)g(Split-C.)13 b(In)8 b Fa(Super)o(computing)d('93)p
Fm(,)j(1993.)0 2315 y([13])18 b(D.)11 b(Culler)o(,)h(L.)g(T)n(.)f(Liu,)
h(R.)g(Martin,)f(and)f(C.)i(Y)l(oshikawa.)17 b(LogP)12
b(Per)o(-)74 2353 y(formance)c(Assessment)g(of)h(Fast)h(Network)e
(Interfaces.)14 b Fa(IEEE)c(Micr)o(o)p Fm(,)74 2390 y(Feb)o(.)e(1996.)0
2444 y([14])18 b(D.)9 b(DeW)o(itt,)h(S.)f(Ghandeharizadeh,)d(D.)j
(Schneider)o(,)f(A.)h(Bricker)o(,)f(et)h(al.)74 2481
y(The)h(Gamma)f(Database)g(Machine)f(Project.)18 b Fa(IEEE)11
b(T)n(ransactions)d(on)74 2519 y(Knowledge)e(and)i(Data)f(Engineering)p
Fm(,)g(2\(1\):44\26162,)f(Mar)n(.)i(1990.)0 2573 y([15])18
b(D.)11 b(De)o(witt,)i(J.)e(Naughton,)f(and)g(D.)i(Schneider)n(.)18
b(Parallel)11 b(Sorting)g(on)74 2610 y(a)f(Shared-Nothing)e
(Architecture)h(using)h(Probabilistic)g(Splitting.)18
b(In)74 2647 y Fa(Pr)o(oceedings)12 b(of)j(the)g(International)e
(Confer)o(ence)g(on)h(P)m(arallel)g(and)74 2685 y(Distrib)o(uted)8
b(Information)f(Systmes)p Fm(,)h(1991.)1025 45 y([16])18
b(A.)5 b(C.)g(Dusseau,)h(D.)f(E.)g(Culler)o(,)j(K.)d(E.)g(Schauser)o(,)
i(and)e(R.)g(P)l(.)g(Martin.)j(Fast)1099 82 y(Parallel)h(Sorting)g
(Under)f(LogP:)i(Experience)e(with)h(the)g(CM-5.)14 b
Fa(IEEE)1099 120 y(T)n(ransactions)t(on)6 b(P)m(arallel)g(and)f
(Distrib)o(uted)h(Systems)p Fm(,)g(7\(8\):791\261805,)1099
157 y(Aug.)i(1996.)1025 207 y([17])18 b(A.)11 b(et.)h(al.)20
b(A)12 b(Measure)d(of)i(T)o(ransaction)f(Processing)g(Po)o(wer.)21
b Fa(Data-)1099 244 y(mation)p Fm(,)14 b(31\(7\):112\26111)o(8,)d
(1985.)24 b(Also)12 b(in)h Fa(Readings)f(in)h(Database)1099
282 y(Systems)p Fm(,)8 b(M.H.)i(Stonebraker)d(ed.,)i(Mor)o(gan)e
(Kaufmann,)h(San)h(Mateo,)1099 319 y(1989.)1025 369 y([18])18
b(B.)10 b(Gerber)n(.)15 b(Informix)8 b(Online)h(XPS.)17
b(In)9 b Fa(Pr)o(oceedings)e(of)i(1995)f(SIG-)1099 406
y(MOD)k(International)g(Confer)o(ence)f(on)h(Managemen)o(t)e(of)j(Data)
p Fm(,)h(San)1099 444 y(Jose,)8 b(CA,)g(May)g(1995.)1025
493 y([19])18 b(D.)24 b(P)l(.)i(Ghormley)n(,)g(D.)f(Petrou,)j(A.)d(M.)f
(V)l(ahdat,)k(and)23 b(T)n(.)h(E.)1099 531 y(Anderson.)50
b(GLUnix:)42 b(A)23 b(Global)g(Layer)g(Unix)g(for)g(NO)o(W.)1099
568 y(http://no)o(w)n(.cs.berkeley)n(.edu)o(/Glunix/glu)o(nix.html.)
1025 618 y([20])18 b(G.)8 b(Graefe.)i(V)l(olcano:)h(An)c(Extensible)g
(and)g(Parallel)g(Data\257o)o(w)h(Query)1099 655 y(Processing)h
(System.)17 b(T)n(echnical)9 b(report,)h(Oregon)f(Graudate)f(Center)o
(,)1099 692 y(June)f(1989.)1025 742 y([21])18 b(G.)10
b(Graefe.)15 b(Parallel)10 b(External)f(Sorting)h(in)f(V)l(olcano.)15
b(T)n(echnical)8 b(Re-)1099 780 y(port)h(CU-CS-459,)i(Computer)e
(Science,)h(Uni)o(versity)f(of)h(Colorado)f(at)1099 817
y(Boulder)o(,)e(June)g(1990.)1025 867 y([22])18 b(M.)h(D.)g(Hill,)k(J.)
d(R.)g(Larus,)i(S.)e(Reinhardt,)h(and)d(D.)i(A.)f(W)m(ood.)1099
904 y(Cooperati)o(ve-Shared)6 b(Memory:)12 b(Software)d(and)e(Hardware)
h(for)h(Scal-)1099 941 y(able)e(Multiprocessors.)k Fa(A)o(CM)d(T)n
(ransactions)f(on)g(Computer)h(Systems)p Fm(,)1099 979
y(11\(4\):300\261318)o(,)e(1993.)1025 1029 y([23])18
b(C.)7 b(A.)f(R.)h(Hoare.)h(Quicksort.)f Fa(Computer)e(J)o(ournal)p
Fm(,)h(5\(1\):10\26115,)t(1962.)1025 1078 y([24])18 b(S.)13
b(Kleiman,)g(J.)f(V)l(oll,)i(J.)e(Eykholt,)h(A.)g(Shi)o(v)o(alingiah,)g
(D.)f(W)o(illiams,)1099 1116 y(M.)5 b(Smith,)i(S.)g(Barton,)f(and)t(G.)
g(Skinner)n(.)i(Symmetric)d(Multiprocessing)1099 1153
y(in)j(Solaris)h(2.0.)i(In)d Fa(Pr)o(oceedings)e(of)i(COMPCON)h(Spring)
e('92)p Fm(,)h(1992.)1025 1203 y([25])18 b(X.)c(Li,)h(G.)f(Linof)o(f,)h
(S.)f(Smith,)i(C.)e(Stan\256ll,)i(and)c(K.)i(Thearling.)25
b(A)1099 1240 y(Practical)7 b(External)g(Sort)h(for)e(Shared)h(Disk)g
(MPPs.)k(In)6 b Fa(Pr)o(oceedings)f(of)1099 1278 y(SUPERCOMPUTING)k
('93)p Fm(,)f(pages)f(666\261675,)f(Nov)n(.)h(1993.)1025
1327 y([26])18 b(C.)12 b(Nyber)o(g,)g(T)n(.)g(Barclay)n(,)g(Z.)h
(Cvetanovic,)d(J.)i(Gray)n(,)g(and)f(D.)h(Lomet.)1099
1365 y(AlphaSort:)f(A)d(RISC)g(Machine)d(Sort.)12 b(In)7
b Fa(Pr)o(oceedings)e(of)i(1994)f(A)o(CM)1099 1402 y(SIGMOD)h(Confer)o
(ence)p Fm(,)g(May)g(1994.)1025 1452 y([27])18 b(B.)12
b(Salzber)o(g,)g(A.)f(Tsukerman,)g(J.)g(Gray)n(,)h(M.)f(Ste)o(wart,)i
(S.)f(Uren,)g(and)1099 1489 y(B.)c(V)l(aughna.)h(FastSort;)g(A)f
(Distrib)o(uted)f(Single-Input)g(Single-Output)1099 1527
y(External)h(Sort.)k Fa(SIGMOD)c(Recor)o(d)p Fm(,)f(19\(2\):94\261101,)
e(June)j(1990.)1025 1576 y([28])18 b(M.)10 b(Stonebraker)n(.)16
b(Operating)9 b(System)h(Support)f(for)h(Database)f(Man-)1099
1614 y(agement.)26 b Fa(Communications)13 b(of)h(the)g(A)o(CM)p
Fm(,)g(24\(7\):412\261418,)f(July)1099 1651 y(1981.)1025
1701 y([29])18 b(M.)9 b(Stonebraker)n(.)j(The)d(Case)f(for)h(Shared)f
(Nothing.)13 b Fa(Database)7 b(Engi-)1099 1738 y(neering)p
Fm(,)g(9\(1\),)h(1986.)1025 1788 y([30])18 b(A.)10 b(Sweeney)n(,)f(D.)i
(Doucette,)f(W)m(.)g(Hu,)h(C.)f(Anderson,)f(M.)h(Nishimoto,)1099
1825 y(and)c(G.)i(Peck.)i(Scalability)d(in)g(the)g(XFS)h(File)g
(System.)j(In)6 b Fa(Pr)o(oceedings)1099 1863 y(of)i(the)g(USENIX)h
(1996)d(Annual)h(T)m(echnical)g(Confer)o(ence)p Fm(,)g(Jan.)h(1996.)
1025 1912 y([31])18 b(T)m(andem)7 b(Performance)f(Group.)k(A)d
(Benchmark)f(of)h(NonStop)g(SQL)h(on)1099 1950 y(Debit-Credit)g(T)o
(ransactions.)i(In)e Fa(Pr)o(oceedings)e(of)i(SIGMOD)f(Interna-)1099
1987 y(tional)k(Confer)o(ence)e(on)i(Managament)d(of)k(Data)p
Fm(,)g(Chicago,)f(IL,)h(June)1099 2024 y(1988.)1025 2074
y([32])18 b(T)n(eradata)9 b(Corporation.)17 b Fa(DBC/1012)9
b(Data)h(Base)g(Computer)g(System)1099 2112 y(Manual)p
Fm(,)c(release)g(2.0)h(edition,)g(Nov)n(.)f(1985.)j(Document)d(Number)g
(c10-)1099 2149 y(0001-02.)1025 2199 y([33])18 b(T)n(.)8
b(v)o(on)f(Eicken,)g(D.)h(E.)h(Culler)o(,)f(S.)g(C.)h(Goldstein,)e(and)
g(K.)h(E.)h(Schauser)n(.)1099 2236 y(Acti)o(ve)h(Messages:)k(a)d
(Mechanism)d(for)i(Integrated)f(Communication)1099 2273
y(and)d(Computation.)i(In)e Fa(Pr)o(oceedings)t(of)h(the)f(19th)g
(Annual)g(Symposium)1099 2311 y(on)h(Computer)g(Ar)o(chitectur)o(e)p
Fm(,)g(Gold)h(Coast,)g(Australia,)g(May)g(1992.)1025
2361 y([34])18 b(H.)9 b(Y)l(oung)f(and)f(A.)j(Swami.)j(The)c
(Parameterized)e(Round-Robin)g(Par)o(-)1099 2398 y(titioned)g
(Algorithm)f(for)h(Parallel)g(External)g(Sort.)k(In)c
Fa(Pr)o(oceedings)e(9th)1099 2435 y(International)11
b(P)m(arallel)h(Pr)o(ocessing)f(Symposium)p Fm(,)h(pages)f(213\261219,)
1099 2473 y(Santa)d(Barbara,)g(CA,)g(Apr)n(.)h(1995.)1025
2522 y([35])18 b(M.)5 b(Zagha)g(and)g(G.)g(Blelloch.)t(Radix)g(Sort)g
(for)g(V)l(ector)g(Multiprocessors.)1099 2560 y(In)j
Fa(Super)o(computing)o Fm(,)e(1991.)1025 2610 y([36])18
b(W)m(.)9 b(Zhang)f(and)f(P)l(.)j(Larson.)j(A)c(Memory-Adapti)o(ve)c
(Sort)k(\(MASOR)n(T\))1099 2647 y(for)e(Database)f(Systems.)k(In)d
Fa(Pr)o(oceedings)e(of)i(CASCON)g('96)p Fm(,)g(T)m(oronto,)1099
2684 y(Nov)n(.)g(1996.)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
